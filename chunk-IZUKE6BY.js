import{a as N}from"./chunk-UQV72EDM.js";import{c as q}from"./chunk-BMIYH3UD.js";import{c as j}from"./chunk-GZDNXZTC.js";import{Cb as C,Db as s,Eb as I,Fb as V,Kb as F,Lb as $,Oa as o,Ob as H,Rb as m,Sb as D,Tb as p,X as K,Za as _,aa as x,ba as y,ca as S,gc as b,hc as g,nb as T,nc as O,ob as v,oc as M,pb as h,qc as P,rb as w,rc as r,sb as E,sc as Z,ta as B,tb as k,ub as l,vb as d,wb as A,zb as L}from"./chunk-QF4LG6ZD.js";var Q=(i,a)=>a.key;function G(i,a){if(i&1&&(l(0,"div",2)(1,"div",3),m(2),b(3,"transloco"),d(),l(4,"div",4),m(5),b(6,"formatNumber"),d()()),i&2){let n=a.$implicit;o(2),p(" ",g(3,2,n.labelKey)," "),o(3),p(" ",g(6,4,n.value??0)," ")}}function R(i,a){if(i&1&&(l(0,"div",0),w(1,G,7,6,"div",2,Q),d()),i&2){let n=s();o(),E(n.visibleFields())}}function J(i,a){if(i&1&&(l(0,"div",5)(1,"span",6),m(2),b(3,"transloco"),d(),l(4,"span",7),m(5),b(6,"formatNumber"),d()()),i&2){let n=a.$implicit;o(2),D(g(3,2,n.labelKey)),o(3),D(g(6,4,n.value??0))}}function U(i,a){if(i&1&&(l(0,"div",1),w(1,J,7,6,"div",5,Q),d()),i&2){let n=s();o(),E(n.visibleFields())}}var de=(()=>{let a=class a{constructor(){this.kudosDetails=r.required(),this.variant=r("admin"),this.translationPrefix=r(void 0),this.showZeroValues=r(!0),this.visibleFields=O(()=>{let e=this.kudosDetails(),t=this.translationPrefix()??this.defaultPrefix(),c=this.showZeroValues(),f=[{key:"accumulated",labelKey:`${t}accumulated`,value:e.accumulated},{key:"gifted",labelKey:`${t}gifted`,value:e.gifted},{key:"received",labelKey:`${t}received`,value:e.received},{key:"admin",labelKey:`${t}admin`,value:e.admin},{key:"recurring",labelKey:`${t}recurring`,value:e.recurring},{key:"awarded",labelKey:`${t}awarded`,value:e.awarded},{key:"donated",labelKey:`${t}donated`,value:e.donated},{key:"styled",labelKey:`${t}styled`,value:e.styled}];return c?f.filter(u=>u.value!==void 0||!["donated","styled"].includes(u.key)):f.filter(u=>u.value)})}defaultPrefix(){return this.variant()==="admin"?"admin.users.kudos.":"profile.kudos_"}};a.\u0275fac=function(t){return new(t||a)},a.\u0275cmp=_({type:a,selectors:[["app-kudos-breakdown-panel"]],inputs:{kudosDetails:[1,"kudosDetails"],variant:[1,"variant"],translationPrefix:[1,"translationPrefix"],showZeroValues:[1,"showZeroValues"]},decls:2,vars:1,consts:[[1,"admin-grid-stats-4","gap-4"],[1,"data-grid-2-3"],[1,"admin-bg-dark","rounded-lg","p-3"],[1,"text-xs","admin-text-muted","mb-1"],[1,"admin-heading-card"],[1,"data-item"],[1,"data-label"],[1,"data-value"]],template:function(t,c){t&1&&v(0,R,3,0,"div",0)(1,U,3,0,"div",1),t&2&&h(c.variant()==="admin"?0:1)},dependencies:[q,N],encapsulation:2,changeDetection:0});let i=a;return i})();var W=["dialogPanel"],X=["*"];function Y(i,a){if(i&1&&(l(0,"span",11),S(),l(1,"svg",12),A(2,"circle",13)(3,"path",14),d(),m(4),d()),i&2){let n=s(2);o(4),p(" ",n.loadingLabel()||n.confirmLabel()," ")}}function ee(i,a){if(i&1&&m(0),i&2){let n=s(2);p(" ",n.confirmLabel()," ")}}function te(i,a){if(i&1){let n=L();l(0,"div",3)(1,"div",4),C("click",function(){x(n);let t=s();return y(t.onBackdropClick())}),d(),l(2,"div",5,0)(4,"h3",6),m(5),d(),l(6,"div",7),V(7),d(),l(8,"div",8)(9,"button",9,1),C("click",function(){x(n);let t=s();return y(t.cancel.emit())}),m(11),d(),l(12,"button",10,2),C("click",function(){x(n);let t=s();return y(t.confirm.emit())}),v(14,Y,5,1,"span",11)(15,ee,1,1),d()()()()}if(i&2){let n=s();o(2),T("aria-labelledby",n.titleId),o(2),k("id",n.titleId),o(),p(" ",n.title()," "),o(4),k("disabled",n.loading()),o(2),p(" ",n.cancelLabel()," "),o(),H("btn-danger",n.variant()==="danger"),k("disabled",n.loading()),o(2),h(n.loading()?14:15)}}var ue=(()=>{let a=class a{constructor(){this.platformId=K(B),this.previousActiveElement=null,this.dialogPanel=Z("dialogPanel"),this.open=r(!1),this.title=r.required(),this.confirmLabel=r("Confirm"),this.cancelLabel=r("Cancel"),this.loading=r(!1),this.loadingLabel=r(void 0),this.variant=r("default"),this.closeOnBackdrop=r(!0),this.confirm=P(),this.cancel=P(),this.titleId=`admin-dialog-title-${Math.random().toString(36).substr(2,9)}`,this.keydownHandler=null,M(()=>{let e=this.open();j(this.platformId)&&(e?this.onOpen():this.onClose())})}ngOnDestroy(){this.removeKeyboardHandler()}onBackdropClick(){this.closeOnBackdrop()&&!this.loading()&&this.cancel.emit()}onOpen(){this.previousActiveElement=document.activeElement,this.keydownHandler=e=>this.handleKeydown(e),document.addEventListener("keydown",this.keydownHandler),setTimeout(()=>{this.dialogPanel()?.nativeElement?.focus()},0)}onClose(){this.removeKeyboardHandler(),this.previousActiveElement&&this.previousActiveElement instanceof HTMLElement&&this.previousActiveElement.focus(),this.previousActiveElement=null}handleKeydown(e){if(e.key==="Escape"&&!this.loading()){e.preventDefault(),this.cancel.emit();return}e.key==="Tab"&&this.trapFocus(e)}trapFocus(e){let t=this.dialogPanel();if(!t)return;let c=t.nativeElement.querySelectorAll('button:not([disabled]), [href], input:not([disabled]), select:not([disabled]), textarea:not([disabled]), [tabindex]:not([tabindex="-1"])');if(c.length===0)return;let f=c[0],u=c[c.length-1];e.shiftKey?document.activeElement===f&&(e.preventDefault(),u.focus()):document.activeElement===u&&(e.preventDefault(),f.focus())}removeKeyboardHandler(){this.keydownHandler&&(document.removeEventListener("keydown",this.keydownHandler),this.keydownHandler=null)}};a.\u0275fac=function(t){return new(t||a)},a.\u0275cmp=_({type:a,selectors:[["app-admin-dialog"]],viewQuery:function(t,c){t&1&&F(c.dialogPanel,W,5),t&2&&$()},inputs:{open:[1,"open"],title:[1,"title"],confirmLabel:[1,"confirmLabel"],cancelLabel:[1,"cancelLabel"],loading:[1,"loading"],loadingLabel:[1,"loadingLabel"],variant:[1,"variant"],closeOnBackdrop:[1,"closeOnBackdrop"]},outputs:{confirm:"confirm",cancel:"cancel"},ngContentSelectors:X,decls:1,vars:1,consts:[["dialogPanel",""],["cancelButton",""],["confirmButton",""],[1,"modal"],["aria-hidden","true",1,"modal-backdrop",3,"click"],["role","dialog","aria-modal","true","tabindex","-1",1,"dialog-panel"],[1,"admin-heading-card","mb-4",3,"id"],[1,"dialog-content","mb-6"],[1,"flex","justify-end","gap-3"],["type","button",1,"btn-muted",3,"click","disabled"],["type","button",1,"btn-primary",3,"click","disabled"],[1,"inline-flex","items-center","gap-2"],["fill","none","viewBox","0 0 24 24","aria-hidden","true",1,"animate-spin","h-4","w-4"],["cx","12","cy","12","r","10","stroke","currentColor","stroke-width","4",1,"opacity-25"],["fill","currentColor","d","M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z",1,"opacity-75"]],template:function(t,c){t&1&&(I(),v(0,te,16,9,"div",3)),t&2&&h(c.open()?0:-1)},encapsulation:2,changeDetection:0});let i=a;return i})();export{de as a,ue as b};
