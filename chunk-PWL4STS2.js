import{b as j}from"./chunk-VBKQCJ5T.js";import{f as w}from"./chunk-7XAAPZRY.js";import{B as x,T,X as u,a as f,o as y,s as i}from"./chunk-MBFF63MY.js";function g(c,r,m){let t=f({},c),e=f({},m?t[m]:t);for(let o of Object.keys(e))for(let a of r)typeof t[a]=="string"&&(t[a]=t[a].replaceAll(`{${o}}`,e[o]));return t}var I=(()=>{let r=class r{constructor(t,e){this.httpClient=t,this.transloco=e}get faq(){return this.getData("faq").pipe(i(t=>this.formatToMapped(t,"section")))}get tools(){return this.getData("tools").pipe(i(t=>this.formatToMapped(t,"category")))}get imageGuis(){return this.getData("image-guis").pipe(i(t=>t.map(e=>g(e,["description","downloadButtonText"]))),i(t=>this.formatToMapped(t,"categories")))}get textGuis(){return this.getData("text-guis").pipe(i(t=>t.map(e=>g(e,["description","downloadButtonText"]))),i(t=>this.formatToMapped(t,"categories")))}get privacyPolicy(){return this.getData("privacy").pipe(i(t=>{let e=this.formatToMapped(t,"section"),o=new Map;return e.forEach((a,n)=>{let p=this.formatToMapped(a.map(v=>{let s=f({},v);if(s.context!==void 0)for(let h of Object.keys(s.context)){let l=s.context[h],d;switch(l.valueType){case"date":d=new Intl.DateTimeFormat(this.transloco.getActiveLang(),{dateStyle:"long",timeStyle:void 0}).format(new Date(l.value));break;default:throw new Error(`Unsupported type: ${l.valueType}`)}s.text=s.text.replaceAll(`{${h}}`,d)}return s}),"subsection");o.set(n,p)}),o}))}formatToMapped(t,e){let o=new Map;for(let a of t){let n=a[e];n===null&&(n=[""]),Array.isArray(n)||(n=[n]);for(let p of n)o.has(p)||o.set(p,[]),o.get(p).push(a)}return o}getData(t){return this.httpClient.get(`/assets/data/${t}.${this.transloco.getActiveLang()}.json`).pipe(x(e=>e.status!==404?y(()=>e):this.httpClient.get(`/assets/data/${t}.en.json`)))}};r.\u0275fac=function(e){return new(e||r)(u(w),u(j))},r.\u0275prov=T({token:r,factory:r.\u0275fac,providedIn:"root"});let c=r;return c})();export{I as a};
