import{a as Z}from"./chunk-FJFZRYE7.js";import{a as Q,b as Y}from"./chunk-FFCDYRDS.js";import{a as ee}from"./chunk-UQV72EDM.js";import{e as q}from"./chunk-T4BZNTIM.js";import{a as X}from"./chunk-Z4QX4XJM.js";import{c as J,d as K}from"./chunk-BMIYH3UD.js";import{k as U}from"./chunk-GZDNXZTC.js";import{Cb as w,Db as _,Oa as i,Qb as z,Rb as a,Sb as x,Tb as m,Ub as F,X as M,Za as $,aa as f,ba as v,ca as b,cc as H,da as N,dc as T,ga as j,gc as s,hc as p,ic as y,ja as E,ob as C,pb as u,qb as A,qc as L,rb as D,rc as V,sb as O,tb as k,ub as n,vb as o,wb as g,zb as h}from"./chunk-QF4LG6ZD.js";var I=e=>({name:e}),te=e=>["/admin/users",e],ie=()=>[],ne=(e,l)=>l.message;function oe(e,l){e&1&&(n(0,"div",0),b(),n(1,"svg",32),g(2,"path",33),o(),N(),n(3,"span"),a(4),s(5,"transloco"),o()()),e&2&&(i(4),x(p(5,1,"admin.workers.success")))}function re(e,l){if(e&1&&(n(0,"li",45),a(1),o()),e&2){let t=l.$implicit;i(),x(t)}}function ae(e,l){if(e&1&&(n(0,"ul",44),D(1,re,2,1,"li",45,A),o()),e&2){let t=_(4);i(),O(t.getFilteredModels())}}function le(e,l){e&1&&(n(0,"p",38),a(1),s(2,"transloco"),o()),e&2&&(i(),m(" ",p(2,1,"admin.workers.dialog.no_models_match")," "))}function de(e,l){if(e&1){let t=h();n(0,"div",41)(1,"input",42),s(2,"transloco"),w("input",function(d){f(t);let c=_(3);return v(c.onModelSearchChange(d))}),o()(),n(3,"div",43),C(4,ae,3,0,"ul",44)(5,le,3,3,"p",38),o()}if(e&2){let t=_(3);i(),k("value",t.modelSearch())("placeholder",p(2,3,"admin.workers.dialog.search_models")),i(3),u(t.getFilteredModels().length>0?4:5)}}function se(e,l){e&1&&(n(0,"p",38),a(1),s(2,"transloco"),o()),e&2&&(i(),m(" ",p(2,1,"admin.common.none")," "))}function pe(e,l){if(e&1){let t=h();n(0,"h3",36),a(1),s(2,"transloco"),n(3,"span",37),a(4),o()(),C(5,de,6,5)(6,se,3,3,"p",38),n(7,"div",39)(8,"button",40),w("click",function(){f(t);let d=_(2);return v(d.closeDialog())}),a(9),s(10,"transloco"),o()()}if(e&2){let t=_(2);i(),m(" ",y(2,4,"admin.workers.dialog.models_title",T(9,I,t.worker().name))," "),i(3),m("(",t.getSortedModels().length,")"),i(),u(t.getSortedModels().length>0?5:6),i(4),m(" ",p(10,7,"admin.workers.dialog.close")," ")}}function ce(e,l){if(e&1&&(a(0),s(1,"transloco")),e&2){let t=_(3);m(" ",y(1,1,"admin.workers.dialog.unset_maintenance_title",T(4,I,t.worker().name))," ")}}function me(e,l){if(e&1&&(a(0),s(1,"transloco")),e&2){let t=_(3);m(" ",y(1,1,"admin.workers.dialog.set_maintenance_title",T(4,I,t.worker().name))," ")}}function _e(e,l){if(e&1){let t=h();n(0,"div",41)(1,"label",49),a(2),s(3,"transloco"),o(),n(4,"textarea",50),w("input",function(d){f(t);let c=_(3);return v(c.onMaintenanceReasonChange(d))}),o()()}if(e&2){let t=_(3);i(2),m(" ",p(3,2,"admin.workers.dialog.maintenance_reason")," "),i(2),k("value",t.maintenanceReason())}}function Ce(e,l){if(e&1){let t=h();n(0,"h3",36),C(1,ce,2,6)(2,me,2,6),o(),C(3,_e,5,4,"div",41),n(4,"div",46)(5,"button",47),w("click",function(){f(t);let d=_(2);return v(d.closeDialog())}),a(6),s(7,"transloco"),o(),n(8,"button",48),w("click",function(){f(t);let d=_(2);return v(d.confirmMaintenance())}),a(9),s(10,"transloco"),o()()}if(e&2){let t=_(2);i(),u(t.worker().maintenance_mode?1:2),i(2),u(t.worker().maintenance_mode?-1:3),i(3),m(" ",p(7,5,"admin.workers.dialog.cancel")," "),i(2),k("disabled",t.isUpdating()),i(),m(" ",p(10,7,"admin.workers.dialog.confirm")," ")}}function ue(e,l){if(e&1&&(a(0),s(1,"transloco")),e&2){let t=_(3);m(" ",y(1,1,"admin.workers.dialog.unset_paused_title",T(4,I,t.worker().name))," ")}}function ke(e,l){if(e&1&&(a(0),s(1,"transloco")),e&2){let t=_(3);m(" ",y(1,1,"admin.workers.dialog.set_paused_title",T(4,I,t.worker().name))," ")}}function xe(e,l){if(e&1){let t=h();n(0,"h3",36),C(1,ue,2,6)(2,ke,2,6),o(),n(3,"div",46)(4,"button",47),w("click",function(){f(t);let d=_(2);return v(d.closeDialog())}),a(5),s(6,"transloco"),o(),n(7,"button",51),w("click",function(){f(t);let d=_(2);return v(d.confirmPause())}),a(8),s(9,"transloco"),o()()}if(e&2){let t=_(2);i(),u(t.worker().paused?1:2),i(4),m(" ",p(6,4,"admin.workers.dialog.cancel")," "),i(2),k("disabled",t.isUpdating()),i(),m(" ",p(9,6,"admin.workers.dialog.confirm")," ")}}function we(e,l){e&1&&(n(0,"div",53)(1,"p",58),a(2),s(3,"transloco"),o()()),e&2&&(i(2),m(" ",p(3,1,"admin.workers.dialog.delete_error")," "))}function fe(e,l){if(e&1){let t=h();n(0,"h3",36),a(1),s(2,"transloco"),o(),n(3,"div",52)(4,"div",53)(5,"p",54),a(6),s(7,"transloco"),o()(),n(8,"div",55)(9,"p",56),a(10),s(11,"transloco"),o()(),C(12,we,4,3,"div",53),o(),n(13,"div",46)(14,"button",47),w("click",function(){f(t);let d=_(2);return v(d.closeDialog())}),a(15),s(16,"transloco"),o(),n(17,"button",57),w("click",function(){f(t);let d=_(2);return v(d.confirmDelete())}),a(18),s(19,"transloco"),o()()}if(e&2){let t=_(2);i(),m(" ",y(2,7,"admin.workers.dialog.delete_title",T(18,I,t.worker().name))," "),i(5),m(" ",p(7,10,"admin.workers.dialog.delete_warning_permanent")," "),i(4),m(" ",p(11,12,"admin.workers.dialog.delete_warning_offline_requirement")," "),i(2),u(t.deleteError()?12:-1),i(3),m(" ",p(16,14,"admin.workers.dialog.cancel")," "),i(2),k("disabled",t.isUpdating()),i(),m(" ",p(19,16,"admin.workers.dialog.delete_confirm")," ")}}function ve(e,l){if(e&1){let t=h();n(0,"div",1)(1,"div",34),w("click",function(){f(t);let d=_();return v(d.closeDialog())}),o(),n(2,"div",35),C(3,pe,11,11)(4,Ce,11,9)(5,xe,10,8)(6,fe,20,20),o()()}if(e&2){let t,r=_();i(3),u((t=r.dialogType())==="models"?3:t==="maintenance"?4:t==="pause"?5:t==="delete"?6:-1)}}function ge(e,l){e&1&&(n(0,"div",5),s(1,"transloco"),b(),n(2,"svg",32),g(3,"path",33),o()()),e&2&&k("title",p(1,1,"admin.workers.card.online"))}function he(e,l){e&1&&(n(0,"div",6),s(1,"transloco"),b(),n(2,"svg",32),g(3,"path",59),o()()),e&2&&k("title",p(1,1,"admin.workers.card.issue"))}function Se(e,l){e&1&&(n(0,"span",10),a(1),s(2,"transloco"),o()),e&2&&(i(),x(p(2,1,"admin.workers.type.image")))}function be(e,l){e&1&&(n(0,"span",11),a(1),s(2,"transloco"),o()),e&2&&(i(),x(p(2,1,"admin.workers.type.text")))}function Ee(e,l){e&1&&(n(0,"span",12),a(1),s(2,"transloco"),o()),e&2&&(i(),x(p(2,1,"admin.workers.type.interrogation")))}function Te(e,l){e&1&&(n(0,"div",15),s(1,"transloco"),b(),n(2,"svg",60),g(3,"path",61),o()()),e&2&&k("title",p(1,1,"admin.workers.card.low_speed_warning"))}function ye(e,l){e&1&&(n(0,"div",15),s(1,"transloco"),b(),n(2,"svg",62),g(3,"path",61),o()()),e&2&&k("title",p(1,1,"admin.workers.card.high_speed_warning"))}function Ie(e,l){e&1&&(n(0,"div",15),s(1,"transloco"),b(),n(2,"svg",63),g(3,"path",64),o()()),e&2&&k("title",p(1,1,"admin.workers.card.paused"))}function We(e,l){e&1&&(n(0,"div",15),s(1,"transloco"),b(),n(2,"svg",63),g(3,"path",65),o()()),e&2&&k("title",p(1,1,"admin.workers.card.maintenance"))}function Be(e,l){e&1&&(n(0,"div",15),s(1,"transloco"),b(),n(2,"svg",63),g(3,"path",66),o()()),e&2&&k("title",p(1,1,"admin.workers.card.flagged"))}function Me(e,l){e&1&&(n(0,"div",15),s(1,"transloco"),b(),n(2,"svg",67),g(3,"path",68),o()()),e&2&&k("title",p(1,1,"admin.workers.card.trusted"))}function Ve(e,l){if(e&1&&(n(0,"a",20),a(1),o()),e&2){let t=_();k("routerLink",T(3,te,t.getOwnerUserId()))("title",t.worker().owner),i(),x(t.getOwnerDisplayName())}}function Ue(e,l){if(e&1&&(n(0,"span",21),a(1),o()),e&2){let t=_();k("title",t.worker().owner??""),i(),x(t.getOwnerDisplayName())}}function De(e,l){if(e&1&&(n(0,"div",18)(1,"span",19),a(2),s(3,"transloco"),o(),n(4,"span",69),a(5),o()()),e&2){let t,r,d=_();i(2),m("",p(3,3,"admin.workers.card.team"),":"),i(2),k("title",((t=d.worker().team)==null?null:t.name)??((t=d.worker().team)==null?null:t.id)??""),i(),x(((r=d.worker().team)==null?null:r.name)??((r=d.worker().team)==null?null:r.id)??"")}}function Oe(e,l){if(e&1&&(n(0,"span",21),a(1),o()),e&2){let t=l,r=_();k("title",r.worker().bridge_agent),i(),F("",t.name," v",t.version)}}function Fe(e,l){if(e&1&&(n(0,"span",21),a(1),o()),e&2){let t=_();k("title",t.worker().bridge_agent),i(),x(t.worker().bridge_agent)}}function Le(e,l){e&1&&(n(0,"div",22)(1,"span",19),a(2),s(3,"transloco"),o(),n(4,"span",70),a(5),o()()),e&2&&(i(2),m("",p(3,2,"admin.workers.card.software_contact"),":"),i(3),x(l.contact))}function Pe(e,l){if(e&1&&(n(0,"div",22)(1,"span",19),a(2),s(3,"transloco"),o(),n(4,"span",70),a(5),o()()),e&2){let t=_();i(2),m("",p(3,2,"admin.workers.card.contact"),":"),i(3),x(t.worker().contact)}}function Ge(e,l){if(e&1&&(n(0,"div",18)(1,"span",19),a(2),s(3,"transloco"),o(),n(4,"span",71),a(5),o()()),e&2){let t=_();i(2),m("",p(3,2,"admin.workers.card.ipaddr"),":"),i(3),x(t.worker().ipaddr)}}function Re(e,l){if(e&1&&(n(0,"span",24),a(1),g(2,"app-unit-tooltip",72),o()),e&2){let t=l;i(),m(" ",t.primary.value.toFixed(2)," "),i(),k("unit",t)("primaryOverride",t.primary.unit)}}function Ne(e,l){if(e&1&&(n(0,"span",24),a(1),o()),e&2){let t=_();i(),x(t.worker().performance)}}function je(e,l){if(e&1&&(n(0,"span",24),a(1),g(2,"app-unit-tooltip",72),o()),e&2){let t=l;i(),m(" ",t.primary.value.toFixed(1)," "),i(),k("unit",t)("primaryOverride",t.primary.prefix+t.primary.unit)}}function $e(e,l){if(e&1&&(n(0,"span",24),a(1),s(2,"formatNumber"),o()),e&2){let t=_(2);i(),x(p(2,1,t.worker().megapixelsteps_generated??0))}}function Ae(e,l){if(e&1&&(n(0,"div",18)(1,"span",19),a(2),s(3,"transloco"),o(),C(4,je,3,3,"span",24)(5,$e,3,3,"span",24),o()),e&2){let t,r=_();i(2),m("",p(3,2,"admin.workers.card.mps_generated"),":"),i(2),u((t=r.getMpsGeneratedUnit())?4:5,t)}}function ze(e,l){if(e&1&&(n(0,"span",24),a(1),g(2,"app-unit-tooltip",72),o()),e&2){let t=l;i(),m(" ",t.primary.value.toFixed(1)," "),i(),k("unit",t)("primaryOverride",t.primary.prefix+t.primary.unit)}}function He(e,l){if(e&1&&(n(0,"span",24),a(1),s(2,"formatNumber"),o()),e&2){let t=_(2);i(),x(p(2,1,t.worker().tokens_generated??0))}}function qe(e,l){if(e&1&&(n(0,"div",18)(1,"span",19),a(2),s(3,"transloco"),o(),C(4,ze,3,3,"span",24)(5,He,3,3,"span",24),o()),e&2){let t,r=_();i(2),m("",p(3,2,"admin.workers.card.tokens_generated"),":"),i(2),u((t=r.getTokensGeneratedUnit())?4:5,t)}}function Xe(e,l){if(e&1&&(n(0,"div",22)(1,"span",19),a(2),s(3,"transloco"),o(),n(4,"span",73),a(5),o()()),e&2){let t=_(2);i(2),m("",p(3,2,"admin.workers.card.model_loaded"),":"),i(3),x(t.worker().models[0])}}function Je(e,l){if(e&1&&(n(0,"div",18)(1,"span",19),a(2),s(3,"transloco"),o(),n(4,"span",24),a(5),o()()),e&2){let t,r=_(2);i(2),m("",p(3,2,"admin.workers.card.models_loaded"),":"),i(3),x(((t=r.worker().models)==null?null:t.length)??0)}}function Ke(e,l){if(e&1&&C(0,Xe,6,4,"div",22)(1,Je,6,4,"div",18),e&2){let t,r=_();u((((t=r.worker().models)==null?null:t.length)??0)===1?0:1)}}function Qe(e,l){if(e&1&&(n(0,"div",18)(1,"span",19),a(2),s(3,"transloco"),o(),n(4,"span",24),a(5),o()()),e&2){let t,r=_();i(2),m("",p(3,2,"admin.workers.card.forms"),":"),i(3),x(((t=r.worker().forms)==null?null:t.join(", "))??"")}}function Ye(e,l){e&1&&(n(0,"span",76),a(1,"img2img"),o())}function Ze(e,l){e&1&&(n(0,"span",76),a(1,"inpainting"),o())}function et(e,l){e&1&&(n(0,"span",76),a(1,"post-processing"),o())}function tt(e,l){e&1&&(n(0,"span",76),a(1,"LoRA"),o())}function it(e,l){e&1&&(n(0,"span",76),a(1,"ControlNet"),o())}function nt(e,l){e&1&&(n(0,"span",76),a(1,"SDXL ControlNet"),o())}function ot(e,l){if(e&1&&(n(0,"div",26)(1,"span",74),a(2),s(3,"transloco"),o(),n(4,"div",75),C(5,Ye,2,0,"span",76),C(6,Ze,2,0,"span",76),C(7,et,2,0,"span",76),C(8,tt,2,0,"span",76),C(9,it,2,0,"span",76),C(10,nt,2,0,"span",76),o()()),e&2){let t=_();i(2),m("",p(3,7,"admin.workers.card.capabilities"),":"),i(3),u(t.worker().img2img?5:-1),i(),u(t.worker().painting?6:-1),i(),u(t.worker()["post-processing"]?7:-1),i(),u(t.worker().lora?8:-1),i(),u(t.worker().controlnet?9:-1),i(),u(t.worker().sdxl_controlnet?10:-1)}}function rt(e,l){if(e&1&&(n(0,"span",79),a(1),o()),e&2){let t=_().$implicit;i(),m("(",t.origin,")")}}function at(e,l){if(e&1&&(n(0,"div",78)(1,"span",24),a(2),o(),C(3,rt,2,1,"span",79),o()),e&2){let t=l.$implicit;i(2),x(t.message),i(),u(t.origin?3:-1)}}function lt(e,l){if(e&1&&(n(0,"div",26)(1,"span",74),a(2),s(3,"transloco"),o(),n(4,"div",77),D(5,at,4,2,"div",78,ne),o()()),e&2){let t,r=_();i(2),F("",p(3,2,"admin.workers.card.messages")," (",((t=r.worker().messages)==null?null:t.length)??0,"):"),i(3),O(r.worker().messages??H(4,ie))}}function dt(e,l){e&1&&(a(0),s(1,"transloco")),e&2&&m(" ",p(1,1,"admin.workers.button.disable_maintenance")," ")}function st(e,l){e&1&&(a(0),s(1,"transloco")),e&2&&m(" ",p(1,1,"admin.workers.button.maintenance")," ")}function pt(e,l){if(e&1){let t=h();n(0,"button",80),s(1,"transloco"),w("click",function(){f(t);let d=_();return v(d.openMaintenanceDialog())}),C(2,dt,2,3)(3,st,2,3),o()}if(e&2){let t=_();k("title",p(1,2,"admin.workers.button.maintenance_tooltip")),i(2),u(t.worker().maintenance_mode?2:3)}}function ct(e,l){e&1&&(a(0),s(1,"transloco")),e&2&&m(" ",p(1,1,"admin.workers.button.unpause")," ")}function mt(e,l){e&1&&(a(0),s(1,"transloco")),e&2&&m(" ",p(1,1,"admin.workers.button.pause")," ")}function _t(e,l){if(e&1){let t=h();n(0,"button",81),s(1,"transloco"),s(2,"transloco"),w("click",function(){f(t);let d=_();return v(d.openPauseDialog())}),C(3,ct,2,3)(4,mt,2,3),o()}if(e&2){let t=_();k("title",t.worker().paused?p(1,2,"admin.workers.action.unset_paused"):p(2,4,"admin.workers.action.set_paused")),i(3),u(t.worker().paused?3:4)}}function Ct(e,l){if(e&1){let t=h();n(0,"button",82),s(1,"transloco"),w("click",function(){f(t);let d=_();return v(d.openDeleteDialog())}),a(2),s(3,"transloco"),o()}e&2&&(k("title",p(1,2,"admin.workers.action.delete")),i(2),m(" ",p(3,4,"admin.workers.button.delete")," "))}var yt=(()=>{let l=class l{constructor(){this.workerService=M(Z),this.destroyRef=M(j),this.auth=M(X),this.unitConversion=M(Y),this.worker=V.required(),this.isModerator=V(!1),this.viewMode=V("admin"),this.workerUpdated=L(),this.workerDeleted=L(),this.dialogOpen=E(!1),this.dialogType=E("models"),this.maintenanceReason=E(""),this.modelSearch=E(""),this.isUpdating=E(!1),this.showSuccess=E(!1),this.deleteError=E(null)}get isUserModerator(){return this.auth.currentUser()?.moderator??!1}getOwnerUserId(){let r=this.worker().owner;if(!r)return null;let d=r.match(/#(\d+)$/);return d?d[1]:null}isOwnedByCurrentUser(){let r=this.getOwnerUserId(),d=this.auth.currentUser()?.id;return!!r&&!!d&&r===`${d}`}canToggleMaintenance(){return this.isOwnedByCurrentUser()||this.isModerator()}canTogglePause(){return this.viewMode()==="admin"&&this.isUserModerator}canDelete(){return this.isOwnedByCurrentUser()||this.isModerator()}getOwnerDisplayName(){return this.worker().owner??"Unknown"}isHighSpeed(){return this.worker().type==="image"?parseFloat(this.worker().performance)>3:!1}isLowSpeed(){return this.worker().type==="image"?parseFloat(this.worker().performance)<.4:!1}hasIssue(){let r=this.worker();return!r.online||r.paused||r.maintenance_mode||r.flagged}hasImageCapabilities(){let r=this.worker();return!!(r.img2img||r.painting||r["post-processing"]||r.lora||r.controlnet||r.sdxl_controlnet)}getCardBackground(){let r=this.worker();return r.maintenance_mode||r.paused||r.flagged?"worker-card-issue":"worker-card-normal"}formatUptime(r){let d=Math.floor(r/86400),c=Math.floor(r%86400/3600),S=Math.floor(r%3600/60);return d>0?`${d}d ${c}h`:c>0?`${c}h ${S}m`:`${S}m`}truncateName(r,d=30){return r.length>d?r.substring(0,d)+"...":r}getParsedBridgeAgent(){let r=this.worker().bridge_agent;if(!r)return null;let d=r.indexOf(":");if(d===-1)return null;let c=r.indexOf(":",d+1);if(c===-1)return null;let S=r.substring(0,d),W=r.substring(d+1,c),B=r.substring(c+1);return!S||!W||!B?null:{name:S,version:W,contact:B}}getSortedModels(){return[...this.worker().models??[]].sort((r,d)=>r.toLowerCase().localeCompare(d.toLowerCase()))}getFilteredModels(){let r=this.modelSearch().toLowerCase().trim();return r?this.getSortedModels().filter(d=>d.toLowerCase().includes(r)):this.getSortedModels()}onModelSearchChange(r){let d=r.target;this.modelSearch.set(d.value)}openModelsDialog(){this.dialogType.set("models"),this.modelSearch.set(""),this.dialogOpen.set(!0)}openMaintenanceDialog(){this.dialogType.set("maintenance"),this.maintenanceReason.set(""),this.dialogOpen.set(!0)}openPauseDialog(){this.dialogType.set("pause"),this.dialogOpen.set(!0)}closeDialog(){this.dialogOpen.set(!1)}onMaintenanceReasonChange(r){let d=r.target;this.maintenanceReason.set(d.value)}confirmMaintenance(){this.isUpdating.set(!0);let r=!this.worker().maintenance_mode;this.workerService.setMaintenance(this.worker().id,r,this.maintenanceReason()).pipe(U(this.destroyRef)).subscribe(d=>{this.isUpdating.set(!1),d&&(this.showSuccess.set(!0),setTimeout(()=>this.showSuccess.set(!1),3e3),this.workerUpdated.emit()),this.closeDialog()})}confirmPause(){this.isUpdating.set(!0);let r=!this.worker().paused;this.workerService.setPaused(this.worker().id,r).pipe(U(this.destroyRef)).subscribe(d=>{this.isUpdating.set(!1),d&&(this.showSuccess.set(!0),setTimeout(()=>this.showSuccess.set(!1),3e3),this.workerUpdated.emit()),this.closeDialog()})}openDeleteDialog(){this.dialogType.set("delete"),this.deleteError.set(null),this.dialogOpen.set(!0)}confirmDelete(){this.isUpdating.set(!0),this.deleteError.set(null),this.workerService.deleteWorker(this.worker().id).pipe(U(this.destroyRef)).subscribe(r=>{this.isUpdating.set(!1),r?(this.workerDeleted.emit(this.worker().id),this.closeDialog()):this.deleteError.set("delete_failed")})}getPerformanceUnit(){let r=this.worker(),d=parseFloat(r.performance);return isNaN(d)||d===0?null:r.type==="image"?this.unitConversion.formatWorkerPerformanceImage(d):r.type==="text"?this.unitConversion.formatWorkerPerformanceText(d):null}getMpsGeneratedUnit(){let r=this.worker();return r.type!=="image"||r.megapixelsteps_generated===void 0?null:this.unitConversion.formatWorkerMegapixelstepsGenerated(r.megapixelsteps_generated)}getTokensGeneratedUnit(){let r=this.worker();return r.type!=="text"||r.tokens_generated===void 0?null:this.unitConversion.formatWorkerTokensGenerated(r.tokens_generated)}};l.\u0275fac=function(d){return new(d||l)},l.\u0275cmp=$({type:l,selectors:[["app-worker-card"]],inputs:{worker:[1,"worker"],isModerator:[1,"isModerator"],viewMode:[1,"viewMode"]},outputs:{workerUpdated:"workerUpdated",workerDeleted:"workerDeleted"},decls:91,vars:68,consts:[[1,"toast","toast-success"],[1,"worker-modal-overlay"],[1,"p-4"],[1,"flex","items-start","justify-between"],[1,"flex","items-center","gap-3"],[1,"worker-status-icon","worker-status-icon-success",3,"title"],[1,"worker-status-icon","worker-status-icon-error",3,"title"],[1,"min-w-0"],[1,"flex","items-center","gap-2","mb-1"],[1,"heading-item","truncate",3,"title"],[1,"badge-base","badge-info"],[1,"badge-base","badge-success"],[1,"badge-base","badge-purple"],[1,"text-xs","text-secondary","truncate"],[1,"flex","items-center","gap-1","shrink-0"],[1,"p-1",3,"title"],[1,"p-4","text-sm","worker-card-section"],[1,"space-y-1","mb-3"],[1,"worker-card-row"],[1,"worker-card-label"],[1,"worker-link","truncate",3,"routerLink","title"],[1,"worker-card-value",3,"title"],[1,"flex","flex-col"],[1,"space-y-1","mb-3","pt-3","border-t","border-gray-200","dark:border-gray-700"],[1,"worker-card-value"],[1,"space-y-1","pt-3","border-t","border-gray-200","dark:border-gray-700"],[1,"mt-3","pt-3","worker-card-section"],[1,"px-4","py-3","worker-card-section","flex","gap-2"],[1,"worker-btn-models","text-sm",3,"click","title"],[1,"worker-btn-maintenance","text-sm",3,"title"],[1,"worker-btn-pause","text-sm",3,"title"],[1,"btn-danger","text-sm",3,"title"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-5","h-5"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M5 13l4 4L19 7"],[1,"modal-backdrop",3,"click"],[1,"worker-modal-panel","worker-modal-panel-large"],[1,"heading-card","mb-4"],[1,"text-secondary","text-sm","font-normal","ml-2"],[1,"text-secondary","text-sm"],[1,"flex","justify-end","mt-6"],[1,"worker-btn-models",3,"click"],[1,"mb-4"],["type","text",1,"form-input",3,"input","value","placeholder"],[1,"worker-modal-scroll"],[1,"worker-models-list"],[1,"worker-models-list-item"],[1,"flex","justify-end","gap-3"],[1,"worker-btn",3,"click"],[1,"worker-btn-maintenance",3,"click","disabled"],[1,"text-sm","text-secondary","mb-2","block"],["rows","3",1,"form-input",3,"input","value"],[1,"worker-btn-pause",3,"click","disabled"],[1,"mb-4","space-y-3"],[1,"p-3","rounded-lg","bg-red-100","dark:bg-red-900/30","border","border-red-300","dark:border-red-700"],[1,"text-sm","text-red-800","dark:text-red-200","font-medium"],[1,"p-3","rounded-lg","bg-amber-100","dark:bg-amber-900/30","border","border-amber-300","dark:border-amber-700"],[1,"text-sm","text-amber-800","dark:text-amber-200"],[1,"btn-danger",3,"click","disabled"],[1,"text-sm","text-red-800","dark:text-red-200"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-5","h-5","worker-indicator-yellow",2,"transform","scaleX(-1)"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M13 10V3L4 14h7v7l9-11h-7z"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-5","h-5","worker-indicator-yellow"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-5","h-5","worker-indicator-red"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M18.364 18.364A9 9 0 005.636 5.636m12.728 12.728A9 9 0 015.636 5.636m12.728 12.728L5.636 5.636"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M10 9v6m4-6v6m7-3a9 9 0 11-18 0 9 9 0 0118 0z"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M3 21v-4m0 0V5a2 2 0 012-2h6.5l1 1H21l-3 6 3 6h-8.5l-1-1H5a2 2 0 00-2 2zm9-13.5V9"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-5","h-5","worker-indicator-green"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M9 12l2 2 4-4m5.618-4.016A11.955 11.955 0 0112 2.944a11.955 11.955 0 01-8.618 3.04A12.02 12.02 0 003 9c0 5.591 3.824 10.29 9 11.622 5.176-1.332 9-6.03 9-11.622 0-1.042-.133-2.052-.382-3.016z"],[1,"worker-card-value","truncate",3,"title"],[1,"worker-card-value","break-all"],[1,"worker-card-value","font-mono","text-xs"],[3,"unit","primaryOverride"],[1,"worker-card-value","break-words"],[1,"worker-card-label","text-xs","block","mb-2"],[1,"flex","flex-wrap","gap-1"],[1,"worker-badge"],[1,"space-y-2","max-h-24","overflow-y-auto"],[1,"worker-message"],[1,"worker-card-label","ml-1"],[1,"worker-btn-maintenance","text-sm",3,"click","title"],[1,"worker-btn-pause","text-sm",3,"click","title"],[1,"btn-danger","text-sm",3,"click","title"]],template:function(d,c){if(d&1&&(C(0,oe,6,3,"div",0),C(1,ve,7,1,"div",1),n(2,"div")(3,"div",2)(4,"div",3)(5,"div",4),C(6,ge,4,3,"div",5)(7,he,4,3,"div",6),n(8,"div",7)(9,"div",8)(10,"h3",9),a(11),o(),C(12,Se,3,3,"span",10)(13,be,3,3,"span",11)(14,Ee,3,3,"span",12),o(),n(15,"p",13),a(16),o()()(),n(17,"div",14),C(18,Te,4,3,"div",15),C(19,ye,4,3,"div",15),C(20,Ie,4,3,"div",15),C(21,We,4,3,"div",15),C(22,Be,4,3,"div",15),C(23,Me,4,3,"div",15),o()()(),n(24,"div",16)(25,"div",17)(26,"div",18)(27,"span",19),a(28),s(29,"transloco"),o(),C(30,Ve,2,5,"a",20)(31,Ue,2,2,"span",21),o(),C(32,De,6,5,"div",18),n(33,"div",22)(34,"span",19),a(35),s(36,"transloco"),o(),C(37,Oe,2,3,"span",21)(38,Fe,2,2,"span",21),o(),C(39,Le,6,4,"div",22),C(40,Pe,6,4,"div",22),C(41,Ge,6,4,"div",18),o(),n(42,"div",23)(43,"div",18)(44,"span",19),a(45),s(46,"transloco"),o(),n(47,"span",24),a(48),o()(),n(49,"div",18)(50,"span",19),a(51),s(52,"transloco"),o(),C(53,Re,3,3,"span",24)(54,Ne,2,1,"span",24),o(),n(55,"div",18)(56,"span",19),a(57),s(58,"transloco"),o(),n(59,"span",24),a(60),o()(),n(61,"div",18)(62,"span",19),a(63),s(64,"transloco"),o(),n(65,"span",24),a(66),s(67,"formatNumber"),o()(),C(68,Ae,6,4,"div",18),C(69,qe,6,4,"div",18),o(),n(70,"div",25),C(71,Ke,2,1),C(72,Qe,6,4,"div",18),n(73,"div",18)(74,"span",19),a(75),s(76,"transloco"),o(),n(77,"span",24),a(78),s(79,"transloco"),s(80,"transloco"),o()()(),C(81,ot,11,9,"div",26),C(82,lt,7,5,"div",26),o(),n(83,"div",27)(84,"button",28),s(85,"transloco"),w("click",function(){return c.openModelsDialog()}),a(86),s(87,"transloco"),o(),C(88,pt,4,4,"button",29),C(89,_t,5,6,"button",30),C(90,Ct,4,6,"button",31),o()()),d&2){let S,W,B,P,G,R;u(c.showSuccess()?0:-1),i(),u(c.dialogOpen()?1:-1),i(),z(c.getCardBackground()),i(4),u(c.hasIssue()?7:6),i(4),k("title",c.worker().name),i(),m(" ",c.truncateName(c.worker().name)," "),i(),u((S=c.worker().type)==="image"?12:S==="text"?13:S==="interrogation"?14:-1),i(4),x(c.worker().id),i(2),u(c.isLowSpeed()?18:-1),i(),u(c.isHighSpeed()?19:-1),i(),u(c.worker().paused?20:-1),i(),u(c.worker().maintenance_mode?21:-1),i(),u(c.worker().flagged?22:-1),i(),u(c.worker().trusted?23:-1),i(5),m("",p(29,44,"admin.workers.card.owner"),":"),i(2),u(c.getOwnerUserId()&&c.isModerator()?30:31),i(2),u(c.worker().team?32:-1),i(3),m("",p(36,46,"admin.workers.card.bridge_agent"),":"),i(2),u((W=c.getParsedBridgeAgent())?37:38,W),i(2),u((B=c.getParsedBridgeAgent())?39:-1,B),i(),u(c.worker().contact&&c.isModerator()?40:-1),i(),u(c.worker().ipaddr&&c.isModerator()?41:-1),i(4),m("",p(46,48,"admin.workers.card.uptime"),":"),i(3),x(c.formatUptime(c.worker().uptime)),i(3),m("",p(52,50,"admin.workers.card.speed"),":"),i(2),u((P=c.getPerformanceUnit())?53:54,P),i(4),m("",p(58,52,"admin.workers.card.threads"),":"),i(3),x(c.worker().threads),i(3),m("",p(64,54,"admin.workers.card.requests_fulfilled"),":"),i(3),x(p(67,56,c.worker().requests_fulfilled)),i(2),u(c.worker().type==="image"&&c.worker().megapixelsteps_generated!==void 0?68:-1),i(),u(c.worker().type==="text"&&c.worker().tokens_generated!==void 0?69:-1),i(2),u(c.worker().type!=="interrogation"?71:-1),i(),u(c.worker().type==="interrogation"&&(((G=c.worker().forms)==null?null:G.length)??0)>0?72:-1),i(3),m("",p(76,58,"admin.workers.card.nsfw"),":"),i(3),x(c.worker().nsfw?p(79,60,"admin.common.yes"):p(80,62,"admin.common.no")),i(3),u(c.worker().type==="image"&&c.hasImageCapabilities()?81:-1),i(),u((((R=c.worker().messages)==null?null:R.length)??0)>0&&c.isModerator()?82:-1),i(2),k("title",p(85,64,"admin.workers.action.show_models")),i(2),m(" ",p(87,66,"admin.workers.button.models")," "),i(2),u(c.canToggleMaintenance()?88:-1),i(),u(c.canTogglePause()?89:-1),i(),u(c.canDelete()?90:-1)}},dependencies:[J,K,ee,q,Q],encapsulation:2,changeDetection:0});let e=l;return e})();export{yt as a};
