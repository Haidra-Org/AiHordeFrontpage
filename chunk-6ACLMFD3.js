import{a as ie}from"./chunk-HM33CXRW.js";import{c as ee,d as te}from"./chunk-65WGSKXW.js";import{a as O}from"./chunk-HAOFLEYL.js";import{e as Z}from"./chunk-PSNERGXC.js";import{g as Y,k as F}from"./chunk-JIQRQOFL.js";import{$b as Q,A as B,Cb as w,Db as _,Oa as i,Qb as J,Rb as d,S as K,Sb as k,Tb as m,Ub as j,X as I,Za as z,aa as g,ac as T,ba as v,ca as S,da as H,dc as p,ec as c,fc as W,ga as q,ja as y,k as E,nc as R,ob as u,oc as U,pb as C,q as N,qb as X,rb as $,sb as L,tb as x,ub as n,vb as r,w as G,wb as b,zb as h}from"./chunk-7X6QMTFM.js";var ne=(()=>{let l=class l{constructor(){this.httpClient=I(Y),this.auth=I(O),this.baseUrl="https://aihorde.net/api/v2"}getWorkers(){let o=this.auth.getStoredApiKey(),a=o?{headers:{apikey:o}}:{};return this.httpClient.get(`${this.baseUrl}/workers`,a).pipe(B(()=>E([])))}getWorker(o){let a=this.auth.getStoredApiKey(),s=a?{headers:{apikey:a}}:{};return this.httpClient.get(`${this.baseUrl}/workers/${o}`,s).pipe(B(()=>E(null)))}getWorkersByIds(o){if(!o||o.length===0)return E([]);let a=o.map(s=>this.getWorker(s));return G(a).pipe(N(s=>s.filter(f=>f!==null)),B(()=>E([])))}updateWorker(o,a){let s=this.auth.getStoredApiKey();return s?this.httpClient.put(`${this.baseUrl}/workers/${o}`,a,{headers:{apikey:s}}).pipe(B(()=>E(null))):E(null)}setMaintenance(o,a,s){let f={maintenance:a,maintenance_msg:a?s:""};return this.updateWorker(o,f)}setPaused(o,a){return this.updateWorker(o,{paused:a})}deleteWorker(o){let a=this.auth.getStoredApiKey();return a?this.httpClient.delete(`${this.baseUrl}/workers/${o}`,{headers:{apikey:a}}).pipe(B(()=>E(null))):E(null)}};l.\u0275fac=function(a){return new(a||l)},l.\u0275prov=K({token:l,factory:l.\u0275fac,providedIn:"root"});let e=l;return e})();var M=e=>({name:e}),re=e=>["/admin/users",e],ae=()=>[],le=(e,l)=>l.message;function de(e,l){e&1&&(n(0,"div",0),S(),n(1,"svg",32),b(2,"path",33),r(),H(),n(3,"span"),d(4),p(5,"transloco"),r()()),e&2&&(i(4),k(c(5,1,"admin.workers.success")))}function se(e,l){if(e&1&&(n(0,"li",45),d(1),r()),e&2){let t=l.$implicit;i(),k(t)}}function pe(e,l){if(e&1&&(n(0,"ul",44),$(1,se,2,1,"li",45,X),r()),e&2){let t=_(4);i(),L(t.getFilteredModels())}}function ce(e,l){e&1&&(n(0,"p",38),d(1),p(2,"transloco"),r()),e&2&&(i(),m(" ",c(2,1,"admin.workers.dialog.no_models_match")," "))}function me(e,l){if(e&1){let t=h();n(0,"div",41)(1,"input",42),p(2,"transloco"),w("input",function(a){g(t);let s=_(3);return v(s.onModelSearchChange(a))}),r()(),n(3,"div",43),u(4,pe,3,0,"ul",44)(5,ce,3,3,"p",38),r()}if(e&2){let t=_(3);i(),x("value",t.modelSearch())("placeholder",c(2,3,"admin.workers.dialog.search_models")),i(3),C(t.getFilteredModels().length>0?4:5)}}function _e(e,l){e&1&&(n(0,"p",38),d(1),p(2,"transloco"),r()),e&2&&(i(),m(" ",c(2,1,"admin.common.none")," "))}function ue(e,l){if(e&1){let t=h();n(0,"h3",36),d(1),p(2,"transloco"),n(3,"span",37),d(4),r()(),u(5,me,6,5)(6,_e,3,3,"p",38),n(7,"div",39)(8,"button",40),w("click",function(){g(t);let a=_(2);return v(a.closeDialog())}),d(9),p(10,"transloco"),r()()}if(e&2){let t=_(2);i(),m(" ",W(2,4,"admin.workers.dialog.models_title",T(9,M,t.worker().name))," "),i(3),m("(",t.getSortedModels().length,")"),i(),C(t.getSortedModels().length>0?5:6),i(4),m(" ",c(10,7,"admin.workers.dialog.close")," ")}}function Ce(e,l){if(e&1&&(d(0),p(1,"transloco")),e&2){let t=_(3);m(" ",W(1,1,"admin.workers.dialog.unset_maintenance_title",T(4,M,t.worker().name))," ")}}function ke(e,l){if(e&1&&(d(0),p(1,"transloco")),e&2){let t=_(3);m(" ",W(1,1,"admin.workers.dialog.set_maintenance_title",T(4,M,t.worker().name))," ")}}function xe(e,l){if(e&1){let t=h();n(0,"div",41)(1,"label",49),d(2),p(3,"transloco"),r(),n(4,"textarea",50),w("input",function(a){g(t);let s=_(3);return v(s.onMaintenanceReasonChange(a))}),r()()}if(e&2){let t=_(3);i(2),m(" ",c(3,2,"admin.workers.dialog.maintenance_reason")," "),i(2),x("value",t.maintenanceReason())}}function we(e,l){if(e&1){let t=h();n(0,"h3",36),u(1,Ce,2,6)(2,ke,2,6),r(),u(3,xe,5,4,"div",41),n(4,"div",46)(5,"button",47),w("click",function(){g(t);let a=_(2);return v(a.closeDialog())}),d(6),p(7,"transloco"),r(),n(8,"button",48),w("click",function(){g(t);let a=_(2);return v(a.confirmMaintenance())}),d(9),p(10,"transloco"),r()()}if(e&2){let t=_(2);i(),C(t.worker().maintenance_mode?1:2),i(2),C(t.worker().maintenance_mode?-1:3),i(3),m(" ",c(7,5,"admin.workers.dialog.cancel")," "),i(2),x("disabled",t.isUpdating()),i(),m(" ",c(10,7,"admin.workers.dialog.confirm")," ")}}function fe(e,l){if(e&1&&(d(0),p(1,"transloco")),e&2){let t=_(3);m(" ",W(1,1,"admin.workers.dialog.unset_paused_title",T(4,M,t.worker().name))," ")}}function ge(e,l){if(e&1&&(d(0),p(1,"transloco")),e&2){let t=_(3);m(" ",W(1,1,"admin.workers.dialog.set_paused_title",T(4,M,t.worker().name))," ")}}function ve(e,l){if(e&1){let t=h();n(0,"h3",36),u(1,fe,2,6)(2,ge,2,6),r(),n(3,"div",46)(4,"button",47),w("click",function(){g(t);let a=_(2);return v(a.closeDialog())}),d(5),p(6,"transloco"),r(),n(7,"button",51),w("click",function(){g(t);let a=_(2);return v(a.confirmPause())}),d(8),p(9,"transloco"),r()()}if(e&2){let t=_(2);i(),C(t.worker().paused?1:2),i(4),m(" ",c(6,4,"admin.workers.dialog.cancel")," "),i(2),x("disabled",t.isUpdating()),i(),m(" ",c(9,6,"admin.workers.dialog.confirm")," ")}}function he(e,l){e&1&&(n(0,"div",53)(1,"p",58),d(2),p(3,"transloco"),r()()),e&2&&(i(2),m(" ",c(3,1,"admin.workers.dialog.delete_error")," "))}function Se(e,l){if(e&1){let t=h();n(0,"h3",36),d(1),p(2,"transloco"),r(),n(3,"div",52)(4,"div",53)(5,"p",54),d(6),p(7,"transloco"),r()(),n(8,"div",55)(9,"p",56),d(10),p(11,"transloco"),r()(),u(12,he,4,3,"div",53),r(),n(13,"div",46)(14,"button",47),w("click",function(){g(t);let a=_(2);return v(a.closeDialog())}),d(15),p(16,"transloco"),r(),n(17,"button",57),w("click",function(){g(t);let a=_(2);return v(a.confirmDelete())}),d(18),p(19,"transloco"),r()()}if(e&2){let t=_(2);i(),m(" ",W(2,7,"admin.workers.dialog.delete_title",T(18,M,t.worker().name))," "),i(5),m(" ",c(7,10,"admin.workers.dialog.delete_warning_permanent")," "),i(4),m(" ",c(11,12,"admin.workers.dialog.delete_warning_offline_requirement")," "),i(2),C(t.deleteError()?12:-1),i(3),m(" ",c(16,14,"admin.workers.dialog.cancel")," "),i(2),x("disabled",t.isUpdating()),i(),m(" ",c(19,16,"admin.workers.dialog.delete_confirm")," ")}}function be(e,l){if(e&1){let t=h();n(0,"div",1)(1,"div",34),w("click",function(){g(t);let a=_();return v(a.closeDialog())}),r(),n(2,"div",35),u(3,ue,11,11)(4,we,11,9)(5,ve,10,8)(6,Se,20,20),r()()}if(e&2){let t,o=_();i(3),C((t=o.dialogType())==="models"?3:t==="maintenance"?4:t==="pause"?5:t==="delete"?6:-1)}}function Ee(e,l){e&1&&(n(0,"div",5),p(1,"transloco"),S(),n(2,"svg",32),b(3,"path",33),r()()),e&2&&x("title",c(1,1,"admin.workers.card.online"))}function ye(e,l){e&1&&(n(0,"div",6),p(1,"transloco"),S(),n(2,"svg",32),b(3,"path",59),r()()),e&2&&x("title",c(1,1,"admin.workers.card.issue"))}function Te(e,l){e&1&&(n(0,"span",10),d(1),p(2,"transloco"),r()),e&2&&(i(),k(c(2,1,"admin.workers.type.image")))}function Ie(e,l){e&1&&(n(0,"span",11),d(1),p(2,"transloco"),r()),e&2&&(i(),k(c(2,1,"admin.workers.type.text")))}function We(e,l){e&1&&(n(0,"span",12),d(1),p(2,"transloco"),r()),e&2&&(i(),k(c(2,1,"admin.workers.type.interrogation")))}function Be(e,l){e&1&&(n(0,"div",15),p(1,"transloco"),S(),n(2,"svg",60),b(3,"path",61),r()()),e&2&&x("title",c(1,1,"admin.workers.card.low_speed_warning"))}function Me(e,l){e&1&&(n(0,"div",15),p(1,"transloco"),S(),n(2,"svg",62),b(3,"path",61),r()()),e&2&&x("title",c(1,1,"admin.workers.card.high_speed_warning"))}function Ve(e,l){e&1&&(n(0,"div",15),p(1,"transloco"),S(),n(2,"svg",63),b(3,"path",64),r()()),e&2&&x("title",c(1,1,"admin.workers.card.paused"))}function De(e,l){e&1&&(n(0,"div",15),p(1,"transloco"),S(),n(2,"svg",63),b(3,"path",65),r()()),e&2&&x("title",c(1,1,"admin.workers.card.maintenance"))}function Ue(e,l){e&1&&(n(0,"div",15),p(1,"transloco"),S(),n(2,"svg",63),b(3,"path",66),r()()),e&2&&x("title",c(1,1,"admin.workers.card.flagged"))}function Fe(e,l){e&1&&(n(0,"div",15),p(1,"transloco"),S(),n(2,"svg",67),b(3,"path",68),r()()),e&2&&x("title",c(1,1,"admin.workers.card.trusted"))}function Oe(e,l){if(e&1&&(n(0,"a",20),d(1),r()),e&2){let t=_();x("routerLink",T(3,re,t.getOwnerUserId()))("title",t.worker().owner),i(),k(t.getOwnerDisplayName())}}function $e(e,l){if(e&1&&(n(0,"span",21),d(1),r()),e&2){let t=_();x("title",t.worker().owner??""),i(),k(t.getOwnerDisplayName())}}function Le(e,l){if(e&1&&(n(0,"div",18)(1,"span",19),d(2),p(3,"transloco"),r(),n(4,"span",69),d(5),r()()),e&2){let t,o,a=_();i(2),m("",c(3,3,"admin.workers.card.team"),":"),i(2),x("title",((t=a.worker().team)==null?null:t.name)??((t=a.worker().team)==null?null:t.id)??""),i(),k(((o=a.worker().team)==null?null:o.name)??((o=a.worker().team)==null?null:o.id)??"")}}function je(e,l){if(e&1&&(n(0,"span",21),d(1),r()),e&2){let t=l,o=_();x("title",o.worker().bridge_agent),i(),j("",t.name," v",t.version)}}function Re(e,l){if(e&1&&(n(0,"span",21),d(1),r()),e&2){let t=_();x("title",t.worker().bridge_agent),i(),k(t.worker().bridge_agent)}}function Ae(e,l){e&1&&(n(0,"div",22)(1,"span",19),d(2),p(3,"transloco"),r(),n(4,"span",70),d(5),r()()),e&2&&(i(2),m("",c(3,2,"admin.workers.card.software_contact"),":"),i(3),k(l.contact))}function Pe(e,l){if(e&1&&(n(0,"div",22)(1,"span",19),d(2),p(3,"transloco"),r(),n(4,"span",70),d(5),r()()),e&2){let t=_();i(2),m("",c(3,2,"admin.workers.card.contact"),":"),i(3),k(t.worker().contact)}}function Ne(e,l){if(e&1&&(n(0,"div",18)(1,"span",19),d(2),p(3,"transloco"),r(),n(4,"span",71),d(5),r()()),e&2){let t=_();i(2),m("",c(3,2,"admin.workers.card.ipaddr"),":"),i(3),k(t.worker().ipaddr)}}function Ge(e,l){if(e&1&&(n(0,"div",18)(1,"span",19),d(2),p(3,"transloco"),r(),n(4,"span",24),d(5),p(6,"formatNumber"),r()()),e&2){let t=_();i(2),m("",c(3,2,"admin.workers.card.mps_generated"),":"),i(3),k(c(6,4,t.worker().megapixelsteps_generated??0))}}function Ke(e,l){if(e&1&&(n(0,"div",18)(1,"span",19),d(2),p(3,"transloco"),r(),n(4,"span",24),d(5),p(6,"formatNumber"),r()()),e&2){let t=_();i(2),m("",c(3,2,"admin.workers.card.tokens_generated"),":"),i(3),k(c(6,4,t.worker().tokens_generated??0))}}function He(e,l){if(e&1&&(n(0,"div",22)(1,"span",19),d(2),p(3,"transloco"),r(),n(4,"span",72),d(5),r()()),e&2){let t=_(2);i(2),m("",c(3,2,"admin.workers.card.model_loaded"),":"),i(3),k(t.worker().models[0])}}function qe(e,l){if(e&1&&(n(0,"div",18)(1,"span",19),d(2),p(3,"transloco"),r(),n(4,"span",24),d(5),r()()),e&2){let t,o=_(2);i(2),m("",c(3,2,"admin.workers.card.models_loaded"),":"),i(3),k(((t=o.worker().models)==null?null:t.length)??0)}}function ze(e,l){if(e&1&&u(0,He,6,4,"div",22)(1,qe,6,4,"div",18),e&2){let t,o=_();C((((t=o.worker().models)==null?null:t.length)??0)===1?0:1)}}function Xe(e,l){if(e&1&&(n(0,"div",18)(1,"span",19),d(2),p(3,"transloco"),r(),n(4,"span",24),d(5),r()()),e&2){let t,o=_();i(2),m("",c(3,2,"admin.workers.card.forms"),":"),i(3),k(((t=o.worker().forms)==null?null:t.join(", "))??"")}}function Je(e,l){e&1&&(n(0,"span",75),d(1,"img2img"),r())}function Qe(e,l){e&1&&(n(0,"span",75),d(1,"inpainting"),r())}function Ye(e,l){e&1&&(n(0,"span",75),d(1,"post-processing"),r())}function Ze(e,l){e&1&&(n(0,"span",75),d(1,"LoRA"),r())}function et(e,l){e&1&&(n(0,"span",75),d(1,"ControlNet"),r())}function tt(e,l){e&1&&(n(0,"span",75),d(1,"SDXL ControlNet"),r())}function it(e,l){if(e&1&&(n(0,"div",26)(1,"span",73),d(2),p(3,"transloco"),r(),n(4,"div",74),u(5,Je,2,0,"span",75),u(6,Qe,2,0,"span",75),u(7,Ye,2,0,"span",75),u(8,Ze,2,0,"span",75),u(9,et,2,0,"span",75),u(10,tt,2,0,"span",75),r()()),e&2){let t=_();i(2),m("",c(3,7,"admin.workers.card.capabilities"),":"),i(3),C(t.worker().img2img?5:-1),i(),C(t.worker().painting?6:-1),i(),C(t.worker()["post-processing"]?7:-1),i(),C(t.worker().lora?8:-1),i(),C(t.worker().controlnet?9:-1),i(),C(t.worker().sdxl_controlnet?10:-1)}}function nt(e,l){if(e&1&&(n(0,"span",78),d(1),r()),e&2){let t=_().$implicit;i(),m("(",t.origin,")")}}function ot(e,l){if(e&1&&(n(0,"div",77)(1,"span",24),d(2),r(),u(3,nt,2,1,"span",78),r()),e&2){let t=l.$implicit;i(2),k(t.message),i(),C(t.origin?3:-1)}}function rt(e,l){if(e&1&&(n(0,"div",26)(1,"span",73),d(2),p(3,"transloco"),r(),n(4,"div",76),$(5,ot,4,2,"div",77,le),r()()),e&2){let t,o=_();i(2),j("",c(3,2,"admin.workers.card.messages")," (",((t=o.worker().messages)==null?null:t.length)??0,"):"),i(3),L(o.worker().messages??Q(4,ae))}}function at(e,l){e&1&&(d(0),p(1,"transloco")),e&2&&m(" ",c(1,1,"admin.workers.button.disable_maintenance")," ")}function lt(e,l){e&1&&(d(0),p(1,"transloco")),e&2&&m(" ",c(1,1,"admin.workers.button.maintenance")," ")}function dt(e,l){if(e&1){let t=h();n(0,"button",79),p(1,"transloco"),w("click",function(){g(t);let a=_();return v(a.openMaintenanceDialog())}),u(2,at,2,3)(3,lt,2,3),r()}if(e&2){let t=_();x("title",c(1,2,"admin.workers.button.maintenance_tooltip")),i(2),C(t.worker().maintenance_mode?2:3)}}function st(e,l){e&1&&(d(0),p(1,"transloco")),e&2&&m(" ",c(1,1,"admin.workers.button.unpause")," ")}function pt(e,l){e&1&&(d(0),p(1,"transloco")),e&2&&m(" ",c(1,1,"admin.workers.button.pause")," ")}function ct(e,l){if(e&1){let t=h();n(0,"button",80),p(1,"transloco"),p(2,"transloco"),w("click",function(){g(t);let a=_();return v(a.openPauseDialog())}),u(3,st,2,3)(4,pt,2,3),r()}if(e&2){let t=_();x("title",t.worker().paused?c(1,2,"admin.workers.action.unset_paused"):c(2,4,"admin.workers.action.set_paused")),i(3),C(t.worker().paused?3:4)}}function mt(e,l){if(e&1){let t=h();n(0,"button",81),p(1,"transloco"),w("click",function(){g(t);let a=_();return v(a.openDeleteDialog())}),d(2),p(3,"transloco"),r()}e&2&&(x("title",c(1,2,"admin.workers.action.delete")),i(2),m(" ",c(3,4,"admin.workers.button.delete")," "))}var Wt=(()=>{let l=class l{constructor(){this.workerService=I(ne),this.destroyRef=I(q),this.auth=I(O),this.worker=U.required(),this.isModerator=U(!1),this.viewMode=U("admin"),this.workerUpdated=R(),this.workerDeleted=R(),this.dialogOpen=y(!1),this.dialogType=y("models"),this.maintenanceReason=y(""),this.modelSearch=y(""),this.isUpdating=y(!1),this.showSuccess=y(!1),this.deleteError=y(null)}get isUserModerator(){return this.auth.currentUser()?.moderator??!1}getOwnerUserId(){let o=this.worker().owner;if(!o)return null;let a=o.match(/#(\d+)$/);return a?a[1]:null}isOwnedByCurrentUser(){let o=this.getOwnerUserId(),a=this.auth.currentUser()?.id;return!!o&&!!a&&o===`${a}`}canToggleMaintenance(){return this.isOwnedByCurrentUser()||this.isModerator()}canTogglePause(){return this.viewMode()==="admin"&&this.isUserModerator}canDelete(){return this.isOwnedByCurrentUser()||this.isModerator()}getOwnerDisplayName(){return this.worker().owner??"Unknown"}isHighSpeed(){return this.worker().type==="image"?parseFloat(this.worker().performance)>3:!1}isLowSpeed(){return this.worker().type==="image"?parseFloat(this.worker().performance)<.4:!1}hasIssue(){let o=this.worker();return!o.online||o.paused||o.maintenance_mode||o.flagged}hasImageCapabilities(){let o=this.worker();return!!(o.img2img||o.painting||o["post-processing"]||o.lora||o.controlnet||o.sdxl_controlnet)}getCardBackground(){let o=this.worker();return o.maintenance_mode||o.paused||o.flagged?"worker-card-issue":"worker-card-normal"}formatUptime(o){let a=Math.floor(o/86400),s=Math.floor(o%86400/3600),f=Math.floor(o%3600/60);return a>0?`${a}d ${s}h`:s>0?`${s}h ${f}m`:`${f}m`}truncateName(o,a=30){return o.length>a?o.substring(0,a)+"...":o}getParsedBridgeAgent(){let o=this.worker().bridge_agent;if(!o)return null;let a=o.indexOf(":");if(a===-1)return null;let s=o.indexOf(":",a+1);if(s===-1)return null;let f=o.substring(0,a),V=o.substring(a+1,s),D=o.substring(s+1);return!f||!V||!D?null:{name:f,version:V,contact:D}}getSortedModels(){return[...this.worker().models??[]].sort((o,a)=>o.toLowerCase().localeCompare(a.toLowerCase()))}getFilteredModels(){let o=this.modelSearch().toLowerCase().trim();return o?this.getSortedModels().filter(a=>a.toLowerCase().includes(o)):this.getSortedModels()}onModelSearchChange(o){let a=o.target;this.modelSearch.set(a.value)}openModelsDialog(){this.dialogType.set("models"),this.modelSearch.set(""),this.dialogOpen.set(!0)}openMaintenanceDialog(){this.dialogType.set("maintenance"),this.maintenanceReason.set(""),this.dialogOpen.set(!0)}openPauseDialog(){this.dialogType.set("pause"),this.dialogOpen.set(!0)}closeDialog(){this.dialogOpen.set(!1)}onMaintenanceReasonChange(o){let a=o.target;this.maintenanceReason.set(a.value)}confirmMaintenance(){this.isUpdating.set(!0);let o=!this.worker().maintenance_mode;this.workerService.setMaintenance(this.worker().id,o,this.maintenanceReason()).pipe(F(this.destroyRef)).subscribe(a=>{this.isUpdating.set(!1),a&&(this.showSuccess.set(!0),setTimeout(()=>this.showSuccess.set(!1),3e3),this.workerUpdated.emit()),this.closeDialog()})}confirmPause(){this.isUpdating.set(!0);let o=!this.worker().paused;this.workerService.setPaused(this.worker().id,o).pipe(F(this.destroyRef)).subscribe(a=>{this.isUpdating.set(!1),a&&(this.showSuccess.set(!0),setTimeout(()=>this.showSuccess.set(!1),3e3),this.workerUpdated.emit()),this.closeDialog()})}openDeleteDialog(){this.dialogType.set("delete"),this.deleteError.set(null),this.dialogOpen.set(!0)}confirmDelete(){this.isUpdating.set(!0),this.deleteError.set(null),this.workerService.deleteWorker(this.worker().id).pipe(F(this.destroyRef)).subscribe(o=>{this.isUpdating.set(!1),o?(this.workerDeleted.emit(this.worker().id),this.closeDialog()):this.deleteError.set("delete_failed")})}};l.\u0275fac=function(a){return new(a||l)},l.\u0275cmp=z({type:l,selectors:[["app-worker-card"]],inputs:{worker:[1,"worker"],isModerator:[1,"isModerator"],viewMode:[1,"viewMode"]},outputs:{workerUpdated:"workerUpdated",workerDeleted:"workerDeleted"},decls:91,vars:68,consts:[[1,"toast","toast-success"],[1,"worker-modal-overlay"],[1,"p-4"],[1,"flex","items-start","justify-between"],[1,"flex","items-center","gap-3"],[1,"worker-status-icon","worker-status-icon-success",3,"title"],[1,"worker-status-icon","worker-status-icon-error",3,"title"],[1,"min-w-0"],[1,"flex","items-center","gap-2","mb-1"],[1,"heading-item","truncate",3,"title"],[1,"badge-base","badge-info"],[1,"badge-base","badge-success"],[1,"badge-base","badge-purple"],[1,"text-xs","text-secondary","truncate"],[1,"flex","items-center","gap-1","shrink-0"],[1,"p-1",3,"title"],[1,"p-4","text-sm","worker-card-section"],[1,"space-y-1","mb-3"],[1,"worker-card-row"],[1,"worker-card-label"],[1,"worker-link","truncate",3,"routerLink","title"],[1,"worker-card-value",3,"title"],[1,"flex","flex-col"],[1,"space-y-1","mb-3","pt-3","border-t","border-gray-200","dark:border-gray-700"],[1,"worker-card-value"],[1,"space-y-1","pt-3","border-t","border-gray-200","dark:border-gray-700"],[1,"mt-3","pt-3","worker-card-section"],[1,"px-4","py-3","worker-card-section","flex","gap-2"],[1,"worker-btn-models","text-sm",3,"click","title"],[1,"worker-btn-maintenance","text-sm",3,"title"],[1,"worker-btn-pause","text-sm",3,"title"],[1,"btn-danger","text-sm",3,"title"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-5","h-5"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M5 13l4 4L19 7"],[1,"modal-backdrop",3,"click"],[1,"worker-modal-panel","worker-modal-panel-large"],[1,"heading-card","mb-4"],[1,"text-secondary","text-sm","font-normal","ml-2"],[1,"text-secondary","text-sm"],[1,"flex","justify-end","mt-6"],[1,"worker-btn-models",3,"click"],[1,"mb-4"],["type","text",1,"form-input",3,"input","value","placeholder"],[1,"worker-modal-scroll"],[1,"worker-models-list"],[1,"worker-models-list-item"],[1,"flex","justify-end","gap-3"],[1,"worker-btn",3,"click"],[1,"worker-btn-maintenance",3,"click","disabled"],[1,"text-sm","text-secondary","mb-2","block"],["rows","3",1,"form-input",3,"input","value"],[1,"worker-btn-pause",3,"click","disabled"],[1,"mb-4","space-y-3"],[1,"p-3","rounded-lg","bg-red-100","dark:bg-red-900/30","border","border-red-300","dark:border-red-700"],[1,"text-sm","text-red-800","dark:text-red-200","font-medium"],[1,"p-3","rounded-lg","bg-amber-100","dark:bg-amber-900/30","border","border-amber-300","dark:border-amber-700"],[1,"text-sm","text-amber-800","dark:text-amber-200"],[1,"btn-danger",3,"click","disabled"],[1,"text-sm","text-red-800","dark:text-red-200"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-5","h-5","worker-indicator-yellow",2,"transform","scaleX(-1)"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M13 10V3L4 14h7v7l9-11h-7z"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-5","h-5","worker-indicator-yellow"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-5","h-5","worker-indicator-red"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M18.364 18.364A9 9 0 005.636 5.636m12.728 12.728A9 9 0 015.636 5.636m12.728 12.728L5.636 5.636"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M10 9v6m4-6v6m7-3a9 9 0 11-18 0 9 9 0 0118 0z"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M3 21v-4m0 0V5a2 2 0 012-2h6.5l1 1H21l-3 6 3 6h-8.5l-1-1H5a2 2 0 00-2 2zm9-13.5V9"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-5","h-5","worker-indicator-green"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M9 12l2 2 4-4m5.618-4.016A11.955 11.955 0 0112 2.944a11.955 11.955 0 01-8.618 3.04A12.02 12.02 0 003 9c0 5.591 3.824 10.29 9 11.622 5.176-1.332 9-6.03 9-11.622 0-1.042-.133-2.052-.382-3.016z"],[1,"worker-card-value","truncate",3,"title"],[1,"worker-card-value","break-all"],[1,"worker-card-value","font-mono","text-xs"],[1,"worker-card-value","break-words"],[1,"worker-card-label","text-xs","block","mb-2"],[1,"flex","flex-wrap","gap-1"],[1,"worker-badge"],[1,"space-y-2","max-h-24","overflow-y-auto"],[1,"worker-message"],[1,"worker-card-label","ml-1"],[1,"worker-btn-maintenance","text-sm",3,"click","title"],[1,"worker-btn-pause","text-sm",3,"click","title"],[1,"btn-danger","text-sm",3,"click","title"]],template:function(a,s){if(a&1&&(u(0,de,6,3,"div",0),u(1,be,7,1,"div",1),n(2,"div")(3,"div",2)(4,"div",3)(5,"div",4),u(6,Ee,4,3,"div",5)(7,ye,4,3,"div",6),n(8,"div",7)(9,"div",8)(10,"h3",9),d(11),r(),u(12,Te,3,3,"span",10)(13,Ie,3,3,"span",11)(14,We,3,3,"span",12),r(),n(15,"p",13),d(16),r()()(),n(17,"div",14),u(18,Be,4,3,"div",15),u(19,Me,4,3,"div",15),u(20,Ve,4,3,"div",15),u(21,De,4,3,"div",15),u(22,Ue,4,3,"div",15),u(23,Fe,4,3,"div",15),r()()(),n(24,"div",16)(25,"div",17)(26,"div",18)(27,"span",19),d(28),p(29,"transloco"),r(),u(30,Oe,2,5,"a",20)(31,$e,2,2,"span",21),r(),u(32,Le,6,5,"div",18),n(33,"div",22)(34,"span",19),d(35),p(36,"transloco"),r(),u(37,je,2,3,"span",21)(38,Re,2,2,"span",21),r(),u(39,Ae,6,4,"div",22),u(40,Pe,6,4,"div",22),u(41,Ne,6,4,"div",18),r(),n(42,"div",23)(43,"div",18)(44,"span",19),d(45),p(46,"transloco"),r(),n(47,"span",24),d(48),r()(),n(49,"div",18)(50,"span",19),d(51),p(52,"transloco"),r(),n(53,"span",24),d(54),r()(),n(55,"div",18)(56,"span",19),d(57),p(58,"transloco"),r(),n(59,"span",24),d(60),r()(),n(61,"div",18)(62,"span",19),d(63),p(64,"transloco"),r(),n(65,"span",24),d(66),p(67,"formatNumber"),r()(),u(68,Ge,7,6,"div",18),u(69,Ke,7,6,"div",18),r(),n(70,"div",25),u(71,ze,2,1),u(72,Xe,6,4,"div",18),n(73,"div",18)(74,"span",19),d(75),p(76,"transloco"),r(),n(77,"span",24),d(78),p(79,"transloco"),p(80,"transloco"),r()()(),u(81,it,11,9,"div",26),u(82,rt,7,5,"div",26),r(),n(83,"div",27)(84,"button",28),p(85,"transloco"),w("click",function(){return s.openModelsDialog()}),d(86),p(87,"transloco"),r(),u(88,dt,4,4,"button",29),u(89,ct,5,6,"button",30),u(90,mt,4,6,"button",31),r()()),a&2){let f,V,D,A,P;C(s.showSuccess()?0:-1),i(),C(s.dialogOpen()?1:-1),i(),J(s.getCardBackground()),i(4),C(s.hasIssue()?7:6),i(4),x("title",s.worker().name),i(),m(" ",s.truncateName(s.worker().name)," "),i(),C((f=s.worker().type)==="image"?12:f==="text"?13:f==="interrogation"?14:-1),i(4),k(s.worker().id),i(2),C(s.isLowSpeed()?18:-1),i(),C(s.isHighSpeed()?19:-1),i(),C(s.worker().paused?20:-1),i(),C(s.worker().maintenance_mode?21:-1),i(),C(s.worker().flagged?22:-1),i(),C(s.worker().trusted?23:-1),i(5),m("",c(29,44,"admin.workers.card.owner"),":"),i(2),C(s.getOwnerUserId()&&s.isModerator()?30:31),i(2),C(s.worker().team?32:-1),i(3),m("",c(36,46,"admin.workers.card.bridge_agent"),":"),i(2),C((V=s.getParsedBridgeAgent())?37:38,V),i(2),C((D=s.getParsedBridgeAgent())?39:-1,D),i(),C(s.worker().contact&&s.isModerator()?40:-1),i(),C(s.worker().ipaddr&&s.isModerator()?41:-1),i(4),m("",c(46,48,"admin.workers.card.uptime"),":"),i(3),k(s.formatUptime(s.worker().uptime)),i(3),m("",c(52,50,"admin.workers.card.speed"),":"),i(3),k(s.worker().performance),i(3),m("",c(58,52,"admin.workers.card.threads"),":"),i(3),k(s.worker().threads),i(3),m("",c(64,54,"admin.workers.card.requests_fulfilled"),":"),i(3),k(c(67,56,s.worker().requests_fulfilled)),i(2),C(s.worker().type==="image"&&s.worker().megapixelsteps_generated!==void 0?68:-1),i(),C(s.worker().type==="text"&&s.worker().tokens_generated!==void 0?69:-1),i(2),C(s.worker().type!=="interrogation"?71:-1),i(),C(s.worker().type==="interrogation"&&(((A=s.worker().forms)==null?null:A.length)??0)>0?72:-1),i(3),m("",c(76,58,"admin.workers.card.nsfw"),":"),i(3),k(s.worker().nsfw?c(79,60,"admin.common.yes"):c(80,62,"admin.common.no")),i(3),C(s.worker().type==="image"&&s.hasImageCapabilities()?81:-1),i(),C((((P=s.worker().messages)==null?null:P.length)??0)>0&&s.isModerator()?82:-1),i(2),x("title",c(85,64,"admin.workers.action.show_models")),i(2),m(" ",c(87,66,"admin.workers.button.models")," "),i(2),C(s.canToggleMaintenance()?88:-1),i(),C(s.canTogglePause()?89:-1),i(),C(s.canDelete()?90:-1)}},dependencies:[ee,te,ie,Z],encapsulation:2,changeDetection:0});let e=l;return e})();export{ne as a,Wt as b};
