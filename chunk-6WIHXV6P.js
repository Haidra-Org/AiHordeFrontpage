import{a as R,b as N}from"./chunk-TWRQSRNJ.js";import{a as Ue}from"./chunk-3QN7C5B4.js";import{a as Ee,b as be}from"./chunk-SSLEQYO6.js";import{t as ke}from"./chunk-DQEJQ2UN.js";import{a as we}from"./chunk-HM33CXRW.js";import{a as Se}from"./chunk-VYNBQZBJ.js";import{c as ve,d as ye}from"./chunk-65WGSKXW.js";import{a as q}from"./chunk-HAOFLEYL.js";import"./chunk-HLFKHDP3.js";import{b as ge}from"./chunk-PSNERGXC.js";import"./chunk-LYJSE2CR.js";import{d as he,k as fe}from"./chunk-J34MUKJJ.js";import{c as A,g as Ce,k as B}from"./chunk-JIQRQOFL.js";import{A as W,Cb as C,Db as m,Eb as de,F as K,Fb as ce,Ja as j,Kb as pe,Lb as me,Oa as n,Ob as E,Rb as s,S as ae,Sb as x,Tb as h,Ub as O,X as T,Yb as Y,Za as z,aa as g,ac as _e,ba as v,ca as w,cb as re,da as F,dc as d,ec as c,fc as X,ga as oe,ja as f,k as H,kc as b,lb as se,lc as ue,mb as le,nb as U,nc as J,ob as _,oc as I,pb as u,pc as xe,q as te,qb as $,r as ie,rb as P,sb as D,ta as G,tb as k,ub as a,vb as o,w as ne,wb as y,zb as V}from"./chunk-7X6QMTFM.js";import"./chunk-4CLCTAJ7.js";var Ve=(()=>{let l=class l{constructor(){this.httpClient=T(Ce),this.auth=T(q),this.baseUrl="https://aihorde.net/api/v2"}getUser(t){let r=this.auth.getStoredApiKey(),p={};return r&&(p.apikey=r),this.httpClient.get(`${this.baseUrl}/users/${t}`,{headers:p}).pipe(W(()=>H(null)))}searchUsers(t){let r=this.auth.currentUser();return r&&r.username.toLowerCase().includes(t.toLowerCase())?H([{id:r.id,username:r.username}]):H([])}updateUser(t,r){let p=this.auth.getStoredApiKey();return p?this.httpClient.put(`${this.baseUrl}/users/${t}`,r,{headers:{apikey:p}}).pipe(W(()=>H(null))):H(null)}setTrusted(t,r){return this.updateUser(t,{trusted:r})}setFlagged(t,r){return this.updateUser(t,{flagged:r})}resetSuspicion(t){return this.updateUser(t,{reset_suspicion:!0})}setVpnAccess(t,r){return this.updateUser(t,{vpn:r})}setWorkerInvites(t,r){return this.updateUser(t,{worker_invite:r})}getSharedKey(t){return this.httpClient.get(`${this.baseUrl}/sharedkeys/${t}`).pipe(W(()=>H(null)))}getSharedKeysByIds(t){if(t.length===0)return H([]);let r=t.map(p=>this.getSharedKey(p).pipe(W(()=>H(null))));return ne(r).pipe(te(p=>p.filter(S=>S!==null)))}};l.\u0275fac=function(r){return new(r||l)},l.\u0275prov=ae({token:l,factory:l.\u0275fac,providedIn:"root"});let i=l;return i})();var Ie=["dialogPanel"],Be=["*"];function Fe(i,l){if(i&1&&(a(0,"span",11),w(),a(1,"svg",12),y(2,"circle",13)(3,"path",14),o(),s(4),o()),i&2){let e=m(2);n(4),h(" ",e.loadingLabel()||e.confirmLabel()," ")}}function Pe(i,l){if(i&1&&s(0),i&2){let e=m(2);h(" ",e.confirmLabel()," ")}}function De(i,l){if(i&1){let e=V();a(0,"div",3)(1,"div",4),C("click",function(){g(e);let r=m();return v(r.onBackdropClick())}),o(),a(2,"div",5,0)(4,"h3",6),s(5),o(),a(6,"div",7),ce(7),o(),a(8,"div",8)(9,"button",9,1),C("click",function(){g(e);let r=m();return v(r.cancel.emit())}),s(11),o(),a(12,"button",10,2),C("click",function(){g(e);let r=m();return v(r.confirm.emit())}),_(14,Fe,5,1,"span",11)(15,Pe,1,1),o()()()()}if(i&2){let e=m();n(2),U("aria-labelledby",e.titleId),n(2),k("id",e.titleId),n(),h(" ",e.title()," "),n(4),k("disabled",e.loading()),n(2),h(" ",e.cancelLabel()," "),n(),E("btn-danger",e.variant()==="danger"),k("disabled",e.loading()),n(2),u(e.loading()?14:15)}}var Me=(()=>{let l=class l{constructor(){this.platformId=T(G),this.previousActiveElement=null,this.dialogPanel=xe("dialogPanel"),this.open=I(!1),this.title=I.required(),this.confirmLabel=I("Confirm"),this.cancelLabel=I("Cancel"),this.loading=I(!1),this.loadingLabel=I(void 0),this.variant=I("default"),this.closeOnBackdrop=I(!0),this.confirm=J(),this.cancel=J(),this.titleId=`admin-dialog-title-${Math.random().toString(36).substr(2,9)}`,this.keydownHandler=null,ue(()=>{let t=this.open();A(this.platformId)&&(t?this.onOpen():this.onClose())})}ngOnDestroy(){this.removeKeyboardHandler()}onBackdropClick(){this.closeOnBackdrop()&&!this.loading()&&this.cancel.emit()}onOpen(){this.previousActiveElement=document.activeElement,this.keydownHandler=t=>this.handleKeydown(t),document.addEventListener("keydown",this.keydownHandler),setTimeout(()=>{this.dialogPanel()?.nativeElement?.focus()},0)}onClose(){this.removeKeyboardHandler(),this.previousActiveElement&&this.previousActiveElement instanceof HTMLElement&&this.previousActiveElement.focus(),this.previousActiveElement=null}handleKeydown(t){if(t.key==="Escape"&&!this.loading()){t.preventDefault(),this.cancel.emit();return}t.key==="Tab"&&this.trapFocus(t)}trapFocus(t){let r=this.dialogPanel();if(!r)return;let p=r.nativeElement.querySelectorAll('button:not([disabled]), [href], input:not([disabled]), select:not([disabled]), textarea:not([disabled]), [tabindex]:not([tabindex="-1"])');if(p.length===0)return;let S=p[0],M=p[p.length-1];t.shiftKey?document.activeElement===S&&(t.preventDefault(),M.focus()):document.activeElement===M&&(t.preventDefault(),S.focus())}removeKeyboardHandler(){this.keydownHandler&&(document.removeEventListener("keydown",this.keydownHandler),this.keydownHandler=null)}};l.\u0275fac=function(r){return new(r||l)},l.\u0275cmp=z({type:l,selectors:[["app-admin-dialog"]],viewQuery:function(r,p){r&1&&pe(p.dialogPanel,Ie,5),r&2&&me()},inputs:{open:[1,"open"],title:[1,"title"],confirmLabel:[1,"confirmLabel"],cancelLabel:[1,"cancelLabel"],loading:[1,"loading"],loadingLabel:[1,"loadingLabel"],variant:[1,"variant"],closeOnBackdrop:[1,"closeOnBackdrop"]},outputs:{confirm:"confirm",cancel:"cancel"},ngContentSelectors:Be,decls:1,vars:1,consts:[["dialogPanel",""],["cancelButton",""],["confirmButton",""],[1,"modal"],["aria-hidden","true",1,"modal-backdrop",3,"click"],["role","dialog","aria-modal","true","tabindex","-1",1,"dialog-panel"],[1,"admin-heading-card","mb-4",3,"id"],[1,"dialog-content","mb-6"],[1,"flex","justify-end","gap-3"],["type","button",1,"btn-muted",3,"click","disabled"],["type","button",1,"btn-primary",3,"click","disabled"],[1,"inline-flex","items-center","gap-2"],["fill","none","viewBox","0 0 24 24","aria-hidden","true",1,"animate-spin","h-4","w-4"],["cx","12","cy","12","r","10","stroke","currentColor","stroke-width","4",1,"opacity-25"],["fill","currentColor","d","M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z",1,"opacity-75"]],template:function(r,p){r&1&&(de(),_(0,De,16,9,"div",3)),r&2&&u(p.open()?0:-1)},encapsulation:2,changeDetection:0});let i=l;return i})();var He=(i,l)=>l.id;function Ke(i,l){i&1&&(w(),a(0,"svg",2),y(1,"path",4),o())}function Le(i,l){i&1&&(w(),a(0,"svg",2),y(1,"path",5),o())}function ze(i,l){if(i&1){let e=V();a(0,"button",6),C("click",function(){g(e);let r=m().$implicit,p=m();return v(p.dismiss.emit(r.id))}),s(1," Dismiss "),o()}}function Oe(i,l){if(i&1&&(a(0,"div",1),_(1,Ke,2,0,":svg:svg",2)(2,Le,2,0,":svg:svg",2),a(3,"span"),s(4),o(),_(5,ze,2,0,"button",3),o()),i&2){let e=l.$implicit,t=m();E("toast-success",e.type==="success")("toast-error",e.type==="error")("toast-warning",e.type==="warning"),U("role",e.type==="error"?"alert":"status")("aria-live",e.type==="error"?"assertive":"polite"),n(),u(e.type==="success"?1:e.type==="error"||e.type==="warning"?2:-1),n(3),x(e.message),n(),u(t.showDismiss()?5:-1)}}var Te=(()=>{let l=class l{constructor(){this.toasts=I([]),this.showDismiss=I(!0),this.dismiss=J()}};l.\u0275fac=function(r){return new(r||l)},l.\u0275cmp=z({type:l,selectors:[["app-admin-toast-bar"]],inputs:{toasts:[1,"toasts"],showDismiss:[1,"showDismiss"]},outputs:{dismiss:"dismiss"},decls:2,vars:0,consts:[[1,"toast",3,"toast-success","toast-error","toast-warning"],[1,"toast"],["fill","none","stroke","currentColor","viewBox","0 0 24 24","aria-hidden","true",1,"w-5","h-5"],["type","button","aria-label","Dismiss notification",1,"btn-muted","text-xs"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M5 13l4 4L19 7"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"],["type","button","aria-label","Dismiss notification",1,"btn-muted","text-xs",3,"click"]],template:function(r,p){r&1&&P(0,Oe,6,11,"div",0,He),r&2&&D(p.toasts())},encapsulation:2,changeDetection:0});let i=l;return i})();var Ae=i=>({username:i}),Q=(i,l)=>l.id;function We(i,l){if(i&1){let e=V();a(0,"div",13)(1,"div",14),C("click",function(){g(e);let r=m(2);return v(r.closeRawJsonModal())}),o(),a(2,"div",15)(3,"div",16)(4,"h3",17),s(5,"Raw JSON"),o(),a(6,"button",18),C("click",function(){g(e);let r=m(2);return v(r.closeRawJsonModal())}),s(7," Close "),o()(),a(8,"div",19)(9,"div",20)(10,"div",21),s(11,"User"),o(),y(12,"pre",22),o(),a(13,"div",20)(14,"div",21),s(15,"Workers"),o(),y(16,"pre",23),o(),a(17,"div",20)(18,"div",21),s(19,"Shared Keys"),o(),y(20,"pre",24),o(),a(21,"div",20)(22,"div",21),s(23,"Styles"),o(),y(24,"pre",25),o()()()()}if(i&2){let e=m(2);n(12),k("innerHTML",e.userJsonHighlighted(),j),n(4),k("innerHTML",e.workersJsonHighlighted(),j),n(4),k("innerHTML",e.sharedKeysJsonHighlighted(),j),n(4),k("innerHTML",e.stylesJsonHighlighted(),j)}}function je(i,l){if(i&1&&_(0,We,25,4,"div",13),i&2){let e=m();u(e.rawJsonModalOpen()?0:-1)}}function Je(i,l){if(i&1){let e=V();a(0,"button",35),C("click",function(r){return g(e),m(2).clearUserHistory(),v(r.stopPropagation())}),s(1," Clear "),o()}}function Re(i,l){if(i&1){let e=V();a(0,"button",38),C("click",function(){let r=g(e).$implicit,p=m(3);return v(p.selectUserFromHistory(r))}),a(1,"div",39)(2,"div",40)(3,"div",41),s(4),o(),a(5,"div",42),s(6),o()(),w(),a(7,"svg",43),y(8,"path",44),o()()()}if(i&2){let e=l.$implicit;n(4),h(" ",e.username," "),n(2),h("#",e.id)}}function Ne(i,l){if(i&1&&(a(0,"div",34)(1,"div",36),P(2,Re,9,2,"button",37,Q),o()()),i&2){let e=m(2);n(2),D(e.userHistory())}}function Ge(i,l){if(i&1){let e=V();a(0,"div",4)(1,"button",26),C("click",function(){g(e);let r=m();return v(r.toggleHistorySection())}),a(2,"div",27),w(),a(3,"svg",28),y(4,"path",29),o(),F(),a(5,"span",30),s(6),o()(),a(7,"div",27),_(8,Je,2,0,"button",31),w(),a(9,"svg",32),y(10,"path",33),o()()(),_(11,Ne,4,0,"div",34),o()}if(i&2){let e=m();n(6),h("Recent Users (",e.userHistory().length,")"),n(2),u(e.historyExpanded()?8:-1),n(),E("expanded",e.historyExpanded()),n(2),u(e.historyExpanded()?11:-1)}}function $e(i,l){i&1&&(a(0,"div",9),w(),a(1,"svg",45),y(2,"circle",46)(3,"path",47),o(),F(),a(4,"p",48),s(5),d(6,"transloco"),o()()),i&2&&(n(5),x(c(6,1,"admin.users.loading")))}function qe(i,l){i&1&&(a(0,"div",10),w(),a(1,"svg",49),y(2,"path",50),o(),F(),a(3,"p",51),s(4),d(5,"transloco"),o()()),i&2&&(n(4),x(c(5,1,"admin.users.not_found")))}function Qe(i,l){i&1&&(a(0,"div",10),w(),a(1,"svg",49),y(2,"path",52),o(),F(),a(3,"p",51),s(4),d(5,"transloco"),o()()),i&2&&(n(4),h(" ",c(5,1,"admin.users.select_user")," "))}function Ye(i,l){i&1&&(a(0,"div",54),w(),a(1,"svg",72),y(2,"path",57),o(),F(),a(3,"span",73),s(4),d(5,"transloco"),o()()),i&2&&(n(4),x(c(5,1,"admin.users.deleted_warning")))}function Xe(i,l){i&1&&(w(),a(0,"svg",61),y(1,"path",74),o())}function Ze(i,l){i&1&&(w(),a(0,"svg",62),y(1,"path",75),o())}function et(i,l){i&1&&(a(0,"span",63),s(1),d(2,"transloco"),o()),i&2&&(n(),x(c(2,1,"admin.users.moderator_badge")))}function tt(i,l){if(i&1&&(a(0,"div",66)(1,"div",67),s(2),d(3,"transloco"),o(),a(4,"div",17),s(5),o()()),i&2){let e=m(2);n(2),h(" ",c(3,2,"admin.users.field.evaluating_kudos")," "),n(3),h(" ",e.selectedUser().evaluating_kudos," ")}}function it(i,l){if(i&1){let e=V();a(0,"button",76),C("click",function(){g(e);let r=m(2);return v(r.openResetSuspicionDialog())}),s(1," Reset "),o()}}function nt(i,l){if(i&1){let e=V();a(0,"div",70)(1,"div",77)(2,"div",78),d(3,"transloco"),a(4,"div",79)(5,"span",80),s(6),d(7,"transloco"),o(),a(8,"span",81),s(9),d(10,"transloco"),o()(),a(11,"label",82)(12,"input",83),C("change",function(r){g(e);let p=m(2);return v(p.onFieldChange("moderator",r))}),o(),y(13,"div",84)(14,"div",85),o()(),a(15,"div",78),d(16,"transloco"),a(17,"div",79)(18,"span",80),s(19),d(20,"transloco"),o(),a(21,"span",81),s(22),d(23,"transloco"),o()(),a(24,"label",82)(25,"input",83),C("change",function(r){g(e);let p=m(2);return v(p.onFieldChange("trusted",r))}),o(),y(26,"div",84)(27,"div",85),o()(),a(28,"div",78),d(29,"transloco"),a(30,"div",79)(31,"span",80),s(32),d(33,"transloco"),o(),a(34,"span",81),s(35),d(36,"transloco"),o()(),a(37,"label",82)(38,"input",83),C("change",function(r){g(e);let p=m(2);return v(p.onFieldChange("flagged",r))}),o(),y(39,"div",84)(40,"div",85),o()(),a(41,"div",78),d(42,"transloco"),a(43,"div",79)(44,"span",80),s(45),d(46,"transloco"),o(),a(47,"span",81),s(48),d(49,"transloco"),o()(),a(50,"label",82)(51,"input",83),C("change",function(r){g(e);let p=m(2);return v(p.onFieldChange("customizer",r))}),o(),y(52,"div",84)(53,"div",85),o()(),a(54,"div",78),d(55,"transloco"),a(56,"div",79)(57,"span",80),s(58),d(59,"transloco"),o(),a(60,"span",81),s(61),d(62,"transloco"),o()(),a(63,"label",82)(64,"input",83),C("change",function(r){g(e);let p=m(2);return v(p.onFieldChange("service",r))}),o(),y(65,"div",84)(66,"div",85),o()(),a(67,"div",78),d(68,"transloco"),a(69,"div",79)(70,"span",80),s(71),d(72,"transloco"),o(),a(73,"span",81),s(74),d(75,"transloco"),o()(),a(76,"label",82)(77,"input",83),C("change",function(r){g(e);let p=m(2);return v(p.onFieldChange("education",r))}),o(),y(78,"div",84)(79,"div",85),o()(),a(80,"div",78),d(81,"transloco"),a(82,"div",79)(83,"span",80),s(84),d(85,"transloco"),o(),a(86,"span",81),s(87),d(88,"transloco"),o()(),a(89,"label",82)(90,"input",83),C("change",function(r){g(e);let p=m(2);return v(p.onFieldChange("special",r))}),o(),y(91,"div",84)(92,"div",85),o()(),a(93,"div",78),d(94,"transloco"),a(95,"div",79)(96,"span",80),s(97),d(98,"transloco"),o(),a(99,"span",81),s(100),d(101,"transloco"),o()(),a(102,"label",82)(103,"input",83),C("change",function(r){g(e);let p=m(2);return v(p.onFieldChange("filtered",r))}),o(),y(104,"div",84)(105,"div",85),o()(),a(106,"div",78),d(107,"transloco"),a(108,"div",79)(109,"span",80),s(110),d(111,"transloco"),o(),a(112,"span",81),s(113),d(114,"transloco"),o()(),a(115,"label",82)(116,"input",83),C("change",function(r){g(e);let p=m(2);return v(p.onFieldChange("vpn",r))}),o(),y(117,"div",84)(118,"div",85),o()(),a(119,"div",78),d(120,"transloco"),a(121,"div",79)(122,"span",80),s(123),d(124,"transloco"),o(),a(125,"span",81),s(126),d(127,"transloco"),o()(),a(128,"label",82)(129,"input",83),C("change",function(r){g(e);let p=m(2);return v(p.onFieldChange("publicWorkers",r))}),o(),y(130,"div",84)(131,"div",85),o()()()()}if(i&2){let e=m(2);n(2),E("field-row-dimmed",!e.moderatorValue())("field-row-changed",e.moderatorChanged()),U("title",c(3,80,"admin.users.desc.moderator")),n(4),x(c(7,82,"admin.users.field.moderator")),n(3),x(c(10,84,"admin.users.desc.moderator")),n(3),k("checked",e.moderatorValue()),n(3),E("field-row-dimmed",!e.trustedValue())("field-row-changed",e.trustedChanged()),U("title",c(16,86,"admin.users.desc.trusted")),n(4),x(c(20,88,"admin.users.field.trusted")),n(3),x(c(23,90,"admin.users.desc.trusted")),n(3),k("checked",e.trustedValue()),n(3),E("field-row-dimmed",!e.flaggedValue())("field-row-changed",e.flaggedChanged()),U("title",c(29,92,"admin.users.desc.flagged")),n(4),x(c(33,94,"admin.users.field.flagged")),n(3),x(c(36,96,"admin.users.desc.flagged")),n(3),k("checked",e.flaggedValue()),n(3),E("field-row-dimmed",!e.customizerValue())("field-row-changed",e.customizerChanged()),U("title",c(42,98,"admin.users.desc.customizer")),n(4),x(c(46,100,"admin.users.field.customizer")),n(3),x(c(49,102,"admin.users.desc.customizer")),n(3),k("checked",e.customizerValue()),n(3),E("field-row-dimmed",!e.serviceValue())("field-row-changed",e.serviceChanged()),U("title",c(55,104,"admin.users.desc.service")),n(4),x(c(59,106,"admin.users.field.service")),n(3),x(c(62,108,"admin.users.desc.service")),n(3),k("checked",e.serviceValue()),n(3),E("field-row-dimmed",!e.educationValue())("field-row-changed",e.educationChanged()),U("title",c(68,110,"admin.users.desc.education")),n(4),x(c(72,112,"admin.users.field.education")),n(3),x(c(75,114,"admin.users.desc.education")),n(3),k("checked",e.educationValue()),n(3),E("field-row-dimmed",!e.specialValue())("field-row-changed",e.specialChanged()),U("title",c(81,116,"admin.users.desc.special")),n(4),x(c(85,118,"admin.users.field.special")),n(3),x(c(88,120,"admin.users.desc.special")),n(3),k("checked",e.specialValue()),n(3),E("field-row-dimmed",!e.filteredValue())("field-row-changed",e.filteredChanged()),U("title",c(94,122,"admin.users.desc.filtered")),n(4),x(c(98,124,"admin.users.field.filtered")),n(3),x(c(101,126,"admin.users.desc.filtered")),n(3),k("checked",e.filteredValue()),n(3),E("field-row-dimmed",!e.vpnValue())("field-row-changed",e.vpnChanged()),U("title",c(107,128,"admin.users.desc.vpn_access")),n(4),x(c(111,130,"admin.users.field.vpn_access")),n(3),x(c(114,132,"admin.users.desc.vpn_access")),n(3),k("checked",e.vpnValue()),n(3),E("field-row-dimmed",!e.publicWorkersValue())("field-row-changed",e.publicWorkersChanged()),U("title",c(120,134,"admin.users.desc.public_workers")),n(4),x(c(124,136,"admin.users.field.public_workers")),n(3),x(c(127,138,"admin.users.desc.public_workers")),n(3),k("checked",e.publicWorkersValue())}}function at(i,l){if(i&1){let e=V();a(0,"div",70)(1,"div",86)(2,"div"),d(3,"transloco"),a(4,"label",87),s(5),d(6,"transloco"),o(),a(7,"p",88),s(8),d(9,"transloco"),o(),a(10,"input",89),C("input",function(r){g(e);let p=m(2);return v(p.onFieldChange("workerInvites",r))}),o()(),a(11,"div"),d(12,"transloco"),a(13,"label",87),s(14),d(15,"transloco"),o(),a(16,"p",88),s(17),d(18,"transloco"),o(),a(19,"input",90),C("input",function(r){g(e);let p=m(2);return v(p.onFieldChange("usageMultiplier",r))}),o()(),a(20,"div"),d(21,"transloco"),a(22,"label",87),s(23),d(24,"transloco"),o(),a(25,"p",88),s(26),d(27,"transloco"),o(),a(28,"input",89),C("input",function(r){g(e);let p=m(2);return v(p.onFieldChange("concurrency",r))}),o()(),a(29,"div"),d(30,"transloco"),a(31,"label",87),s(32),d(33,"transloco"),o(),a(34,"p",88),s(35),d(36,"transloco"),o(),a(37,"input",89),C("input",function(r){g(e);let p=m(2);return v(p.onFieldChange("monthlyKudos",r))}),o()()()()}if(i&2){let e=m(2);n(2),U("title",c(3,24,"admin.users.desc.worker_invites")),n(3),x(c(6,26,"admin.users.field.worker_invites")),n(3),h(" ",c(9,28,"admin.users.desc.worker_invites")," "),n(2),E("form-input-changed",e.workerInvitesChanged()),k("value",e.workerInvitesValue()),n(),U("title",c(12,30,"admin.users.desc.usage_multiplier")),n(3),x(c(15,32,"admin.users.field.usage_multiplier")),n(3),h(" ",c(18,34,"admin.users.desc.usage_multiplier")," "),n(2),E("form-input-changed",e.usageMultiplierChanged()),k("value",e.usageMultiplierValue()),n(),U("title",c(21,36,"admin.users.desc.concurrency")),n(3),x(c(24,38,"admin.users.field.concurrency")),n(3),h(" ",c(27,40,"admin.users.desc.concurrency")," "),n(2),E("form-input-changed",e.concurrencyChanged()),k("value",e.concurrencyValue()),n(),U("title",c(30,42,"admin.users.desc.monthly_kudos")),n(3),x(c(33,44,"admin.users.field.monthly_kudos")),n(3),h(" ",c(36,46,"admin.users.desc.monthly_kudos")," "),n(2),E("form-input-changed",e.monthlyKudosChanged()),k("value",e.monthlyKudosValue())}}function ot(i,l){if(i&1){let e=V();a(0,"div",96),d(1,"transloco"),a(2,"div",97)(3,"span",30),s(4),d(5,"transloco"),o(),a(6,"span",98),s(7),d(8,"transloco"),o(),a(9,"span",98),s(10),d(11,"transloco"),o(),a(12,"span",99),s(13),o()(),a(14,"button",100),C("click",function(){g(e);let r=m(3);return v(r.regenerateProxyPasskey())}),s(15),d(16,"transloco"),o()()}if(i&2){let e=m(3);U("title",c(1,7,"admin.users.desc.proxy_passkey")),n(4),x(c(5,9,"admin.users.field.proxy_passkey")),n(3),x(c(8,11,"admin.users.desc.proxy_passkey")),n(3),x(c(11,13,"admin.users.hint.proxy_passkey")),n(3),x(e.selectedUser().proxy_passkey),n(),k("disabled",e.isRegeneratingPasskey()),n(),h(" ",c(16,15,"admin.users.action.regenerate_proxy_passkey")," ")}}function rt(i,l){if(i&1){let e=V();a(0,"div",71)(1,"div",91),d(2,"transloco"),a(3,"div",92)(4,"span",80),s(5),d(6,"transloco"),o(),a(7,"span",81),s(8),d(9,"transloco"),o()(),a(10,"input",93),C("input",function(r){g(e);let p=m(2);return v(p.onFieldChange("contact",r))}),o()(),a(11,"div",91),d(12,"transloco"),a(13,"div",94)(14,"span",80),s(15),d(16,"transloco"),o(),a(17,"span",81),s(18),d(19,"transloco"),o()(),a(20,"textarea",95),d(21,"transloco"),C("input",function(r){g(e);let p=m(2);return v(p.onFieldChange("adminComment",r))}),o()(),_(22,ot,17,17,"div",96),o()}if(i&2){let e=m(2);n(),U("title",c(2,15,"admin.users.desc.contact")),n(4),x(c(6,17,"admin.users.field.contact")),n(3),x(c(9,19,"admin.users.desc.contact")),n(2),E("form-input-changed",e.contactChanged()),k("value",e.contactValue()),n(),U("title",c(12,21,"admin.users.desc.admin_comment")),n(4),x(c(16,23,"admin.users.field.admin_comment")),n(3),x(c(19,25,"admin.users.desc.admin_comment")),n(2),E("form-input-changed",e.adminCommentChanged()),k("placeholder",Y(c(21,27,"admin.users.field.admin_comment")))("value",e.adminCommentValue()),n(2),u(e.selectedUser().proxy_passkey?22:-1)}}function st(i,l){if(i&1&&(a(0,"div",70),y(1,"app-kudos-breakdown-panel",101),o()),i&2){let e=m(2);n(),k("kudosDetails",e.selectedUser().kudos_details)}}function lt(i,l){if(i&1&&(a(0,"div",106)(1,"span",107),s(2),d(3,"transloco"),o(),a(4,"span",30),s(5),d(6,"formatNumber"),o()()),i&2){let e=m(5);n(2),h("",c(3,2,"admin.users.records.megapixelsteps"),":"),n(3),x(c(6,4,e.selectedUser().records.usage.megapixelsteps??0))}}function dt(i,l){if(i&1&&(a(0,"div",106)(1,"span",107),s(2),d(3,"transloco"),o(),a(4,"span",30),s(5),d(6,"formatNumber"),o()()),i&2){let e=m(5);n(2),h("",c(3,2,"admin.users.records.tokens"),":"),n(3),x(c(6,4,e.selectedUser().records.usage.tokens??0))}}function ct(i,l){if(i&1&&(a(0,"div",103)(1,"h4",104),s(2),d(3,"transloco"),o(),a(4,"div",105),_(5,lt,7,6,"div",106),_(6,dt,7,6,"div",106),o()()),i&2){let e=m(4);n(2),h(" ",c(3,3,"admin.users.records.usage")," "),n(3),u(e.selectedUser().records.usage.megapixelsteps!==void 0?5:-1),n(),u(e.selectedUser().records.usage.tokens!==void 0?6:-1)}}function pt(i,l){if(i&1&&(a(0,"div",106)(1,"span",107),s(2),d(3,"transloco"),o(),a(4,"span",30),s(5),d(6,"formatNumber"),o()()),i&2){let e=m(5);n(2),h("",c(3,2,"admin.users.records.megapixelsteps"),":"),n(3),x(c(6,4,e.selectedUser().records.contribution.megapixelsteps??0))}}function mt(i,l){if(i&1&&(a(0,"div",106)(1,"span",107),s(2),d(3,"transloco"),o(),a(4,"span",30),s(5),d(6,"formatNumber"),o()()),i&2){let e=m(5);n(2),h("",c(3,2,"admin.users.records.tokens"),":"),n(3),x(c(6,4,e.selectedUser().records.contribution.tokens??0))}}function _t(i,l){if(i&1&&(a(0,"div",103)(1,"h4",104),s(2),d(3,"transloco"),o(),a(4,"div",105),_(5,pt,7,6,"div",106),_(6,mt,7,6,"div",106),o()()),i&2){let e=m(4);n(2),h(" ",c(3,3,"admin.users.records.contribution")," "),n(3),u(e.selectedUser().records.contribution.megapixelsteps!==void 0?5:-1),n(),u(e.selectedUser().records.contribution.tokens!==void 0?6:-1)}}function ut(i,l){if(i&1&&(a(0,"div",106)(1,"span",107),s(2),d(3,"transloco"),o(),a(4,"span",30),s(5),d(6,"formatNumber"),o()()),i&2){let e=m(5);n(2),h("",c(3,2,"admin.users.records.image"),":"),n(3),x(c(6,4,e.selectedUser().records.request.image??0))}}function xt(i,l){if(i&1&&(a(0,"div",106)(1,"span",107),s(2),d(3,"transloco"),o(),a(4,"span",30),s(5),d(6,"formatNumber"),o()()),i&2){let e=m(5);n(2),h("",c(3,2,"admin.users.records.text"),":"),n(3),x(c(6,4,e.selectedUser().records.request.text??0))}}function ht(i,l){if(i&1&&(a(0,"div",106)(1,"span",107),s(2),d(3,"transloco"),o(),a(4,"span",30),s(5),d(6,"formatNumber"),o()()),i&2){let e=m(5);n(2),h("",c(3,2,"admin.users.records.interrogation"),":"),n(3),x(c(6,4,e.selectedUser().records.request.interrogation??0))}}function Ct(i,l){if(i&1&&(a(0,"div",103)(1,"h4",104),s(2),d(3,"transloco"),o(),a(4,"div",105),_(5,ut,7,6,"div",106),_(6,xt,7,6,"div",106),_(7,ht,7,6,"div",106),o()()),i&2){let e=m(4);n(2),h(" ",c(3,4,"admin.users.records.requests")," "),n(3),u(e.selectedUser().records.request.image!==void 0?5:-1),n(),u(e.selectedUser().records.request.text!==void 0?6:-1),n(),u(e.selectedUser().records.request.interrogation!==void 0?7:-1)}}function ft(i,l){if(i&1&&(a(0,"div",106)(1,"span",107),s(2),d(3,"transloco"),o(),a(4,"span",30),s(5),d(6,"formatNumber"),o()()),i&2){let e=m(5);n(2),h("",c(3,2,"admin.users.records.image"),":"),n(3),x(c(6,4,e.selectedUser().records.fulfillment.image??0))}}function gt(i,l){if(i&1&&(a(0,"div",106)(1,"span",107),s(2),d(3,"transloco"),o(),a(4,"span",30),s(5),d(6,"formatNumber"),o()()),i&2){let e=m(5);n(2),h("",c(3,2,"admin.users.records.text"),":"),n(3),x(c(6,4,e.selectedUser().records.fulfillment.text??0))}}function vt(i,l){if(i&1&&(a(0,"div",106)(1,"span",107),s(2),d(3,"transloco"),o(),a(4,"span",30),s(5),d(6,"formatNumber"),o()()),i&2){let e=m(5);n(2),h("",c(3,2,"admin.users.records.interrogation"),":"),n(3),x(c(6,4,e.selectedUser().records.fulfillment.interrogation??0))}}function yt(i,l){if(i&1&&(a(0,"div",103)(1,"h4",104),s(2),d(3,"transloco"),o(),a(4,"div",105),_(5,ft,7,6,"div",106),_(6,gt,7,6,"div",106),_(7,vt,7,6,"div",106),o()()),i&2){let e=m(4);n(2),h(" ",c(3,4,"admin.users.records.fulfillments")," "),n(3),u(e.selectedUser().records.fulfillment.image!==void 0?5:-1),n(),u(e.selectedUser().records.fulfillment.text!==void 0?6:-1),n(),u(e.selectedUser().records.fulfillment.interrogation!==void 0?7:-1)}}function St(i,l){if(i&1&&(a(0,"div",106)(1,"span",107),s(2),d(3,"transloco"),o(),a(4,"span",30),s(5),d(6,"formatNumber"),o()()),i&2){let e=m(5);n(2),h("",c(3,2,"admin.users.records.image"),":"),n(3),x(c(6,4,e.selectedUser().records.style.image??0))}}function kt(i,l){if(i&1&&(a(0,"div",106)(1,"span",107),s(2),d(3,"transloco"),o(),a(4,"span",30),s(5),d(6,"formatNumber"),o()()),i&2){let e=m(5);n(2),h("",c(3,2,"admin.users.records.text"),":"),n(3),x(c(6,4,e.selectedUser().records.style.text??0))}}function Et(i,l){if(i&1&&(a(0,"div",103)(1,"h4",104),s(2),d(3,"transloco"),o(),a(4,"div",105),_(5,St,7,6,"div",106),_(6,kt,7,6,"div",106),o()()),i&2){let e=m(4);n(2),h(" ",c(3,3,"admin.users.records.styles")," "),n(3),u(e.selectedUser().records.style.image!==void 0?5:-1),n(),u(e.selectedUser().records.style.text!==void 0?6:-1)}}function wt(i,l){if(i&1&&(a(0,"div",70)(1,"div",102),_(2,ct,7,5,"div",103),_(3,_t,7,5,"div",103),_(4,Ct,8,6,"div",103),_(5,yt,8,6,"div",103),_(6,Et,7,5,"div",103),o()()),i&2){let e=m(3);n(2),u(e.selectedUser().records.usage?2:-1),n(),u(e.selectedUser().records.contribution?3:-1),n(),u(e.selectedUser().records.request?4:-1),n(),u(e.selectedUser().records.fulfillment?5:-1),n(),u(e.selectedUser().records.style?6:-1)}}function bt(i,l){if(i&1){let e=V();a(0,"div",69)(1,"button",26),C("click",function(){g(e);let r=m(2);return v(r.toggleRecordsSection())}),a(2,"span",30),s(3),d(4,"transloco"),o(),w(),a(5,"svg",32),y(6,"path",33),o()(),_(7,wt,7,5,"div",70),o()}if(i&2){let e=m(2);n(3),x(c(4,4,"admin.users.section.records")),n(2),E("expanded",e.recordsExpanded()),n(2),u(e.recordsExpanded()?7:-1)}}function Ut(i,l){if(i&1&&(a(0,"span",111),s(1),o()),i&2){let e=l.$implicit;n(),x(e)}}function Vt(i,l){if(i&1&&(a(0,"span",112),s(1),o()),i&2){let e=m(5);n(),h("+",e.selectedUser().active_generations.image.length-10," more")}}function Mt(i,l){if(i&1&&(a(0,"div")(1,"h4",109),s(2),d(3,"transloco"),o(),a(4,"div",110),P(5,Ut,2,1,"span",111,$),_(7,Vt,2,1,"span",112),o()()),i&2){let e=m(4);n(2),O(" ",c(3,3,"admin.users.active_generations.image")," (",e.selectedUser().active_generations.image.length,") "),n(3),D(e.selectedUser().active_generations.image.slice(0,10)),n(2),u(e.selectedUser().active_generations.image.length>10?7:-1)}}function Tt(i,l){if(i&1&&(a(0,"span",111),s(1),o()),i&2){let e=l.$implicit;n(),x(e)}}function It(i,l){if(i&1&&(a(0,"span",112),s(1),o()),i&2){let e=m(5);n(),h("+",e.selectedUser().active_generations.text.length-10," more")}}function Bt(i,l){if(i&1&&(a(0,"div")(1,"h4",109),s(2),d(3,"transloco"),o(),a(4,"div",110),P(5,Tt,2,1,"span",111,$),_(7,It,2,1,"span",112),o()()),i&2){let e=m(4);n(2),O(" ",c(3,3,"admin.users.active_generations.text")," (",e.selectedUser().active_generations.text.length,") "),n(3),D(e.selectedUser().active_generations.text.slice(0,10)),n(2),u(e.selectedUser().active_generations.text.length>10?7:-1)}}function Ft(i,l){if(i&1&&(a(0,"span",111),s(1),o()),i&2){let e=l.$implicit;n(),x(e)}}function Pt(i,l){if(i&1&&(a(0,"span",112),s(1),o()),i&2){let e=m(5);n(),h("+",e.selectedUser().active_generations.alchemy.length-10," more")}}function Dt(i,l){if(i&1&&(a(0,"div")(1,"h4",109),s(2),d(3,"transloco"),o(),a(4,"div",110),P(5,Ft,2,1,"span",111,$),_(7,Pt,2,1,"span",112),o()()),i&2){let e=m(4);n(2),O(" ",c(3,3,"admin.users.active_generations.alchemy")," (",e.selectedUser().active_generations.alchemy.length,") "),n(3),D(e.selectedUser().active_generations.alchemy.slice(0,10)),n(2),u(e.selectedUser().active_generations.alchemy.length>10?7:-1)}}function Ht(i,l){if(i&1&&(a(0,"div",70)(1,"div",108),_(2,Mt,8,5,"div"),_(3,Bt,8,5,"div"),_(4,Dt,8,5,"div"),o()()),i&2){let e,t,r,p=m(3);n(2),u(!((e=p.selectedUser().active_generations)==null||e.image==null)&&e.image.length?2:-1),n(),u(!((t=p.selectedUser().active_generations)==null||t.text==null)&&t.text.length?3:-1),n(),u(!((r=p.selectedUser().active_generations)==null||r.alchemy==null)&&r.alchemy.length?4:-1)}}function Kt(i,l){if(i&1){let e=V();a(0,"div",69)(1,"button",26),C("click",function(){g(e);let r=m(2);return v(r.toggleActiveGenerationsSection())}),a(2,"span",30),s(3),d(4,"transloco"),o(),w(),a(5,"svg",32),y(6,"path",33),o()(),_(7,Ht,5,3,"div",70),o()}if(i&2){let e=m(2);n(3),x(c(4,4,"admin.users.section.active_generations")),n(2),E("expanded",e.activeGenerationsExpanded()),n(2),u(e.activeGenerationsExpanded()?7:-1)}}function Lt(i,l){if(i&1&&(a(0,"div",66)(1,"div",39)(2,"div")(3,"div",113),s(4),o(),a(5,"div",112),s(6),o()(),a(7,"span",114),s(8),o()()()),i&2){let e=l.$implicit;n(4),h(" ",e.name," "),n(2),h(" ",e.type," "),n(2),h("",e.id.slice(0,8),"...")}}function zt(i,l){if(i&1&&(a(0,"div",70)(1,"div",36),P(2,Lt,9,3,"div",66,Q),o()()),i&2){let e=m(3);n(2),D(e.selectedUser().styles)}}function Ot(i,l){if(i&1){let e=V();a(0,"div",69)(1,"button",26),C("click",function(){g(e);let r=m(2);return v(r.toggleStylesSection())}),a(2,"span",30),s(3),d(4,"transloco"),o(),w(),a(5,"svg",32),y(6,"path",33),o()(),_(7,zt,4,0,"div",70),o()}if(i&2){let e=m(2);n(3),O("",c(4,5,"admin.users.section.styles")," (",e.selectedUser().styles.length,")"),n(2),E("expanded",e.stylesExpanded()),n(2),u(e.stylesExpanded()?7:-1)}}function At(i,l){i&1&&(a(0,"div",9),w(),a(1,"svg",117),y(2,"circle",46)(3,"path",47),o()())}function Wt(i,l){i&1&&(a(0,"div",116),s(1," No shared key details available "),o())}function jt(i,l){if(i&1&&(a(0,"div",123),s(1),d(2,"date"),o()),i&2){let e=m().$implicit;n(),h(" Expires: ",X(2,1,e.expiry,"mediumDate")," ")}}function Jt(i,l){i&1&&s(0," Unlimited ")}function Rt(i,l){if(i&1&&(s(0),d(1,"formatNumber")),i&2){let e=m().$implicit;h(" ",c(1,1,e.kudos??0)," ")}}function Nt(i,l){i&1&&s(0," \u221E ")}function Gt(i,l){if(i&1&&(s(0),d(1,"formatNumber")),i&2){let e=m().$implicit;h(" ",c(1,1,e.max_image_pixels??0)," ")}}function $t(i,l){i&1&&s(0," \u221E ")}function qt(i,l){if(i&1&&s(0),i&2){let e=m().$implicit;h(" ",e.max_image_steps??0," ")}}function Qt(i,l){i&1&&s(0," \u221E ")}function Yt(i,l){if(i&1&&s(0),i&2){let e=m().$implicit;h(" ",e.max_text_tokens??0," ")}}function Xt(i,l){if(i&1&&(a(0,"div",118)(1,"div",119)(2,"div",120)(3,"div",121),s(4),o(),a(5,"div",122),s(6),o()(),_(7,jt,3,4,"div",123),o(),a(8,"div",124)(9,"div")(10,"span",107),s(11,"Kudos Limit:"),o(),a(12,"span",125),_(13,Jt,1,0)(14,Rt,2,3),o()(),a(15,"div")(16,"span",107),s(17,"Utilized:"),o(),a(18,"span",125),s(19),d(20,"formatNumber"),o()()(),a(21,"div",126)(22,"div",127)(23,"div",128),s(24,"Max Pixels"),o(),a(25,"div",30),_(26,Nt,1,0)(27,Gt,2,3),o()(),a(28,"div",127)(29,"div",128),s(30,"Max Steps"),o(),a(31,"div",30),_(32,$t,1,0)(33,qt,1,1),o()(),a(34,"div",127)(35,"div",128),s(36,"Max Tokens"),o(),a(37,"div",30),_(38,Qt,1,0)(39,Yt,1,1),o()()()()),i&2){let e=l.$implicit;n(4),h(" ",e.name??"Unnamed Key"," "),n(),k("title",Y(e.id)),n(),h(" ",e.id," "),n(),u(e.expiry?7:-1),n(6),u(e.kudos===-1?13:14),n(6),x(c(20,10,e.utilized??0)),n(7),u(e.max_image_pixels===-1?26:27),n(6),u(e.max_image_steps===-1?32:33),n(6),u(e.max_text_tokens===-1?38:39)}}function Zt(i,l){if(i&1&&(a(0,"div",36),P(1,Xt,40,12,"div",118,Q),o()),i&2){let e=m(4);n(),D(e.userSharedKeys())}}function ei(i,l){if(i&1&&(a(0,"div",115),_(1,At,4,0,"div",9)(2,Wt,2,0,"div",116)(3,Zt,3,0,"div",36),o()),i&2){let e=m(3);n(),u(e.loadingSharedKeys()?1:e.userSharedKeys().length===0&&e.sharedKeysFetched()?2:3)}}function ti(i,l){if(i&1){let e=V();a(0,"div",69)(1,"button",26),C("click",function(){g(e);let r=m(2);return v(r.toggleSharedKeysSection())}),a(2,"span",30),s(3),d(4,"transloco"),o(),w(),a(5,"svg",32),y(6,"path",33),o()(),_(7,ei,4,1,"div",115),o()}if(i&2){let e=m(2);n(3),O("",c(4,5,"admin.users.section.shared_keys")," (",e.selectedUser().sharedkey_ids.length,")"),n(2),E("expanded",e.sharedKeysExpanded()),n(2),u(e.sharedKeysExpanded()?7:-1)}}function ii(i,l){i&1&&(a(0,"div",9),w(),a(1,"svg",117),y(2,"circle",46)(3,"path",47),o()())}function ni(i,l){if(i&1){let e=V();a(0,"app-worker-card",131),C("workerUpdated",function(){g(e);let r=m(5);return v(r.onWorkerUpdated())}),o()}if(i&2){let e,t=l.$implicit,r=m(5);k("worker",t)("isModerator",((e=r.auth.currentUser())==null?null:e.moderator)??!1)}}function ai(i,l){if(i&1&&(a(0,"div",129),P(1,ni,1,2,"app-worker-card",130,Q),o()),i&2){let e=m(4);n(),D(e.userWorkers())}}function oi(i,l){if(i&1&&(a(0,"div",115),_(1,ii,4,0,"div",9)(2,ai,3,0,"div",129),o()),i&2){let e=m(3);n(),u(e.loadingWorkers()?1:2)}}function ri(i,l){if(i&1){let e=V();a(0,"div",69)(1,"button",26),C("click",function(){g(e);let r=m(2);return v(r.toggleWorkersSection())}),a(2,"span",30),s(3),d(4,"transloco"),o(),w(),a(5,"svg",32),y(6,"path",33),o()(),_(7,oi,3,1,"div",115),o()}if(i&2){let e=m(2);n(3),x(c(4,4,"admin.users.section.workers")),n(2),E("expanded",e.workersExpanded()),n(2),u(e.workersExpanded()?7:-1)}}function si(i,l){if(i&1){let e=V();a(0,"div",53),_(1,Ye,6,3,"div",54),a(2,"div",55),w(),a(3,"svg",56),y(4,"path",57),o(),F(),a(5,"span"),s(6),d(7,"transloco"),o()(),a(8,"div",58)(9,"div",59)(10,"h2",60),s(11),_(12,Xe,2,0,":svg:svg",61),_(13,Ze,2,0,":svg:svg",62),_(14,et,3,3,"span",63),o(),a(15,"button",64),C("click",function(){g(e);let r=m();return v(r.openRawJsonModal())}),s(16," Raw JSON "),o()(),a(17,"div",65)(18,"div",66)(19,"div",67),s(20),d(21,"transloco"),o(),a(22,"div",17),s(23),d(24,"formatNumber"),o()(),a(25,"div",66)(26,"div",67),s(27),d(28,"transloco"),o(),a(29,"div",17),s(30),o()(),_(31,tt,6,4,"div",66),a(32,"div",66)(33,"div",67),s(34),d(35,"transloco"),o(),a(36,"div",17),s(37),o(),_(38,it,2,0,"button",68),o()()(),a(39,"div",69)(40,"button",26),C("click",function(){g(e);let r=m();return v(r.togglePermissionsSection())}),a(41,"span",30),s(42),d(43,"transloco"),o(),w(),a(44,"svg",32),y(45,"path",33),o()(),_(46,nt,132,140,"div",70),o(),F(),a(47,"div",69)(48,"button",26),C("click",function(){g(e);let r=m();return v(r.toggleLimitsSection())}),a(49,"span",30),s(50),d(51,"transloco"),o(),w(),a(52,"svg",32),y(53,"path",33),o()(),_(54,at,38,48,"div",70),o(),F(),a(55,"div",69)(56,"button",26),C("click",function(){g(e);let r=m();return v(r.toggleContactSection())}),a(57,"span",30),s(58),d(59,"transloco"),o(),w(),a(60,"svg",32),y(61,"path",33),o()(),_(62,rt,23,29,"div",71),o(),F(),a(63,"div",69)(64,"button",26),C("click",function(){g(e);let r=m();return v(r.toggleKudosDetailsSection())}),a(65,"span",30),s(66),d(67,"transloco"),o(),w(),a(68,"svg",32),y(69,"path",33),o()(),_(70,st,2,1,"div",70),o(),_(71,bt,8,6,"div",69),_(72,Kt,8,6,"div",69),_(73,Ot,8,7,"div",69),_(74,ti,8,7,"div",69),_(75,ri,8,6,"div",69),o()}if(i&2){let e=m();E("panel-unsaved",e.isDirty()),n(),u(e.selectedUser().deleted?1:-1),n(),E("unsaved-changes-warning-hidden",!e.isDirty()),n(4),x(c(7,43,"admin.users.unsaved_changes")),n(5),h(" ",e.selectedUser().username," "),n(),u(e.trustedValue()?12:-1),n(),u(e.flaggedValue()?13:-1),n(),u(e.selectedUser().moderator?14:-1),n(6),h(" ",c(21,45,"admin.users.field.kudos")," "),n(3),h(" ",c(24,47,e.selectedUser().kudos)," "),n(4),h(" ",c(28,49,"admin.users.field.worker_count")," "),n(3),h(" ",e.selectedUser().worker_count," "),n(),u(e.selectedUser().evaluating_kudos!==void 0?31:-1),n(),E("border-2",e.selectedUser().suspicious>10&&!e.trustedValue())("border-red-500",e.selectedUser().suspicious>10&&!e.trustedValue()),n(2),h(" ",c(35,51,"admin.users.field.suspicious")," "),n(3),h(" ",e.selectedUser().suspicious," "),n(),u(e.selectedUser().suspicious>0?38:-1),n(4),x(c(43,53,"admin.users.section.permissions")),n(2),E("expanded",e.permissionsExpanded()),n(2),u(e.permissionsExpanded()?46:-1),n(4),x(c(51,55,"admin.users.section.limits")),n(2),E("expanded",e.limitsExpanded()),n(2),u(e.limitsExpanded()?54:-1),n(4),x(c(59,57,"admin.users.section.contact")),n(2),E("expanded",e.contactExpanded()),n(2),u(e.contactExpanded()?62:-1),n(4),x(c(67,59,"admin.users.section.kudos_details")),n(2),E("expanded",e.kudosDetailsExpanded()),n(2),u(e.kudosDetailsExpanded()?70:-1),n(),u(e.selectedUser().records?71:-1),n(),u(e.hasActiveGenerations(e.selectedUser())?72:-1),n(),u(e.selectedUser().styles&&e.selectedUser().styles.length>0?73:-1),n(),u(e.selectedUser().sharedkey_ids&&e.selectedUser().sharedkey_ids.length>0?74:-1),n(),u(e.selectedUser().worker_ids&&e.selectedUser().worker_ids.length>0?75:-1)}}function li(i,l){if(i&1){let e=V();a(0,"button",132),C("click",function(){g(e);let r=m();return v(r.saveChanges())}),s(1),d(2,"transloco"),o()}if(i&2){let e=m();k("disabled",e.isSaving()),n(),h(" ",c(2,2,"admin.users.save")," ")}}var ee="admin_user_history",di=30,Ni=(()=>{let l=class l{constructor(){this.title=T(fe),this.translator=T(Se),this.destroyRef=T(oe),this.userService=T(Ve),this.workerService=T(Ee),this.platformId=T(G),this.route=T(ge),this.auth=T(q),this.searchQuery=f(""),this.loading=f(!1),this.selectedUser=f(null),this.userNotFound=f(!1),this.userWorkers=f([]),this.loadingWorkers=f(!1),this.userSharedKeys=f([]),this.loadingSharedKeys=f(!1),this.sharedKeysFetched=f(!1),this.workersExpanded=f(!1),this.permissionsExpanded=f(!0),this.limitsExpanded=f(!0),this.contactExpanded=f(!1),this.kudosDetailsExpanded=f(!1),this.recordsExpanded=f(!1),this.activeGenerationsExpanded=f(!1),this.stylesExpanded=f(!1),this.sharedKeysExpanded=f(!1),this.rawJsonModalOpen=f(!1),this.trustedValue=f(!1),this.flaggedValue=f(!1),this.workerInvitesValue=f(0),this.moderatorValue=f(!1),this.publicWorkersValue=f(!1),this.customizerValue=f(!1),this.serviceValue=f(!1),this.educationValue=f(!1),this.specialValue=f(!1),this.filteredValue=f(!1),this.vpnValue=f(!1),this.usageMultiplierValue=f(1),this.concurrencyValue=f(0),this.monthlyKudosValue=f(0),this.contactValue=f(""),this.adminCommentValue=f(""),this.isRegeneratingPasskey=f(!1),this.isDirty=f(!1),this.isSaving=f(!1),this.userJson=b(()=>R(this.selectedUser())),this.workersJson=b(()=>R(this.userWorkers())),this.sharedKeysJson=b(()=>R(this.userSharedKeys())),this.stylesJson=b(()=>R(this.selectedUser()?.styles??[])),this.userJsonHighlighted=b(()=>N(this.userJson())),this.workersJsonHighlighted=b(()=>N(this.workersJson())),this.sharedKeysJsonHighlighted=b(()=>N(this.sharedKeysJson())),this.stylesJsonHighlighted=b(()=>N(this.stylesJson())),this.trustedChanged=b(()=>{let t=this.selectedUser();return t?this.trustedValue()!==t.trusted:!1}),this.flaggedChanged=b(()=>{let t=this.selectedUser();return t?this.flaggedValue()!==t.flagged:!1}),this.moderatorChanged=b(()=>{let t=this.selectedUser();return t?this.moderatorValue()!==t.moderator:!1}),this.publicWorkersChanged=b(()=>{let t=this.selectedUser();return t?this.publicWorkersValue()!==(t.public_workers??!1):!1}),this.customizerChanged=b(()=>{let t=this.selectedUser();return t?this.customizerValue()!==(t.customizer??!1):!1}),this.serviceChanged=b(()=>{let t=this.selectedUser();return t?this.serviceValue()!==(t.service??!1):!1}),this.educationChanged=b(()=>{let t=this.selectedUser();return t?this.educationValue()!==(t.education??!1):!1}),this.specialChanged=b(()=>{let t=this.selectedUser();return t?this.specialValue()!==(t.special??!1):!1}),this.filteredChanged=b(()=>{let t=this.selectedUser();return t?this.filteredValue()!==(t.filtered??!1):!1}),this.vpnChanged=b(()=>{let t=this.selectedUser();return t?this.vpnValue()!==(t.vpn??!1):!1}),this.workerInvitesChanged=b(()=>{let t=this.selectedUser();return t?this.workerInvitesValue()!==t.worker_invited:!1}),this.usageMultiplierChanged=b(()=>{let t=this.selectedUser();return t?this.usageMultiplierValue()!==(t.usage_multiplier??1):!1}),this.concurrencyChanged=b(()=>{let t=this.selectedUser();return t?this.concurrencyValue()!==(t.concurrency??0):!1}),this.monthlyKudosChanged=b(()=>{let t=this.selectedUser();return t?this.monthlyKudosValue()!==(t.monthly_kudos?.amount??0):!1}),this.contactChanged=b(()=>{let t=this.selectedUser();return t?this.contactValue().trim()!==(t.contact??""):!1}),this.adminCommentChanged=b(()=>{let t=this.selectedUser();return t?this.adminCommentValue().trim()!==(t.admin_comment??""):!1}),this.dialogOpen=f(!1),this.dialogType=f("resetSuspicion"),this.isUpdating=f(!1),this.toasts=f([]),this.userHistory=f([]),this.historyExpanded=f(!1),this.fieldSignals={trusted:this.trustedValue,flagged:this.flaggedValue,moderator:this.moderatorValue,publicWorkers:this.publicWorkersValue,customizer:this.customizerValue,service:this.serviceValue,education:this.educationValue,special:this.specialValue,filtered:this.filteredValue,vpn:this.vpnValue,workerInvites:this.workerInvitesValue,usageMultiplier:this.usageMultiplierValue,concurrency:this.concurrencyValue,monthlyKudos:this.monthlyKudosValue,contact:this.contactValue,adminComment:this.adminCommentValue}}ngOnInit(){ie([this.translator.get("admin.users.title"),this.translator.get("app_title")]).pipe(B(this.destroyRef)).subscribe(([r,p])=>{this.title.setTitle(`${r} | ${p}`)}),this.loadUserHistory();let t=this.route.snapshot.paramMap.get("userId");if(t)this.searchQuery.set(t),this.searchUser();else{let r=this.userHistory();if(r.length>0){let p=r[0];this.searchQuery.set(p.id.toString()),this.searchUser()}}}onSearchChange(t){let r=t.target;this.searchQuery.set(r.value)}searchUser(){let t=this.searchQuery().trim();if(!t)return;this.loading.set(!0),this.clearToasts(),this.userNotFound.set(!1),this.selectedUser.set(null),this.userWorkers.set([]),this.workersExpanded.set(!1),this.userSharedKeys.set([]),this.sharedKeysFetched.set(!1),this.sharedKeysExpanded.set(!1);let r=null,p=parseInt(t,10);if(!isNaN(p))r=p;else{let S=t.match(/#(\d+)$/);S&&(r=parseInt(S[1],10))}r!==null?this.userService.getUser(r).pipe(B(this.destroyRef),K(()=>this.loading.set(!1))).subscribe({next:S=>{S?(this.setSelectedUser(S),this.addToUserHistory(S)):this.userNotFound.set(!0)},error:()=>{this.userNotFound.set(!0),this.showToast("error","Failed to load user data.")}}):(this.loading.set(!1),this.userNotFound.set(!0))}setSelectedUser(t){this.selectedUser.set(t),this.trustedValue.set(t.trusted),this.flaggedValue.set(t.flagged),this.workerInvitesValue.set(t.worker_invited),this.moderatorValue.set(t.moderator??!1),this.publicWorkersValue.set(t.public_workers??!1),this.customizerValue.set(t.customizer??!1),this.serviceValue.set(t.service??!1),this.educationValue.set(t.education??!1),this.specialValue.set(t.special??!1),this.filteredValue.set(t.filtered??!1),this.vpnValue.set(t.vpn??!1),this.usageMultiplierValue.set(t.usage_multiplier??1),this.concurrencyValue.set(t.concurrency??0),this.monthlyKudosValue.set(t.monthly_kudos?.amount??0),this.contactValue.set(t.contact??""),this.adminCommentValue.set(t.admin_comment??""),this.isDirty.set(!1)}onFieldChange(t,r){let p=r.target,S=this.fieldSignals[t];if(p instanceof HTMLInputElement&&p.type==="checkbox")S.set(p.checked);else if(p instanceof HTMLInputElement&&p.type==="number"){let M=p.value;if(t==="usageMultiplier"){let L=parseFloat(M);S.set(Number.isFinite(L)?L:1)}else S.set(parseInt(M,10)||0)}else S.set(p.value);this.checkDirty()}checkDirty(){let t=this.selectedUser();t&&this.isDirty.set(this.trustedValue()!==t.trusted||this.flaggedValue()!==t.flagged||this.moderatorValue()!==t.moderator||this.publicWorkersValue()!==(t.public_workers??!1)||this.customizerValue()!==(t.customizer??!1)||this.serviceValue()!==(t.service??!1)||this.educationValue()!==(t.education??!1)||this.specialValue()!==(t.special??!1)||this.filteredValue()!==(t.filtered??!1)||this.vpnValue()!==(t.vpn??!1)||this.workerInvitesValue()!==t.worker_invited||this.usageMultiplierValue()!==(t.usage_multiplier??1)||this.concurrencyValue()!==(t.concurrency??0)||this.monthlyKudosValue()!==(t.monthly_kudos?.amount??0)||this.contactValue().trim()!==(t.contact??"")||this.adminCommentValue().trim()!==(t.admin_comment??""))}saveChanges(){let t=this.selectedUser();if(!t||!this.isDirty())return;this.isSaving.set(!0);let r={};this.trustedValue()!==t.trusted&&(r.trusted=this.trustedValue()),this.flaggedValue()!==t.flagged&&(r.flagged=this.flaggedValue()),this.workerInvitesValue()!==t.worker_invited&&(r.worker_invite=this.workerInvitesValue()),this.moderatorValue()!==t.moderator&&(r.moderator=this.moderatorValue()),this.publicWorkersValue()!==(t.public_workers??!1)&&(r.public_workers=this.publicWorkersValue()),this.customizerValue()!==(t.customizer??!1)&&(r.customizer=this.customizerValue()),this.serviceValue()!==(t.service??!1)&&(r.service=this.serviceValue()),this.educationValue()!==(t.education??!1)&&(r.education=this.educationValue()),this.specialValue()!==(t.special??!1)&&(r.special=this.specialValue()),this.filteredValue()!==(t.filtered??!1)&&(r.filtered=this.filteredValue()),this.vpnValue()!==(t.vpn??!1)&&(r.vpn=this.vpnValue()),this.usageMultiplierValue()!==(t.usage_multiplier??1)&&(r.usage_multiplier=this.usageMultiplierValue()),this.concurrencyValue()!==(t.concurrency??0)&&(r.concurrency=this.concurrencyValue()),this.monthlyKudosValue()!==(t.monthly_kudos?.amount??0)&&(r.monthly_kudos=this.monthlyKudosValue()),this.contactValue().trim()!==(t.contact??"")&&(r.contact=this.contactValue().trim()||void 0),this.adminCommentValue().trim()!==(t.admin_comment??"")&&(r.admin_comment=this.adminCommentValue().trim()||void 0),this.userService.updateUser(t.id,r).pipe(B(this.destroyRef),K(()=>this.isSaving.set(!1))).subscribe({next:p=>{p&&(this.userService.getUser(t.id).pipe(B(this.destroyRef)).subscribe(S=>{S&&this.setSelectedUser(S)}),this.showToast("success","Changes saved successfully."))},error:()=>{this.showToast("error","Failed to save changes.")}})}toggleWorkersSection(){let t=!this.workersExpanded();this.workersExpanded.set(t),t&&this.userWorkers().length===0&&this.loadUserWorkers()}togglePermissionsSection(){this.permissionsExpanded.set(!this.permissionsExpanded())}toggleLimitsSection(){this.limitsExpanded.set(!this.limitsExpanded())}toggleContactSection(){this.contactExpanded.set(!this.contactExpanded())}toggleKudosDetailsSection(){this.kudosDetailsExpanded.set(!this.kudosDetailsExpanded())}toggleRecordsSection(){this.recordsExpanded.set(!this.recordsExpanded())}toggleActiveGenerationsSection(){this.activeGenerationsExpanded.set(!this.activeGenerationsExpanded())}toggleStylesSection(){this.stylesExpanded.set(!this.stylesExpanded())}toggleSharedKeysSection(){let t=!this.sharedKeysExpanded();this.sharedKeysExpanded.set(t),t&&!this.sharedKeysFetched()&&this.loadUserSharedKeys()}openRawJsonModal(){let t=this.selectedUser();t&&(t.worker_ids?.length&&this.userWorkers().length===0&&!this.loadingWorkers()&&this.loadUserWorkers(),t.sharedkey_ids?.length&&!this.sharedKeysFetched()&&!this.loadingSharedKeys()&&this.loadUserSharedKeys(),this.rawJsonModalOpen.set(!0))}closeRawJsonModal(){this.rawJsonModalOpen.set(!1)}loadUserSharedKeys(){let t=this.selectedUser();!t||!t.sharedkey_ids||t.sharedkey_ids.length===0||(this.loadingSharedKeys.set(!0),this.userService.getSharedKeysByIds(t.sharedkey_ids).pipe(B(this.destroyRef),K(()=>this.loadingSharedKeys.set(!1))).subscribe({next:r=>{this.userSharedKeys.set(r),this.sharedKeysFetched.set(!0)},error:()=>{this.sharedKeysFetched.set(!0),this.showToast("error","Failed to load shared keys.")}}))}hasActiveGenerations(t){if(!t||!t.active_generations)return!1;let r=t.active_generations;return(r.image?.length??0)>0||(r.text?.length??0)>0||(r.alchemy?.length??0)>0}loadUserWorkers(){let t=this.selectedUser();!t||!t.worker_ids||t.worker_ids.length===0||(this.loadingWorkers.set(!0),this.workerService.getWorkersByIds(t.worker_ids).pipe(B(this.destroyRef),K(()=>this.loadingWorkers.set(!1))).subscribe({next:r=>{this.userWorkers.set(r)},error:()=>{this.showToast("error","Failed to load workers.")}}))}openResetSuspicionDialog(){this.dialogType.set("resetSuspicion"),this.dialogOpen.set(!0)}closeDialog(){this.dialogOpen.set(!1)}confirmDialog(){let t=this.selectedUser();if(!t)return;this.isUpdating.set(!0),this.userService.resetSuspicion(t.id).pipe(B(this.destroyRef),K(()=>{this.isUpdating.set(!1),this.closeDialog()})).subscribe({next:p=>{p&&(this.userService.getUser(t.id).pipe(B(this.destroyRef)).subscribe(S=>{S&&this.setSelectedUser(S)}),this.showToast("success","Suspicion reset successfully."))},error:()=>{this.showToast("error","Failed to reset suspicion.")}})}onWorkerUpdated(){this.loadUserWorkers()}regenerateProxyPasskey(){let t=this.selectedUser();t&&(this.isRegeneratingPasskey.set(!0),this.userService.updateUser(t.id,{generate_proxy_passkey:!0}).pipe(B(this.destroyRef),K(()=>this.isRegeneratingPasskey.set(!1))).subscribe({next:r=>{r&&this.userService.getUser(t.id).pipe(B(this.destroyRef)).subscribe(p=>{p&&this.setSelectedUser(p)})},error:()=>{this.showToast("error","Failed to regenerate passkey.")}}))}showToast(t,r,p=t==="success"){let S=`toast-${Date.now()}-${Math.random().toString(36).slice(2,7)}`;this.toasts.update(M=>[...M,{id:S,type:t,message:r}]),p&&setTimeout(()=>this.dismissToast(S),3e3)}dismissToast(t){this.toasts.update(r=>r.filter(p=>p.id!==t))}clearToasts(){this.toasts.set([])}loadUserHistory(){if(A(this.platformId))try{let t=localStorage.getItem(ee);if(t){let r=JSON.parse(t);this.userHistory.set(r)}}catch(t){console.error("Failed to load user history:",t),this.userHistory.set([])}}addToUserHistory(t){if(!A(this.platformId))return;let p=this.userHistory().filter(L=>L.id!==t.id),M=[{id:t.id,username:t.username,timestamp:Date.now()},...p].slice(0,di);this.userHistory.set(M);try{localStorage.setItem(ee,JSON.stringify(M))}catch(L){console.error("Failed to save user history:",L)}}toggleHistorySection(){this.historyExpanded.set(!this.historyExpanded())}selectUserFromHistory(t){this.searchQuery.set(t.id.toString()),this.searchUser()}clearUserHistory(){if(this.userHistory.set([]),!!A(this.platformId))try{localStorage.removeItem(ee)}catch(t){console.error("Failed to clear user history:",t)}}};l.\u0275fac=function(r){return new(r||l)},l.\u0275cmp=z({type:l,selectors:[["app-user-management"]],decls:25,vars:30,consts:[[3,"dismiss","toasts"],["variant","danger",3,"confirm","cancel","open","title","confirmLabel","cancelLabel","loading"],[1,"admin-container"],[1,"admin-heading-page"],[1,"panel","mb-6"],[1,"mb-6"],[1,"flex","gap-3"],["type","text",1,"form-input","flex-1",3,"input","keydown.enter","value","placeholder"],[1,"btn-primary",3,"click","disabled"],[1,"admin-loading"],[1,"admin-empty"],[1,"panel",3,"panel-unsaved"],[1,"btn-save-fixed",3,"disabled"],[1,"modal"],[1,"modal-backdrop",3,"click"],["role","dialog","aria-modal","true","aria-label","Raw JSON",1,"dialog-panel","json-dialog"],[1,"flex","items-center","justify-between","mb-4"],[1,"admin-heading-card"],[1,"btn-muted","text-sm",3,"click"],[1,"json-grid"],[1,"json-section"],[1,"json-section-title","admin-text-light"],["aria-label","User JSON",1,"json-block",3,"innerHTML"],["aria-label","Workers JSON",1,"json-block",3,"innerHTML"],["aria-label","Shared Keys JSON",1,"json-block",3,"innerHTML"],["aria-label","Styles JSON",1,"json-block",3,"innerHTML"],[1,"expandable-header",3,"click"],[1,"flex","items-center","gap-2"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-5","h-5","admin-text-muted"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"],[1,"admin-text-light"],["title","Clear history",1,"btn-muted","text-sm","px-2","py-1"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"expandable-icon"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M19 9l-7 7-7-7"],[1,"p-4","pt-0"],["title","Clear history",1,"btn-muted","text-sm","px-2","py-1",3,"click"],[1,"admin-grid-history"],[1,"list-item-button"],[1,"list-item-button",3,"click"],[1,"flex","items-center","justify-between"],[1,"flex-1","min-w-0"],[1,"admin-text-white","truncate"],[1,"admin-text-muted","text-sm"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-4","h-4","admin-icon-muted","shrink-0","ml-2"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M9 5l7 7-7 7"],["fill","none","viewBox","0 0 24 24",1,"admin-spinner"],["cx","12","cy","12","r","10","stroke","currentColor","stroke-width","4",1,"admin-spinner-track"],["fill","currentColor","d","M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z",1,"admin-spinner-head"],[1,"admin-loading-text"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"admin-empty-icon"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"],[1,"admin-empty-text"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"],[1,"panel"],[1,"bg-red-900/50","border-b","border-red-700","px-6","py-3","flex","items-center","gap-3"],[1,"unsaved-changes-warning"],["fill","currentColor","viewBox","0 0 20 20",1,"w-5","h-5"],["fill-rule","evenodd","d","M8.485 2.495c.673-1.167 2.357-1.167 3.03 0l6.28 10.875c.673 1.167-.17 2.625-1.516 2.625H3.72c-1.347 0-2.189-1.458-1.515-2.625L8.485 2.495zM10 5a.75.75 0 01.75.75v3.5a.75.75 0 01-1.5 0v-3.5A.75.75 0 0110 5zm0 9a1 1 0 100-2 1 1 0 000 2z","clip-rule","evenodd"],[1,"p-6","pb-3"],[1,"flex","items-center","justify-between","mb-6"],[1,"admin-heading-section","flex","items-center","gap-2"],["fill","currentColor","viewBox","0 0 20 20","aria-label","Trusted user",1,"w-5","h-5","text-green-400"],["fill","currentColor","viewBox","0 0 20 20","aria-label","Flagged user",1,"w-5","h-5","text-red-400"],[1,"admin-badge-moderator"],["type","button",1,"btn-muted","text-sm",3,"click"],[1,"admin-grid-stats-4","mb-6"],[1,"admin-bg-dark","rounded-lg","p-3"],[1,"text-xs","admin-text-muted","mb-1"],[1,"btn-danger","text-xs","mt-2","px-2","py-1"],[1,"admin-border-t"],[1,"p-6","pt-4"],[1,"p-6","pt-4","space-y-4"],["fill","currentColor","viewBox","0 0 20 20",1,"w-5","h-5","text-red-400"],[1,"text-red-300"],["fill-rule","evenodd","d","M10 18a8 8 0 100-16 8 8 0 000 16zm3.857-9.809a.75.75 0 00-1.214-.882l-3.483 4.79-1.88-1.88a.75.75 0 10-1.06 1.061l2.5 2.5a.75.75 0 001.137-.089l4-5.5z","clip-rule","evenodd"],["fill-rule","evenodd","d","M10 18a8 8 0 100-16 8 8 0 000 16zM8.28 7.22a.75.75 0 00-1.06 1.06L8.94 10l-1.72 1.72a.75.75 0 101.06 1.06L10 11.06l1.72 1.72a.75.75 0 101.06-1.06L11.06 10l1.72-1.72a.75.75 0 00-1.06-1.06L10 8.94 8.28 7.22z","clip-rule","evenodd"],[1,"btn-danger","text-xs","mt-2","px-2","py-1",3,"click"],[1,"admin-grid-permissions"],[1,"field-row-compact"],[1,"field-label"],[1,"field-label-text"],[1,"field-label-desc"],[1,"toggle-switch"],["type","checkbox",3,"change","checked"],[1,"toggle-switch-track"],[1,"toggle-switch-thumb"],[1,"admin-grid-limits","gap-4"],[1,"field-label-text","block","mb-1"],[1,"field-label-desc","mb-2"],["type","number","min","0",1,"form-input","w-full",3,"input","value"],["type","number","step","0.1","min","0.1",1,"form-input","w-full",3,"input","value"],[1,"field-row-stacked"],[1,"field-label","max-w-sm"],["type","text","placeholder","email@example.com",1,"form-input","flex-1",3,"input","value"],[1,"field-label","pt-2","max-w-sm"],[1,"form-input","flex-1","min-h-20",3,"input","value","placeholder"],[1,"flex","items-center","justify-between","py-2","admin-border-t","gap-3","pt-4"],[1,"flex","flex-col"],[1,"text-xs","admin-icon-muted"],[1,"admin-text-white","font-mono","text-sm","break-all"],[1,"btn-primary","whitespace-nowrap",3,"click","disabled"],["variant","admin",3,"kudosDetails"],[1,"grid","grid-cols-1","md:grid-cols-2","gap-6"],[1,"admin-bg-dark","rounded-lg","p-4"],[1,"text-sm","font-medium","admin-text-light","mb-3"],[1,"space-y-2","text-sm"],[1,"flex","justify-between"],[1,"admin-text-muted"],[1,"space-y-4"],[1,"text-sm","font-medium","admin-text-light","mb-2"],[1,"flex","flex-wrap","gap-2"],[1,"text-xs","font-mono","admin-bg-dark","px-2","py-1","rounded"],[1,"text-xs","admin-text-muted"],[1,"admin-text-light","text-sm"],[1,"text-xs","font-mono","admin-text-muted"],[1,"p-4"],[1,"admin-text-muted","text-center","py-4"],["fill","none","viewBox","0 0 24 24",1,"admin-spinner","w-6","h-6"],[1,"admin-bg-dark","rounded-lg","p-4","space-y-3"],[1,"flex","items-start","justify-between","gap-2"],[1,"min-w-0","flex-1"],[1,"admin-text-white","font-medium","truncate"],[1,"text-xs","font-mono","admin-text-muted","truncate",3,"title"],[1,"text-xs","admin-text-muted","whitespace-nowrap"],[1,"grid","grid-cols-2","gap-2","text-sm"],[1,"admin-text-light","ml-1"],[1,"grid","grid-cols-3","gap-2","text-xs"],[1,"admin-bg-darker","rounded","p-2"],[1,"admin-text-muted","mb-1"],[1,"admin-grid-workers"],[3,"worker","isModerator"],[3,"workerUpdated","worker","isModerator"],[1,"btn-save-fixed",3,"click","disabled"]],template:function(r,p){if(r&1&&(a(0,"app-admin-toast-bar",0),C("dismiss",function(M){return p.dismissToast(M)}),o(),a(1,"app-admin-dialog",1),d(2,"transloco"),d(3,"transloco"),d(4,"transloco"),C("confirm",function(){return p.confirmDialog()})("cancel",function(){return p.closeDialog()}),o(),re(5,je,1,1),se(6,5),a(8,"div",2)(9,"h1",3),s(10),d(11,"transloco"),o(),_(12,Ge,12,5,"div",4),a(13,"div",5)(14,"div",6)(15,"input",7),d(16,"transloco"),C("input",function(M){return p.onSearchChange(M)})("keydown.enter",function(){return p.searchUser()}),o(),a(17,"button",8),C("click",function(){return p.searchUser()}),s(18),d(19,"transloco"),o()()(),_(20,$e,7,3,"div",9)(21,qe,6,3,"div",10)(22,Qe,6,3,"div",10)(23,si,76,61,"div",11),o(),_(24,li,3,4,"button",12)),r&2){let S;k("toasts",p.toasts()),n(),k("open",p.dialogOpen())("title",X(2,15,"admin.users.dialog.reset_suspicion_title",_e(28,Ae,(S=p.selectedUser())==null?null:S.username)))("confirmLabel",c(3,18,"admin.users.dialog.confirm"))("cancelLabel",c(4,20,"admin.users.dialog.cancel"))("loading",p.isUpdating()),n(5),le(p.rawJsonModalOpen()),n(4),x(c(11,22,"admin.users.title")),n(2),u(p.userHistory().length>0?12:-1),n(3),k("value",p.searchQuery())("placeholder",c(16,24,"admin.users.search_placeholder")),n(2),k("disabled",p.loading()||!p.searchQuery()),n(),h(" ",c(19,26,"admin.users.search_button")," "),n(2),u(p.loading()?20:p.userNotFound()?21:p.selectedUser()?23:22),n(4),u(p.isDirty()?24:-1)}},dependencies:[ve,ye,ke,we,be,he,Me,Te,Ue],styles:[".json-dialog[_ngcontent-%COMP%]{max-width:none;width:calc(100vw - 2rem);height:calc(100vh - 2rem);padding:1rem;display:flex;flex-direction:column}.json-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(260px,1fr));gap:12px;flex:1;overflow:auto;align-items:stretch}.json-section[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:6px;min-height:0;height:100%}.json-section-title[_ngcontent-%COMP%]{font-size:.95rem;font-weight:600;color:var(--color-text-primary)}.dark[_nghost-%COMP%]   .json-section-title[_ngcontent-%COMP%], .dark   [_nghost-%COMP%]   .json-section-title[_ngcontent-%COMP%]{color:#fff}.json-block[_ngcontent-%COMP%]{font-family:ui-monospace,SFMono-Regular,Consolas,Liberation Mono,Menlo,monospace;font-size:12px;line-height:1.4;white-space:pre-wrap;word-break:break-word;background:var(--color-bg-secondary);color:var(--color-text-primary);padding:12px;border-radius:8px;border:1px solid var(--color-border-primary);overflow:auto;flex:1;min-height:0}.dark[_nghost-%COMP%]   .json-block[_ngcontent-%COMP%], .dark   [_nghost-%COMP%]   .json-block[_ngcontent-%COMP%]{background:#0f172a;color:#e2e8f0;border-color:#ffffff14}"],changeDetection:0});let i=l;return i})();export{Ni as UserManagementComponent};
