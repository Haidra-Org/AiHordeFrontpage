import{c as q}from"./chunk-BMIYH3UD.js";import{d as Y}from"./chunk-3GXWXVSS.js";import{c as Z}from"./chunk-GZDNXZTC.js";import{Cb as z,Db as f,Oa as m,Qb as J,Rb as g,S as H,Sb as v,Tb as $,X as I,Za as k,aa as T,ba as P,fa as R,gb as B,gc as F,hc as D,ja as V,nb as j,nc as h,ob as C,pa as U,pb as w,qb as N,rb as Q,rc as W,sb as A,ta as L,tb as G,ub as u,vb as _,wb as b,zb as X}from"./chunk-QF4LG6ZD.js";function rt(o,a){if(o&1&&(u(0,"span",6),g(1),F(2,"transloco"),_()),o&2){let n=f().$implicit;m(),v(D(2,1,n))}}function at(o,a){if(o&1&&(g(0),F(1,"transloco")),o&2){let n=f().$implicit;$(" ",D(1,1,n)," ")}}function st(o,a){o&1&&b(0,"br")}function lt(o,a){if(o&1&&(b(0,"br"),C(1,st,1,0,"br")),o&2){let n=f().$index;m(),w(n===0||n===1?1:-1)}}function pt(o,a){if(o&1&&(C(0,rt,3,3,"span",6)(1,at,2,3),C(2,lt,2,1)),o&2){let n=a.$index,t=f(2);w(n===0||n===2?0:1),m(2),w(n<t.unit().explanationKeys.length-1?2:-1)}}function ft(o,a){if(o&1){let n=X();u(0,"span",1),z("mouseenter",function(){T(n);let e=f();return P(e.showTooltip())})("mouseleave",function(){T(n);let e=f();return P(e.hideTooltip())})("focusin",function(){T(n);let e=f();return P(e.showTooltip())})("focusout",function(){T(n);let e=f();return P(e.hideTooltip())}),u(1,"span",2),g(2),_(),u(3,"span",3)(4,"strong",4),g(5),_(),b(6,"br"),u(7,"span",5),g(8),_(),b(9,"br")(10,"br"),Q(11,pt,3,2,null,null,N),_()()}if(o&2){let n=f();J(n.positionClasses()),j("data-tooltip-position",n.position()),m(2),v(n.primaryDisplay()),m(),G("ngStyle",n.tooltipStyles()),m(2),v(n.tooltipBoldDisplay()),m(3),$("(",n.tooltipMutedDisplay(),")"),m(3),A(n.unit().explanationKeys)}}var mt=300,ct=280,c=16,tt=8,gt=(()=>{let a=class a{constructor(){this.elementRef=I(U),this.platformId=I(L),this.document=I(R),this.unit=W.required(),this.primaryOverride=W(null),this.swapDisplay=W(!1),this.position=W("auto"),this.isVisible=V(!1),this.autoDetectedPosition=V(""),this.fixedStyles=V({}),this.positionClasses=h(()=>{let t=this.position();if(t!=="auto"){let e=[];return t.includes("bottom")&&e.push("tooltip-pos-bottom"),(t.includes("left")||t==="left")&&e.push("tooltip-pos-left"),(t.includes("right")||t==="right")&&e.push("tooltip-pos-right"),e.join(" ")}return this.autoDetectedPosition()}),this.tooltipStyles=h(()=>{let t=this.isVisible(),e=this.fixedStyles();return{position:"fixed",top:e.top??"auto",bottom:e.bottom??"auto",left:e.left??"auto",right:e.right??"auto",transform:e.transform??"none",visibility:t?"visible":"hidden",opacity:t?"1":"0",pointerEvents:t?"auto":"none"}}),this.primaryDisplay=h(()=>{let t=this.primaryOverride();if(t)return t;let e=this.unit();return e?this.swapDisplay()?e.technical.formatted:e.primary.formatted:""}),this.technicalDisplay=h(()=>{let t=this.unit();return t?this.swapDisplay()?t.primary.formatted:t.technical.formatted:""}),this.tooltipBoldDisplay=h(()=>{let t=this.unit();return t?this.swapDisplay()?t.technical.formatted:t.primary.formatted:""}),this.tooltipMutedDisplay=h(()=>{let t=this.unit();return t?this.swapDisplay()?t.primary.formatted:t.technical.formatted:""}),B(()=>{this.calculateFixedPosition()})}showTooltip(){this.isVisible.set(!0),this.calculateFixedPosition()}hideTooltip(){this.isVisible.set(!1)}calculateFixedPosition(){if(!Z(this.platformId))return;let e=this.elementRef.nativeElement.querySelector(".tooltip-wrapper");if(!e)return;let i=e.getBoundingClientRect(),r=window.innerWidth,l=window.innerHeight,p=Math.min(mt,r-c*2),y=i.left+i.width/2,et=y-p/2,it=y+p/2,d=et<c,x=it>r-c,K=i.top,ot=l-i.bottom,O=K<ct+c&&ot>K,S=[];O&&S.push("tooltip-pos-bottom"),d&&!x?S.push("tooltip-pos-left"):x&&!d?S.push("tooltip-pos-right"):d&&x&&S.push("tooltip-pos-left"),this.autoDetectedPosition.set(S.join(" "));let s={position:"fixed"};O?(s.top=`${i.bottom+tt}px`,s.bottom=null):(s.bottom=`${l-i.top+tt}px`,s.top=null),d&&!x?(s.left=`${Math.max(c,i.left)}px`,s.right=null,s.transform="none"):x&&!d?(s.right=`${Math.max(c,r-i.right)}px`,s.left=null,s.transform="none"):d&&x?(s.left=`${c}px`,s.right=`${c}px`,s.transform="none"):(s.left=`${y}px`,s.right=null,s.transform="translateX(-50%)"),this.fixedStyles.set(s)}};a.\u0275fac=function(e){return new(e||a)},a.\u0275cmp=k({type:a,selectors:[["app-unit-tooltip"]],inputs:{unit:[1,"unit"],primaryOverride:[1,"primaryOverride"],swapDisplay:[1,"swapDisplay"],position:[1,"position"]},decls:1,vars:1,consts:[["tabindex","0","role","button","aria-describedby","tooltip-content",1,"tooltip-wrapper","tooltip-fixed-mode",3,"class"],["tabindex","0","role","button","aria-describedby","tooltip-content",1,"tooltip-wrapper","tooltip-fixed-mode",3,"mouseenter","mouseleave","focusin","focusout"],[1,"dotted-underline"],["role","tooltip","id","tooltip-content",1,"tooltip-text","tooltip-text-fixed",3,"ngStyle"],[1,"tooltip-highlight"],[1,"tooltip-muted"],[1,"tooltip-math"]],template:function(e,i){e&1&&C(0,ft,13,7,"span",0),e&2&&w(i.unit()?0:-1)},dependencies:[q,Y],encapsulation:2,changeDetection:0});let o=a;return o})();var M=[{threshold:1e15,prefix:"peta",short:"P"},{threshold:1e12,prefix:"tera",short:"T"},{threshold:1e9,prefix:"giga",short:"G"},{threshold:1e6,prefix:"mega",short:"M"},{threshold:1e3,prefix:"kilo",short:"K"},{threshold:1,prefix:"",short:""}],E=[{threshold:1e15,prefix:"quadrillion",short:"Q"},{threshold:1e12,prefix:"trillion",short:"T"},{threshold:1e9,prefix:"billion",short:"B"},{threshold:1e6,prefix:"million",short:"M"},{threshold:1e3,prefix:"thousand",short:"K"},{threshold:1,prefix:"",short:""}],St=(()=>{let a=class a{formatWithSiPrefix(t,e,i=1){let r=this.getSiPrefix(t),l=t/r.threshold,y=e.includes(" ")&&r.prefix?" ":"";return{value:l,prefix:r.prefix,prefixShort:r.short,unit:e,formatted:`${l.toFixed(i)} ${r.prefix}${y}${e}`,formattedShort:`${l.toFixed(i)}${r.short} ${e}`}}formatWithHumanPrefix(t,e,i=1){let r=this.getHumanPrefix(t),l=t/r.threshold,p=[l.toFixed(i)];return r.prefix&&p.push(r.prefix),e&&p.push(e),{value:l,prefix:r.prefix,prefixShort:r.short,unit:e,formatted:p.join(" "),formattedShort:`${l.toFixed(i)}${r.short} ${e}`}}getSiPrefix(t){let e=Math.abs(t);for(let i of M)if(e>=i.threshold)return i;return M[M.length-1]}formatImagePerformanceRate(t){let e=t/60,i=e/20;return{primary:this.formatWithSiPrefix(i,"standard images",1),technical:{value:e,prefix:"mega",prefixShort:"M",unit:"pixelsteps/sec",formatted:`${e.toFixed(2)} megapixelsteps/sec`,formattedShort:`${e.toFixed(2)} Mpixelsteps/sec`},rawValue:t,explanationKeys:["standard_images.tooltip.line1","standard_images.tooltip.line2","standard_images.tooltip.line3"]}}formatQueuedImageWork(t){let e=t/20;return{primary:this.formatWithSiPrefix(e,"standard images",1),technical:{value:t,prefix:"",prefixShort:"",unit:"megapixelsteps",formatted:`${t.toLocaleString(void 0,{maximumFractionDigits:0})} megapixelsteps`,formattedShort:`${t.toLocaleString(void 0,{maximumFractionDigits:0})} megapixelsteps`},rawValue:t,explanationKeys:["standard_images.tooltip.line1","standard_images.tooltip.line2","standard_images.tooltip.line3"]}}formatTotalPixelsteps(t){let i=t/1e6/20;return{primary:this.formatWithSiPrefix(t,"pixelsteps",1),technical:this.formatWithHumanPrefix(i,"standard images",1),rawValue:t,explanationKeys:["standard_images.tooltip.line1","standard_images.tooltip.line2","standard_images.tooltip.line3"]}}formatTextPerformanceRate(t){let e=t/60,i=e*.75/500;return{primary:this.formatWithSiPrefix(i,"pages/sec",2),technical:this.formatWithSiPrefix(e,"tokens/sec",1),rawValue:t,explanationKeys:["pages_of_text.tooltip.line1","pages_of_text.tooltip.line2","pages_of_text.tooltip.line3"]}}formatTotalTokens(t){let e=t*.75/500;return{primary:this.formatWithSiPrefix(t,"tokens",1),technical:this.formatWithHumanPrefix(e,"pages of text",1),rawValue:t,explanationKeys:["pages_of_text.tooltip.line1","pages_of_text.tooltip.line2","pages_of_text.tooltip.line3"]}}formatQueuedTokens(t){let e=t*.75/500;return{primary:this.formatWithSiPrefix(t,"tokens",1),technical:this.formatWithHumanPrefix(e,"pages of text",1),rawValue:t,explanationKeys:["pages_of_text.tooltip.line1","pages_of_text.tooltip.line2","pages_of_text.tooltip.line3"]}}formatQueuedTextWork(t){return this.formatQueuedTokens(t)}formatLargeNumber(t,e="",i=1){let r=this.getHumanPrefix(t),p=[(t/r.threshold).toFixed(i)];return r.prefix&&p.push(r.prefix),e&&p.push(e),p.join(" ")}formatLargeNumberTechnical(t,e="",i=1){return this.formatWithSiPrefix(t,e,i).formatted}getHumanPrefix(t){let e=Math.abs(t);for(let i of E)if(e>=i.threshold)return i;return E[E.length-1]}formatWithCommas(t,e=0){return t.toLocaleString(void 0,{minimumFractionDigits:e,maximumFractionDigits:e})}formatModelQueuedImage(t){let e=t/1e6,i=e/20;return{primary:this.formatWithSiPrefix(e,"mps",1),technical:this.formatWithHumanPrefix(i,"standard images",1),rawValue:t,explanationKeys:["mps.tooltip.line1","mps.tooltip.line2","standard_images.tooltip.line3"]}}formatModelQueuedText(t){let e=t*.75/500;return{primary:this.formatWithSiPrefix(t,"tokens",1),technical:this.formatWithHumanPrefix(e,"pages of text",1),rawValue:t,explanationKeys:["pages_of_text.tooltip.line1","pages_of_text.tooltip.line2","pages_of_text.tooltip.line3"]}}formatModelPerformanceImage(t){let e=t/1e6,i=e/20;return{primary:{value:e,prefix:"",prefixShort:"",unit:"mps/s",formatted:`${e.toFixed(2)} mps/s`,formattedShort:`${e.toFixed(2)} mps/s`},technical:this.formatWithSiPrefix(i,"std img/s",2),rawValue:t,explanationKeys:["mps.tooltip.line1","mps.tooltip.line2","standard_images.tooltip.line3"]}}formatModelPerformanceText(t){let e=t*.75/500;return{primary:this.formatWithSiPrefix(t,"tokens/s",1),technical:this.formatWithSiPrefix(e,"pages/s",3),rawValue:t,explanationKeys:["pages_of_text.tooltip.line1","pages_of_text.tooltip.line2","pages_of_text.tooltip.line3"]}}formatWorkerPerformanceImage(t){let e=t/20;return{primary:{value:t,prefix:"",prefixShort:"",unit:"mps/s",formatted:`${t.toFixed(2)} mps/s`,formattedShort:`${t.toFixed(2)} mps/s`},technical:this.formatWithSiPrefix(e,"std img/s",2),rawValue:t,explanationKeys:["mps.tooltip.line1","mps.tooltip.line2","standard_images.tooltip.line3"]}}formatWorkerPerformanceText(t){let e=t*.75/500;return{primary:this.formatWithSiPrefix(t,"tokens/s",1),technical:this.formatWithSiPrefix(e,"pages/s",3),rawValue:t,explanationKeys:["pages_of_text.tooltip.line1","pages_of_text.tooltip.line2","pages_of_text.tooltip.line3"]}}formatWorkerMegapixelstepsGenerated(t){let e=t/20;return{primary:this.formatWithSiPrefix(t,"mps",1),technical:this.formatWithHumanPrefix(e,"standard images",1),rawValue:t,explanationKeys:["mps.tooltip.line1","mps.tooltip.line2","standard_images.tooltip.line3"]}}formatWorkerTokensGenerated(t){let e=t*.75/500;return{primary:this.formatWithSiPrefix(t,"tokens",1),technical:this.formatWithHumanPrefix(e,"pages of text",1),rawValue:t,explanationKeys:["pages_of_text.tooltip.line1","pages_of_text.tooltip.line2","pages_of_text.tooltip.line3"]}}};a.\u0275fac=function(e){return new(e||a)},a.\u0275prov=H({token:a,factory:a.\u0275fac,providedIn:"root"});let o=a;return o})();export{gt as a,St as b};
