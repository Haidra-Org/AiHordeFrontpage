import{a as O}from"./chunk-VQOWBUFK.js";import{b as K}from"./chunk-JSI25OHT.js";import{a as j}from"./chunk-UEEPC3ZK.js";import{a as Z}from"./chunk-CRVG2NOB.js";import{b as L,e as R}from"./chunk-3B2Y74WR.js";import{a as H}from"./chunk-OBD3L7BG.js";import{a as M}from"./chunk-PZF2KSPB.js";import{c as z}from"./chunk-MXBDCOJX.js";import{l as $}from"./chunk-JHAYVYNF.js";import{k as U,m as F}from"./chunk-BPDV6QKT.js";import{Cb as T,Db as x,N as A,Oa as i,Ob as P,Rb as r,Sb as s,Tb as f,X as C,Za as q,aa as I,ba as B,dc as E,ga as D,gc as a,hc as l,ic as V,ja as b,k as w,nb as v,nc as h,ob as u,pb as _,r as N,tb as g,ub as o,vb as n,wb as S,zb as k}from"./chunk-4EEEF725.js";import"./chunk-4CLCTAJ7.js";var G=e=>["/details/teams/owner",e],J=e=>({age:e}),Q=e=>["/details/workers/owner",e];function W(e,p){e&1&&(o(0,"section",1)(1,"div",2)(2,"div",3)(3,"h1",4),r(4),a(5,"transloco"),n()()()(),o(6,"section",5)(7,"div",6)(8,"div",7)(9,"div",8)(10,"div",9),S(11,"div",10)(12,"div",11)(13,"div",12),n()()()()()),e&2&&(i(4),s(l(5,1,"details.users.loading")))}function X(e,p){if(e&1&&(o(0,"section",1)(1,"div",2)(2,"div",3)(3,"h1",13),r(4),a(5,"transloco"),n()()()(),o(6,"section",5)(7,"div",6)(8,"div",7)(9,"div",14)(10,"p",15),r(11),a(12,"transloco"),n(),o(13,"a",16),r(14),a(15,"transloco"),n()()()()()),e&2){let t=x();i(4),f(" ",l(5,3,"details.users.error_title")," "),i(7),f(" ",l(12,5,t.error())," "),i(3),f(" ",l(15,7,"details.users.back_to_list")," ")}}function Y(e,p){if(e&1){let t=k();o(0,"button",18),T("click",function(){I(t);let m=x(2);return B(m.setActiveTab("records"))}),r(1),a(2,"transloco"),n()}if(e&2){let t=x(2);P("details-tab-active",t.activeTab()==="records"),i(),f(" ",l(2,3,"profile.tabs.detailed_records")," ")}}function ee(e,p){if(e&1&&(o(0,"p",26),r(1),a(2,"transloco"),n()),e&2){let t=x(3);i(),f(" ",V(2,1,"profile.account_age",E(4,J,t.formatAccountAge(t.user().account_age)))," ")}}function ie(e,p){e&1&&(o(0,"span",28),a(1,"transloco"),r(2),a(3,"transloco"),n()),e&2&&(v("title",l(1,2,"admin.users.desc.trusted")),i(2),s(l(3,4,"profile.badge.trusted")))}function te(e,p){e&1&&(o(0,"span",29),a(1,"transloco"),r(2),a(3,"transloco"),n()),e&2&&(v("title",l(1,2,"admin.users.desc.moderator")),i(2),s(l(3,4,"profile.badge.moderator")))}function ne(e,p){e&1&&(o(0,"span",30),a(1,"transloco"),r(2),a(3,"transloco"),n()),e&2&&(v("title",l(1,2,"admin.users.desc.education")),i(2),s(l(3,4,"profile.badge.education")))}function oe(e,p){e&1&&(o(0,"span",31),a(1,"transloco"),r(2),a(3,"transloco"),n()),e&2&&(v("title",l(1,2,"admin.users.desc.service")),i(2),s(l(3,4,"profile.badge.service")))}function ae(e,p){e&1&&(o(0,"span",32),a(1,"transloco"),r(2),a(3,"transloco"),n()),e&2&&(v("title",l(1,2,"admin.users.desc.customizer")),i(2),s(l(3,4,"profile.badge.customizer")))}function re(e,p){e&1&&(o(0,"span",33),a(1,"transloco"),r(2),a(3,"transloco"),n()),e&2&&(v("title",l(1,2,"admin.users.desc.special")),i(2),s(l(3,4,"profile.badge.special")))}function le(e,p){e&1&&(o(0,"span",33),r(1),a(2,"transloco"),n()),e&2&&(i(),f(" ",l(2,1,"profile.badge.anonymous")," "))}function de(e,p){e&1&&(o(0,"span",34),a(1,"transloco"),r(2),a(3,"transloco"),n()),e&2&&(v("title",l(1,2,"admin.users.desc.flagged")),i(2),s(l(3,4,"profile.badge.flagged")))}function se(e,p){if(e&1&&(o(0,"div",39)(1,"h4",40),r(2),a(3,"transloco"),n(),S(4,"app-kudos-breakdown-panel",47),n()),e&2){let t=x(3);i(2),f(" ",l(3,3,"profile.kudos_breakdown")," "),i(2),g("kudosDetails",t.user().kudos_details)("showZeroValues",!1)}}function pe(e,p){if(e&1&&(o(0,"div",42)(1,"span",43),r(2),a(3,"transloco"),n(),o(4,"span",48),r(5),a(6,"formatNumber"),n()()),e&2){let t,d=x(3);i(2),s(l(3,2,"profile.records.megapixelsteps")),i(3),f(" ",l(6,4,((t=d.user().contributions)==null?null:t.megapixelsteps)??((t=d.user().records)==null||t.contribution==null?null:t.contribution.megapixelsteps)??0)," ")}}function ce(e,p){if(e&1&&(o(0,"div",42)(1,"span",43),r(2),a(3,"transloco"),n(),o(4,"span",48),r(5),a(6,"formatNumber"),n()()),e&2){let t=x(3);i(2),s(l(3,2,"profile.records.tokens")),i(3),s(l(6,4,t.user().records.contribution.tokens??0))}}function me(e,p){if(e&1&&(o(0,"div",42)(1,"span",43),r(2),a(3,"transloco"),n(),o(4,"span",48),r(5),a(6,"formatNumber"),n()()),e&2){let t=x(3);i(2),s(l(3,2,"profile.records.fulfillments")),i(3),s(l(6,4,t.user().contributions.fulfillments??0))}}function ue(e,p){if(e&1&&(o(0,"a",46),r(1),a(2,"transloco"),o(3,"span",49),r(4),n()()),e&2){let t=x(3);g("routerLink",E(5,Q,t.user().id)),i(),f(" ",l(2,3,"details.users.view_workers")," "),i(3),s(t.user().worker_count)}}function _e(e,p){if(e&1&&(o(0,"div",8)(1,"div",21)(2,"div",22)(3,"span",23),r(4),n()(),o(5,"div",24)(6,"h2",25),r(7),n(),o(8,"p",26),r(9),n(),u(10,ee,3,6,"p",26),n()(),o(11,"div",27),u(12,ie,4,6,"span",28),u(13,te,4,6,"span",29),u(14,ne,4,6,"span",30),u(15,oe,4,6,"span",31),u(16,ae,4,6,"span",32),u(17,re,4,6,"span",33),u(18,le,3,3,"span",33),u(19,de,4,6,"span",34),n(),o(20,"h3",35),r(21),a(22,"transloco"),n(),o(23,"div",36)(24,"span",37),r(25),a(26,"formatNumber"),n(),o(27,"span",38),r(28),a(29,"transloco"),n()(),u(30,se,5,5,"div",39),o(31,"div",39)(32,"h4",40),r(33),a(34,"transloco"),n(),o(35,"div",41)(36,"div",42)(37,"span",43),r(38),a(39,"transloco"),n(),o(40,"span",44),r(41),n()(),u(42,pe,7,6,"div",42),u(43,ce,7,6,"div",42),u(44,me,7,6,"div",42),n()(),o(45,"div",39)(46,"h4",40),r(47),a(48,"transloco"),n(),o(49,"div",45),u(50,ue,5,7,"a",46),o(51,"a",46),r(52),a(53,"transloco"),n()()()()),e&2){let t,d,m,c=x(2);i(4),s(c.userInitial()),i(3),s(c.user().username),i(2),f("ID: ",c.user().id),i(),_(c.user().account_age?10:-1),i(2),_(c.user().trusted?12:-1),i(),_(c.user().moderator?13:-1),i(),_(c.user().education?14:-1),i(),_(c.user().service?15:-1),i(),_(c.user().customizer?16:-1),i(),_(c.user().special?17:-1),i(),_(c.user().pseudonymous?18:-1),i(),_(c.user().flagged?19:-1),i(2),s(l(22,26,"profile.kudos")),i(4),s(l(26,28,c.user().kudos)),i(3),s(l(29,30,"profile.kudos_balance")),i(2),_(c.user().kudos_details?30:-1),i(3),f(" ",l(34,32,"details.users.quick_stats")," "),i(5),s(l(39,34,"details.users.worker_count")),i(3),s(c.user().worker_count??0),i(),_((t=c.user().contributions)!=null&&t.megapixelsteps||!((t=c.user().records)==null||t.contribution==null)&&t.contribution.megapixelsteps?42:-1),i(),_(!((d=c.user().records)==null||d.contribution==null)&&d.contribution.tokens?43:-1),i(),_((m=c.user().contributions)!=null&&m.fulfillments?44:-1),i(3),f(" ",l(48,36,"details.users.related")," "),i(3),_((c.user().worker_count??0)>0&&c.user().worker_ids?50:-1),i(),g("routerLink",E(40,G,c.user().id)),i(),f(" ",l(53,38,"details.users.view_teams")," ")}}function xe(e,p){if(e&1&&(o(0,"div",53)(1,"span",43),r(2),a(3,"transloco"),n(),o(4,"span",48),r(5),a(6,"formatNumber"),n()()),e&2){let t,d=x(4);i(2),s(l(3,2,"profile.records.megapixelsteps")),i(3),f(" ",l(6,4,((t=d.user().contributions)==null?null:t.megapixelsteps)??((t=d.user().records)==null||t.contribution==null?null:t.contribution.megapixelsteps)??0)," ")}}function fe(e,p){if(e&1&&(o(0,"div",53)(1,"span",43),r(2),a(3,"transloco"),n(),o(4,"span",48),r(5),a(6,"formatNumber"),n()()),e&2){let t=x(4);i(2),s(l(3,2,"profile.records.tokens")),i(3),s(l(6,4,t.user().records.contribution.tokens??0))}}function ve(e,p){if(e&1&&(o(0,"div",51)(1,"h4",40),r(2),a(3,"transloco"),n(),o(4,"div",52),u(5,xe,7,6,"div",53),u(6,fe,7,6,"div",53),n()()),e&2){let t,d,m=x(3);i(2),f(" ",l(3,3,"profile.records.contribution")," "),i(3),_((t=m.user().contributions)!=null&&t.megapixelsteps||!((t=m.user().records)==null||t.contribution==null)&&t.contribution.megapixelsteps?5:-1),i(),_(!((d=m.user().records)==null||d.contribution==null)&&d.contribution.tokens?6:-1)}}function Ce(e,p){if(e&1&&(o(0,"div",42)(1,"span",43),r(2),a(3,"transloco"),n(),o(4,"span",48),r(5),a(6,"formatNumber"),n()()),e&2){let t=x(4);i(2),s(l(3,2,"profile.records.image")),i(3),s(l(6,4,t.user().records.request.image??0))}}function be(e,p){if(e&1&&(o(0,"div",42)(1,"span",43),r(2),a(3,"transloco"),n(),o(4,"span",48),r(5),a(6,"formatNumber"),n()()),e&2){let t=x(4);i(2),s(l(3,2,"profile.records.text")),i(3),s(l(6,4,t.user().records.request.text??0))}}function ge(e,p){if(e&1&&(o(0,"div",42)(1,"span",43),r(2),a(3,"transloco"),n(),o(4,"span",48),r(5),a(6,"formatNumber"),n()()),e&2){let t=x(4);i(2),s(l(3,2,"profile.records.interrogation")),i(3),s(l(6,4,t.user().records.request.interrogation??0))}}function he(e,p){if(e&1&&(o(0,"div",51)(1,"h4",40),r(2),a(3,"transloco"),n(),o(4,"div",54),u(5,Ce,7,6,"div",42),u(6,be,7,6,"div",42),u(7,ge,7,6,"div",42),n()()),e&2){let t=x(3);i(2),f(" ",l(3,4,"profile.records.requests")," "),i(3),_(t.user().records.request.image?5:-1),i(),_(t.user().records.request.text?6:-1),i(),_(t.user().records.request.interrogation?7:-1)}}function Se(e,p){if(e&1&&(o(0,"div",42)(1,"span",43),r(2),a(3,"transloco"),n(),o(4,"span",48),r(5),a(6,"formatNumber"),n()()),e&2){let t=x(4);i(2),s(l(3,2,"profile.records.image")),i(3),s(l(6,4,t.user().records.fulfillment.image??0))}}function Ee(e,p){if(e&1&&(o(0,"div",42)(1,"span",43),r(2),a(3,"transloco"),n(),o(4,"span",48),r(5),a(6,"formatNumber"),n()()),e&2){let t=x(4);i(2),s(l(3,2,"profile.records.text")),i(3),s(l(6,4,t.user().records.fulfillment.text??0))}}function Ie(e,p){if(e&1&&(o(0,"div",42)(1,"span",43),r(2),a(3,"transloco"),n(),o(4,"span",48),r(5),a(6,"formatNumber"),n()()),e&2){let t=x(4);i(2),s(l(3,2,"profile.records.interrogation")),i(3),s(l(6,4,t.user().records.fulfillment.interrogation??0))}}function Be(e,p){if(e&1&&(o(0,"div",51)(1,"h4",40),r(2),a(3,"transloco"),n(),o(4,"div",54),u(5,Se,7,6,"div",42),u(6,Ee,7,6,"div",42),u(7,Ie,7,6,"div",42),n()()),e&2){let t=x(3);i(2),f(" ",l(3,4,"profile.records.fulfillments")," "),i(3),_(t.user().records.fulfillment.image?5:-1),i(),_(t.user().records.fulfillment.text?6:-1),i(),_(t.user().records.fulfillment.interrogation?7:-1)}}function ke(e,p){if(e&1&&(o(0,"div",20)(1,"h3",35),r(2),a(3,"transloco"),n(),o(4,"div",50),u(5,ve,7,5,"div",51),u(6,he,8,6,"div",51),u(7,Be,8,6,"div",51),n()()),e&2){let t,d,m,c=x(2);i(2),f(" ",l(3,4,"profile.detailed_records")," "),i(3),_((t=c.user().records)!=null&&t.contribution||c.user().contributions?5:-1),i(),_((d=c.user().records)!=null&&d.request?6:-1),i(),_((m=c.user().records)!=null&&m.fulfillment?7:-1)}}function Te(e,p){if(e&1){let t=k();o(0,"section",1)(1,"div",2)(2,"div",3)(3,"h1",4),r(4),n()()()(),o(5,"section",5)(6,"div",6)(7,"div",7)(8,"div",17)(9,"button",18),T("click",function(){I(t);let m=x();return B(m.setActiveTab("profile"))}),r(10),a(11,"transloco"),n(),u(12,Y,3,5,"button",19),n(),u(13,_e,54,42,"div",8),u(14,ke,8,6,"div",20),n()()()}if(e&2){let t=x();i(4),s(t.userAlias()),i(5),P("details-tab-active",t.activeTab()==="profile"),i(),f(" ",l(11,7,"profile.tabs.profile")," "),i(2),_(t.user().records||t.user().contributions?12:-1),i(),_(t.activeTab()==="profile"?13:-1),i(),_(t.activeTab()==="records"&&(t.user().records||t.user().contributions)?14:-1)}}var He=(()=>{let p=class p{constructor(){this.title=C($),this.translator=C(H),this.destroyRef=C(D),this.route=C(L),this.aiHordeService=C(M),this.params=F(this.route.params,{initialValue:{}}),this.user=b(null),this.loading=b(!0),this.error=b(null),this.activeTab=b("profile"),this.userId=h(()=>{let d=this.params().userId,m=parseInt(d,10);return isNaN(m)?null:m}),this.userAlias=h(()=>{let d=this.user();return d?K(d.username):""}),this.userInitial=h(()=>{let d=this.userAlias();return d?d.charAt(0).toUpperCase():"?"}),this.breadcrumbs=h(()=>{let d=[{label:"details.title",route:"/details"},{label:"details.tabs.users",route:"/details/users"}];return this.user()&&d.push({label:this.userAlias(),raw:!0}),d})}ngOnInit(){N([this.translator.get("details.users.profile_title"),this.translator.get("app_title")]).pipe(U(this.destroyRef)).subscribe(([d,m])=>{this.title.setTitle(`${d} | ${m}`)}),this.route.params.pipe(U(this.destroyRef),A(d=>{let m=parseInt(d.userId,10);return isNaN(m)?(this.error.set("details.users.invalid_id"),this.loading.set(!1),w(null)):(this.loading.set(!0),this.error.set(null),this.aiHordeService.getUserById(m))})).subscribe(d=>{this.user.set(d),this.loading.set(!1),d||this.error.set("details.users.not_found")})}setActiveTab(d){this.activeTab.set(d)}formatAccountAge(d){if(!d)return"";let m=Math.floor(d/86400);if(m>365){let c=Math.floor(m/365),y=m%365;return`${c} year${c!==1?"s":""}, ${y} day${y!==1?"s":""}`}return`${m} day${m!==1?"s":""}`}};p.\u0275fac=function(m){return new(m||p)},p.\u0275cmp=q({type:p,selectors:[["app-user-profile"]],decls:4,vars:2,consts:[[3,"items"],[1,"section-primary"],[1,"container-page-header"],[1,"place-center"],[1,"heading-hero"],[1,"section-secondary"],[1,"container-spaced"],[1,"container-page-content"],[1,"card","card-bg-primary","card-full"],["aria-busy","true",1,"skeleton-box"],[1,"skeleton-bar","skeleton-bar-lg"],[1,"skeleton-bar","skeleton-bar-md"],[1,"skeleton-bar","skeleton-bar-sm"],[1,"heading-hero","text-red-600","dark:text-red-400"],[1,"card","card-bg-primary","card-full","text-center"],[1,"text-body","text-red-600","dark:text-red-400","mb-4"],["routerLink","/details/users",1,"btn-primary"],[1,"details-tabs"],[1,"details-tab",3,"click"],[1,"details-tab",3,"details-tab-active"],[1,"card","card-bg-primary","card-full","card-spaced"],[1,"profile-header","section-divider-bottom"],[1,"avatar-circle","avatar-lg","avatar-gradient"],[1,"avatar-text"],[1,"profile-header-content"],[1,"heading-subsection"],[1,"text-secondary","text-sm"],[1,"badge-container","mb-6"],[1,"badge-base","badge-success"],[1,"badge-base","badge-purple"],[1,"badge-base","badge-info"],[1,"badge-base","badge-warning"],[1,"badge-base","badge-pink"],[1,"badge-base","badge-secondary"],[1,"badge-base","badge-danger"],[1,"heading-card"],[1,"highlight-box"],[1,"data-value-xl"],[1,"data-label-spaced"],[1,"section-divider-top"],[1,"section-title-sm"],[1,"data-grid-2-4"],[1,"data-item-box","data-item-centered"],[1,"data-label"],[1,"data-value-lg"],[1,"action-row"],[1,"btn-primary",3,"routerLink"],["variant","profile",3,"kudosDetails","showZeroValues"],[1,"data-value"],[1,"badge-base","badge-secondary","ml-2"],[1,"records-section-wrapper"],[1,"record-group"],[1,"data-grid-1-2"],[1,"data-item-box"],[1,"data-grid-1-2-3"]],template:function(m,c){m&1&&(S(0,"app-breadcrumb",0),u(1,W,14,3)(2,X,16,9)(3,Te,15,9)),m&2&&(g("items",c.breadcrumbs()),i(),_(c.loading()?1:c.error()?2:c.user()?3:-1))},dependencies:[z,Z,O,R,j],encapsulation:2,changeDetection:0});let e=p;return e})();export{He as UserProfileComponent};
