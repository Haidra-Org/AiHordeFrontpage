import{a as d}from"./chunk-Z4QX4XJM.js";import{g as c}from"./chunk-GZDNXZTC.js";import{A as o,S as l,X as a,k as i,q as h,w as u}from"./chunk-QF4LG6ZD.js";var W=(()=>{let s=class s{constructor(){this.httpClient=a(c),this.auth=a(d),this.baseUrl="https://aihorde.net/api/v2"}getWorkers(){let e=this.auth.getStoredApiKey(),t=e?{headers:{apikey:e}}:{};return this.httpClient.get(`${this.baseUrl}/workers`,t).pipe(o(()=>i([])))}getWorker(e){let t=this.auth.getStoredApiKey(),r=t?{headers:{apikey:t}}:{};return this.httpClient.get(`${this.baseUrl}/workers/${e}`,r).pipe(o(()=>i(null)))}getWorkersByIds(e){if(!e||e.length===0)return i([]);let t=e.map(r=>this.getWorker(r));return u(t).pipe(h(r=>r.filter(p=>p!==null)),o(()=>i([])))}updateWorker(e,t){let r=this.auth.getStoredApiKey();return r?this.httpClient.put(`${this.baseUrl}/workers/${e}`,t,{headers:{apikey:r}}).pipe(o(()=>i(null))):i(null)}setMaintenance(e,t,r){let p={maintenance:t,maintenance_msg:t?r:""};return this.updateWorker(e,p)}setPaused(e,t){return this.updateWorker(e,{paused:t})}deleteWorker(e){let t=this.auth.getStoredApiKey();return t?this.httpClient.delete(`${this.baseUrl}/workers/${e}`,{headers:{apikey:t}}).pipe(o(()=>i(null))):i(null)}};s.\u0275fac=function(t){return new(t||s)},s.\u0275prov=l({token:s,factory:s.\u0275fac,providedIn:"root"});let n=s;return n})();export{W as a};
