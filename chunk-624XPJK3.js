import{a as M}from"./chunk-C7GYDO4N.js";import{f as w}from"./chunk-VY3ZAMBV.js";import{A as x,S as T,W as g,a as u,o as y,s as r}from"./chunk-NHSVOF7I.js";function f(p,a,d){let t=u({},p),e=u({},d?t[d]:t);for(let o of Object.keys(e))for(let i of a)typeof t[i]=="string"&&(t[i]=t[i].replaceAll(`{${o}}`,e[o]));return t}var I=(()=>{let a=class a{constructor(t,e){this.httpClient=t,this.transloco=e}get faq(){return this.getData("faq").pipe(r(t=>this.formatToMapped(t,"section")))}get tools(){return this.getData("tools").pipe(r(t=>this.formatToMapped(t,"categories")))}get imageGuis(){return this.getData("image-guis").pipe(r(t=>t.map(e=>f(e,["description","downloadButtonText"]))),r(t=>this.formatToMapped(t,"categories")))}get textGuis(){return this.getData("text-guis").pipe(r(t=>t.map(e=>f(e,["description","downloadButtonText"]))),r(t=>this.formatToMapped(t,"categories")))}get resources(){return this.getData("resource").pipe(r(t=>t.map(e=>f(e,["description","downloadButtonText"]))),r(t=>this.formatToMapped(t,"categories")))}get privacyPolicy(){return this.getData("privacy").pipe(r(t=>{let e=this.formatToMapped(t,"section"),o=new Map;return e.forEach((i,s)=>{let c=this.formatToMapped(i.map(j=>{let n=u({},j);if(n.context!==void 0)for(let m of Object.keys(n.context)){let l=n.context[m],h;switch(l.valueType){case"date":h=new Intl.DateTimeFormat(this.transloco.getActiveLang(),{dateStyle:"long",timeStyle:void 0}).format(new Date(l.value));break;default:throw new Error(`Unsupported type: ${l.valueType}`)}n.text=n.text.replaceAll(`{${m}}`,h)}return n}),"subsection");o.set(s,c)}),o}))}formatToMapped(t,e){let o=new Map;for(let i of t){let s=i[e];s===null&&(s=[""]),Array.isArray(s)||(s=[s]);for(let c of s)o.has(c)||o.set(c,[]),o.get(c).push(i)}return o}getData(t){return this.httpClient.get(`/assets/data/${t}.${this.transloco.getActiveLang()}.json`).pipe(x(e=>e.status!==404?y(()=>e):this.httpClient.get(`/assets/data/${t}.en.json`)))}};a.\u0275fac=function(e){return new(e||a)(g(w),g(M))},a.\u0275prov=T({token:a,factory:a.\u0275fac,providedIn:"root"});let p=a;return p})();export{I as a};
