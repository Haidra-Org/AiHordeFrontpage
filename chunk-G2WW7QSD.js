import{b as re,c as oe,d as x,e as le,f as ae,i as se,j as pe,k as me,l as de,m as ce,n as fe,o as he,p as ue,q as ye,s as _e,u as ge}from"./chunk-DQEJQ2UN.js";import{c as ne}from"./chunk-65WGSKXW.js";import{a as ie}from"./chunk-HAOFLEYL.js";import{f as H,g as te}from"./chunk-JIQRQOFL.js";import{A as h,Cb as O,Db as b,Oa as o,Ob as X,Rb as l,S as R,Sb as Y,Tb as m,X as V,Za as z,aa as L,ba as Q,ca as P,dc as s,ec as p,ja as J,kc as ee,l as F,nb as Z,nc as A,ob as _,oc as T,pb as g,q as $,tb as y,ub as r,vb as n,wb as f,zb as W}from"./chunk-7X6QMTFM.js";import{a as B,b as j}from"./chunk-4CLCTAJ7.js";var De=(()=>{let c=class c{constructor(){this.httpClient=V(te),this.auth=V(ie),this.baseUrl="https://aihorde.net/api/v2",this.clientAgent="AiHordeFrontpage:styles",this.handleError=e=>{let t={status:e.status??0,message:e.error?.message??"Unexpected error while contacting the API.",rc:e.error?.rc};return F(()=>t)}}buildHeaders(e){let t={"Client-Agent":this.clientAgent};return e&&(t.apikey=e),t}ensureApiKey(){return this.auth.getStoredApiKey()}requireApiKey(){let e=this.ensureApiKey();if(!e)throw new Error("API key required for this operation");return e}buildQueryParams(e){let t=new H;return e.sort&&(t=t.set("sort",e.sort)),e.page!==void 0&&(t=t.set("page",e.page.toString())),e.tag&&(t=t.set("tag",e.tag)),e.model&&(t=t.set("model",e.model)),t}buildCollectionQueryParams(e){let t=new H;return e.sort&&(t=t.set("sort",e.sort)),e.page!==void 0&&(t=t.set("page",e.page.toString())),e.type&&e.type!=="all"&&(t=t.set("type",e.type)),t}getImageStyles(e={}){let t=this.buildQueryParams(e);return this.httpClient.get(`${this.baseUrl}/styles/image`,{params:t,headers:this.buildHeaders()}).pipe(h(this.handleError))}getImageStyle(e){return this.httpClient.get(`${this.baseUrl}/styles/image/${e}`,{headers:this.buildHeaders()}).pipe(h(this.handleError))}getImageStyleByName(e){return this.httpClient.get(`${this.baseUrl}/styles/image_by_name/${encodeURIComponent(e)}`,{headers:this.buildHeaders()}).pipe(h(this.handleError))}createImageStyle(e){let t=this.requireApiKey();return this.httpClient.post(`${this.baseUrl}/styles/image`,e,{headers:this.buildHeaders(t)}).pipe(h(this.handleError))}updateImageStyle(e,t){let d=this.requireApiKey();return this.httpClient.patch(`${this.baseUrl}/styles/image/${e}`,t,{headers:this.buildHeaders(d)}).pipe(h(this.handleError))}deleteImageStyle(e){let t=this.requireApiKey();return this.httpClient.delete(`${this.baseUrl}/styles/image/${e}`,{headers:this.buildHeaders(t)}).pipe($(()=>!0),h(this.handleError))}addImageStyleExample(e,t){let d=this.requireApiKey();return this.httpClient.post(`${this.baseUrl}/styles/image/${e}/example`,t,{headers:this.buildHeaders(d)}).pipe(h(this.handleError))}updateImageStyleExample(e,t,d){let i=this.requireApiKey();return this.httpClient.patch(`${this.baseUrl}/styles/image/${e}/example/${t}`,d,{headers:this.buildHeaders(i)}).pipe(h(this.handleError))}deleteImageStyleExample(e,t){let d=this.requireApiKey();return this.httpClient.delete(`${this.baseUrl}/styles/image/${e}/example/${t}`,{headers:this.buildHeaders(d)}).pipe($(()=>!0),h(this.handleError))}getTextStyles(e={}){let t=this.buildQueryParams(e);return this.httpClient.get(`${this.baseUrl}/styles/text`,{params:t,headers:this.buildHeaders()}).pipe(h(this.handleError))}getTextStyle(e){return this.httpClient.get(`${this.baseUrl}/styles/text/${e}`,{headers:this.buildHeaders()}).pipe(h(this.handleError))}getTextStyleByName(e){return this.httpClient.get(`${this.baseUrl}/styles/text_by_name/${encodeURIComponent(e)}`,{headers:this.buildHeaders()}).pipe(h(this.handleError))}createTextStyle(e){let t=this.requireApiKey();return this.httpClient.post(`${this.baseUrl}/styles/text`,e,{headers:this.buildHeaders(t)}).pipe(h(this.handleError))}updateTextStyle(e,t){let d=this.requireApiKey();return this.httpClient.patch(`${this.baseUrl}/styles/text/${e}`,t,{headers:this.buildHeaders(d)}).pipe(h(this.handleError))}deleteTextStyle(e){let t=this.requireApiKey();return this.httpClient.delete(`${this.baseUrl}/styles/text/${e}`,{headers:this.buildHeaders(t)}).pipe($(()=>!0),h(this.handleError))}getCollections(e={}){let t=this.buildCollectionQueryParams(e);return this.httpClient.get(`${this.baseUrl}/collections`,{params:t,headers:this.buildHeaders()}).pipe(h(this.handleError))}getCollection(e){return this.httpClient.get(`${this.baseUrl}/collections/${e}`,{headers:this.buildHeaders()}).pipe(h(this.handleError))}getCollectionByName(e){return this.httpClient.get(`${this.baseUrl}/collection_by_name/${encodeURIComponent(e)}`,{headers:this.buildHeaders()}).pipe(h(this.handleError))}createCollection(){return F(()=>({status:501,message:"Collection creation not yet implemented (Phase 2)"}))}updateCollection(){return F(()=>({status:501,message:"Collection update not yet implemented (Phase 2)"}))}deleteCollection(){return F(()=>({status:501,message:"Collection deletion not yet implemented (Phase 2)"}))}};c.\u0275fac=function(t){return new(t||c)},c.\u0275prov=R({token:c,factory:c.\u0275fac,providedIn:"root"});let a=c;return a})();function be(a){return"examples"in a||"sharedkey"in a}function Ge(a){return!be(a)}function Se(a,c){a&1&&(l(0),s(1,"transloco")),a&2&&m(" ",p(1,1,"styles.form.create_image_style")," ")}function Ce(a,c){a&1&&(l(0),s(1,"transloco")),a&2&&m(" ",p(1,1,"styles.form.create_text_style")," ")}function ve(a,c){if(a&1&&_(0,Se,2,3)(1,Ce,2,3),a&2){let u=b();g(u.isImageStyle()?0:1)}}function ke(a,c){a&1&&(l(0),s(1,"transloco")),a&2&&m(" ",p(1,1,"styles.form.edit_style")," ")}function Ee(a,c){a&1&&(P(),r(0,"svg",9),f(1,"path",10),n(),l(2),s(3,"transloco")),a&2&&(o(2),m(" ",p(3,1,"styles.form.show_form")," "))}function we(a,c){a&1&&(P(),r(0,"svg",9),f(1,"path",11),n(),l(2),s(3,"transloco")),a&2&&(o(2),m(" ",p(3,1,"styles.form.show_json")," "))}function Ie(a,c){if(a&1&&(r(0,"p",14),l(1),n()),a&2){let u=b(2);o(),Y(u.jsonError())}}function Ne(a,c){if(a&1){let u=W();r(0,"div",4)(1,"label",12),l(2),s(3,"transloco"),n(),r(4,"textarea",13),O("input",function(t){L(u);let d=b();return Q(d.onJsonInput(t.target.value))}),n(),_(5,Ie,2,1,"p",14),n()}if(a&2){let u=b();o(2),m(" ",p(3,5,"styles.form.json_content")," "),o(2),X("form-input-error",u.jsonError()),y("value",u.jsonContent()),o(),g(u.jsonError()?5:-1)}}function Be(a,c){a&1&&(l(0),s(1,"transloco")),a&2&&m(" ",p(1,1,"styles.form.prompt_hint_image")," ")}function je(a,c){a&1&&(l(0),s(1,"transloco")),a&2&&m(" ",p(1,1,"styles.form.prompt_hint_text")," ")}function Fe(a,c){a&1&&(r(0,"div",15)(1,"h4",2),l(2),s(3,"transloco"),n(),r(4,"div",24)(5,"div",35)(6,"label",36),l(7),s(8,"transloco"),n(),r(9,"select",37)(10,"option",38),l(11),s(12,"transloco"),n(),r(13,"option",39),l(14,"k_euler"),n(),r(15,"option",40),l(16,"k_euler_a"),n(),r(17,"option",41),l(18,"k_heun"),n(),r(19,"option",42),l(20,"k_dpm_2"),n(),r(21,"option",43),l(22,"k_dpm_2_a"),n(),r(23,"option",44),l(24,"k_dpmpp_2s_a"),n(),r(25,"option",45),l(26,"k_dpmpp_2m"),n(),r(27,"option",46),l(28,"k_dpmpp_sde"),n(),r(29,"option",47),l(30,"dpmsolver"),n(),r(31,"option",48),l(32,"k_lms"),n(),r(33,"option",49),l(34,"DDIM"),n(),r(35,"option",50),l(36,"lcm"),n()()(),r(37,"div",35)(38,"label",51),l(39),s(40,"transloco"),n(),f(41,"input",52),n(),r(42,"div",35)(43,"label",53),l(44),s(45,"transloco"),n(),f(46,"input",54),n()(),r(47,"div",24)(48,"div",35)(49,"label",55),l(50),s(51,"transloco"),n(),f(52,"input",56),n(),r(53,"div",35)(54,"label",57),l(55),s(56,"transloco"),n(),f(57,"input",58),n(),r(58,"div",35)(59,"label",59),l(60),s(61,"transloco"),n(),f(62,"input",60),n()(),r(63,"div",24)(64,"div",30),f(65,"input",61),r(66,"label",62),l(67),s(68,"transloco"),n()(),r(69,"div",30),f(70,"input",63),r(71,"label",64),l(72),s(73,"transloco"),n()(),r(74,"div",30),f(75,"input",65),r(76,"label",66),l(77),s(78,"transloco"),n()(),r(79,"div",30),f(80,"input",67),r(81,"label",68),l(82),s(83,"transloco"),n()()(),r(84,"div",16)(85,"label",69),l(86),s(87,"transloco"),n(),f(88,"input",70),s(89,"transloco"),n(),r(90,"div",16)(91,"label",71),l(92),s(93,"transloco"),n(),f(94,"textarea",72),s(95,"transloco"),n(),r(96,"div",16)(97,"label",73),l(98),s(99,"transloco"),n(),f(100,"textarea",74),s(101,"transloco"),n(),r(102,"div",16)(103,"label",75),l(104),s(105,"transloco"),n(),f(106,"input",76),s(107,"transloco"),n()()),a&2&&(o(2),m(" ",p(3,20,"styles.form.section.image_params")," "),o(5),m(" ",p(8,22,"styles.form.sampler")," "),o(4),m(" ",p(12,24,"styles.form.default")," "),o(28),m(" ",p(40,26,"styles.form.cfg_scale")," "),o(5),m(" ",p(45,28,"styles.form.steps")," "),o(6),m(" ",p(51,30,"styles.form.width")," "),o(5),m(" ",p(56,32,"styles.form.height")," "),o(5),m(" ",p(61,34,"styles.form.clip_skip")," "),o(7),m(" ",p(68,36,"styles.form.karras")," "),o(5),m(" ",p(73,38,"styles.form.tiling")," "),o(5),m(" ",p(78,40,"styles.form.hires_fix")," "),o(5),m(" ",p(83,42,"styles.form.transparent")," "),o(4),m(" ",p(87,44,"styles.form.post_processing")," "),o(2),y("placeholder",p(89,46,"styles.form.post_processing_placeholder")),o(4),m(" ",p(93,48,"styles.form.loras")," "),o(2),y("placeholder",p(95,50,"styles.form.loras_placeholder")),o(4),m(" ",p(99,52,"styles.form.textual_inversions")," "),o(2),y("placeholder",p(101,54,"styles.form.tis_placeholder")),o(4),m(" ",p(105,56,"styles.form.shared_key")," "),o(2),y("placeholder",p(107,58,"styles.form.shared_key_placeholder")))}function Ve(a,c){a&1&&(r(0,"div",15)(1,"h4",2),l(2),s(3,"transloco"),n(),r(4,"div",24)(5,"div",77)(6,"label",78),l(7),s(8,"transloco"),n(),f(9,"input",79),n(),r(10,"div",77)(11,"label",80),l(12),s(13,"transloco"),n(),f(14,"input",81),n(),r(15,"div",77)(16,"label",82),l(17),s(18,"transloco"),n(),f(19,"input",83),n(),r(20,"div",77)(21,"label",84),l(22),s(23,"transloco"),n(),f(24,"input",85),n()(),r(25,"div",24)(26,"div",30),f(27,"input",86),r(28,"label",87),l(29),s(30,"transloco"),n()(),r(31,"div",30),f(32,"input",88),r(33,"label",89),l(34),s(35,"transloco"),n()()(),r(36,"div",16)(37,"label",90),l(38),s(39,"transloco"),n(),f(40,"input",91),s(41,"transloco"),n()()),a&2&&(o(2),m(" ",p(3,9,"styles.form.section.text_params")," "),o(5),m(" ",p(8,11,"styles.form.temperature")," "),o(5),m(" ",p(13,13,"styles.form.top_p")," "),o(5),m(" ",p(18,15,"styles.form.top_k")," "),o(5),m(" ",p(23,17,"styles.form.rep_pen")," "),o(7),m(" ",p(30,19,"styles.form.singleline")," "),o(5),m(" ",p(35,21,"styles.form.trim_incomplete")," "),o(4),m(" ",p(39,23,"styles.form.stop_sequence")," "),o(2),y("placeholder",p(41,25,"styles.form.stop_sequence_placeholder")))}function Oe(a,c){if(a&1&&(r(0,"form",5)(1,"div",15)(2,"h4",2),l(3),s(4,"transloco"),n(),r(5,"div",16)(6,"label",17),l(7),s(8,"transloco"),r(9,"span",14),l(10,"*"),n()(),f(11,"input",18),s(12,"transloco"),n(),r(13,"div",16)(14,"label",19),l(15),s(16,"transloco"),n(),f(17,"textarea",20),s(18,"transloco"),r(19,"p",21),l(20),s(21,"transloco"),n()(),r(22,"div",16)(23,"label",22),l(24),s(25,"transloco"),r(26,"span",14),l(27,"*"),n()(),f(28,"textarea",23),s(29,"transloco"),s(30,"transloco"),r(31,"p",21),_(32,Be,2,3)(33,je,2,3),n()(),r(34,"div",24)(35,"div",25)(36,"label",26),l(37),s(38,"transloco"),n(),f(39,"input",27),s(40,"transloco"),n(),r(41,"div",25)(42,"label",28),l(43),s(44,"transloco"),n(),f(45,"input",29),s(46,"transloco"),n()(),r(47,"div",24)(48,"div",30),f(49,"input",31),r(50,"label",32),l(51),s(52,"transloco"),n()(),r(53,"div",30),f(54,"input",33),r(55,"label",34),l(56),s(57,"transloco"),n()()()(),_(58,Fe,108,60,"div",15),_(59,Ve,42,27,"div",15),n()),a&2){let u=b();y("formGroup",u.form),o(3),m(" ",p(4,18,"styles.form.section.basic")," "),o(4),m(" ",p(8,20,"styles.form.name")," "),o(4),y("placeholder",p(12,22,"styles.form.name_placeholder")),o(4),m(" ",p(16,24,"styles.form.description")," "),o(2),y("placeholder",p(18,26,"styles.form.description_placeholder")),o(3),m(" ",p(21,28,"styles.form.description_hint")," "),o(4),m(" ",p(25,30,"styles.form.prompt")," "),o(4),y("placeholder",u.isImageStyle()?p(29,32,"styles.form.prompt_placeholder_image"):p(30,34,"styles.form.prompt_placeholder_text")),o(4),g(u.isImageStyle()?32:33),o(5),m(" ",p(38,36,"styles.form.tags")," "),o(2),y("placeholder",p(40,38,"styles.form.tags_placeholder")),o(4),m(" ",p(44,40,"styles.form.models")," "),o(2),y("placeholder",p(46,42,"styles.form.models_placeholder")),o(6),m(" ",p(52,44,"styles.form.public")," "),o(5),m(" ",p(57,46,"styles.form.nsfw")," "),o(2),g(u.isImageStyle()?58:-1),o(),g(u.isImageStyle()?-1:59)}}function Te(a,c){a&1&&(l(0),s(1,"transloco")),a&2&&m(" ",p(1,1,"styles.form.saving")," ")}function $e(a,c){a&1&&(l(0),s(1,"transloco")),a&2&&m(" ",p(1,1,"styles.form.create")," ")}function Je(a,c){a&1&&(l(0),s(1,"transloco")),a&2&&m(" ",p(1,1,"styles.form.save")," ")}var Ye=(()=>{let c=class c{constructor(){this.fb=V(_e),this.mode=T("create"),this.styleType=T.required(),this.initialValues=T(null),this.saving=T(!1),this.formSubmit=A(),this.formCancel=A(),this.showJsonView=J(!1),this.jsonContent=J(""),this.jsonError=J(null),this.isImageStyle=ee(()=>this.styleType()==="image")}ngOnInit(){this.initializeForm()}initializeForm(){let e=this.styleType()==="image",t=this.initialValues(),d={name:[t?.name??"",[x.required,x.minLength(1),x.maxLength(100)]],info:[t?.info??"",[x.minLength(10),x.maxLength(1e3)]],prompt:[t?.prompt??(e?"{p}{np}":"{p}"),[x.required]],public:[t?.public??!0],nsfw:[t?.nsfw??!1],tags:[t?.tags?.join(", ")??""],models:[t?.models?.join(", ")??""]};if(e){let i=t?.params??{};this.form=this.fb.group(j(B({},d),{sharedkey:[t?.sharedkey??""],sampler_name:[i.sampler_name??""],cfg_scale:[i.cfg_scale??7.5],denoising_strength:[i.denoising_strength??""],height:[i.height??512],width:[i.width??512],steps:[i.steps??30],karras:[i.karras??!1],tiling:[i.tiling??!1],hires_fix:[i.hires_fix??!1],clip_skip:[i.clip_skip??""],facefixer_strength:[i.facefixer_strength??""],post_processing:[i.post_processing?.join(", ")??""],transparent:[i.transparent??!1],loras_json:[i.loras?JSON.stringify(i.loras,null,2):""],tis_json:[i.tis?JSON.stringify(i.tis,null,2):""],workflow:[i.workflow??""]}))}else{let i=t?.params??{};this.form=this.fb.group(j(B({},d),{temperature:[i.temperature??.7],top_p:[i.top_p??.9],top_k:[i.top_k??""],top_a:[i.top_a??""],typical:[i.typical??""],min_p:[i.min_p??""],rep_pen:[i.rep_pen??1.1],rep_pen_range:[i.rep_pen_range??""],rep_pen_slope:[i.rep_pen_slope??""],tfs:[i.tfs??""],singleline:[i.singleline??!1],frmtadsnsp:[i.frmtadsnsp??!1],frmtrmblln:[i.frmtrmblln??!1],frmtrmspch:[i.frmtrmspch??!1],frmttriminc:[i.frmttriminc??!1],use_default_badwordsids:[i.use_default_badwordsids??!1],stop_sequence:[i.stop_sequence?.join(", ")??""],smoothing_factor:[i.smoothing_factor??""],dynatemp_range:[i.dynatemp_range??""],dynatemp_exponent:[i.dynatemp_exponent??""]}))}this.updateJsonFromForm()}toggleJsonView(){let e=!this.showJsonView();e?this.updateJsonFromForm():this.updateFormFromJson(),this.showJsonView.set(e)}updateJsonFromForm(){let e=this.buildPayload();this.jsonContent.set(JSON.stringify(e,null,2)),this.jsonError.set(null)}updateFormFromJson(){try{let e=JSON.parse(this.jsonContent());if(this.jsonError.set(null),e.name!==void 0&&this.form.patchValue({name:e.name}),e.info!==void 0&&this.form.patchValue({info:e.info}),e.prompt!==void 0&&this.form.patchValue({prompt:e.prompt}),e.public!==void 0&&this.form.patchValue({public:e.public}),e.nsfw!==void 0&&this.form.patchValue({nsfw:e.nsfw}),e.tags!==void 0&&this.form.patchValue({tags:e.tags.join(", ")}),e.models!==void 0&&this.form.patchValue({models:e.models.join(", ")}),this.isImageStyle()&&e.params){let t=e.params;this.form.patchValue({sampler_name:t.sampler_name??"",cfg_scale:t.cfg_scale??7.5,denoising_strength:t.denoising_strength??"",height:t.height??512,width:t.width??512,steps:t.steps??30,karras:t.karras??!1,tiling:t.tiling??!1,hires_fix:t.hires_fix??!1,clip_skip:t.clip_skip??"",facefixer_strength:t.facefixer_strength??"",post_processing:t.post_processing?.join(", ")??"",transparent:t.transparent??!1,loras_json:t.loras?JSON.stringify(t.loras,null,2):"",tis_json:t.tis?JSON.stringify(t.tis,null,2):"",workflow:t.workflow??""}),e.sharedkey!==void 0&&this.form.patchValue({sharedkey:e.sharedkey})}else if(!this.isImageStyle()&&e.params){let t=e.params;this.form.patchValue({temperature:t.temperature??.7,top_p:t.top_p??.9,top_k:t.top_k??"",top_a:t.top_a??"",typical:t.typical??"",min_p:t.min_p??"",rep_pen:t.rep_pen??1.1,rep_pen_range:t.rep_pen_range??"",rep_pen_slope:t.rep_pen_slope??"",tfs:t.tfs??"",singleline:t.singleline??!1,frmtadsnsp:t.frmtadsnsp??!1,frmtrmblln:t.frmtrmblln??!1,frmtrmspch:t.frmtrmspch??!1,frmttriminc:t.frmttriminc??!1,use_default_badwordsids:t.use_default_badwordsids??!1,stop_sequence:t.stop_sequence?.join(", ")??"",smoothing_factor:t.smoothing_factor??"",dynatemp_range:t.dynatemp_range??"",dynatemp_exponent:t.dynatemp_exponent??""})}}catch{this.jsonError.set("Invalid JSON format")}}onJsonInput(e){this.jsonContent.set(e);try{JSON.parse(e),this.jsonError.set(null)}catch{this.jsonError.set("Invalid JSON format")}}parseCommaSeparated(e){return!e||!e.trim()?[]:e.split(",").map(t=>t.trim()).filter(t=>t.length>0)}parseOptionalNumber(e){if(e==null||e==="")return;let t=typeof e=="number"?e:parseFloat(e);return isNaN(t)?void 0:t}buildPayload(){let e=this.form.value,t=this.isImageStyle(),d={name:e.name,info:e.info||void 0,prompt:e.prompt,public:e.public,nsfw:e.nsfw,tags:this.parseCommaSeparated(e.tags),models:this.parseCommaSeparated(e.models)};if(d.tags.length===0&&delete d.tags,d.models.length===0&&delete d.models,t){let i={};e.sampler_name&&(i.sampler_name=e.sampler_name);let S=this.parseOptionalNumber(e.cfg_scale);S!==void 0&&(i.cfg_scale=S);let C=this.parseOptionalNumber(e.denoising_strength);C!==void 0&&(i.denoising_strength=C);let v=this.parseOptionalNumber(e.height);v!==void 0&&(i.height=v);let k=this.parseOptionalNumber(e.width);k!==void 0&&(i.width=k);let E=this.parseOptionalNumber(e.steps);E!==void 0&&(i.steps=E),e.karras&&(i.karras=!0),e.tiling&&(i.tiling=!0),e.hires_fix&&(i.hires_fix=!0);let w=this.parseOptionalNumber(e.clip_skip);w!==void 0&&(i.clip_skip=w);let I=this.parseOptionalNumber(e.facefixer_strength);I!==void 0&&(i.facefixer_strength=I);let N=this.parseCommaSeparated(e.post_processing);if(N.length>0&&(i.post_processing=N),e.transparent&&(i.transparent=!0),e.workflow&&(i.workflow=e.workflow),e.loras_json)try{i.loras=JSON.parse(e.loras_json)}catch{}if(e.tis_json)try{i.tis=JSON.parse(e.tis_json)}catch{}return j(B({},d),{params:Object.keys(i).length>0?i:void 0,sharedkey:e.sharedkey||void 0})}else{let i={},S=this.parseOptionalNumber(e.temperature);S!==void 0&&(i.temperature=S);let C=this.parseOptionalNumber(e.top_p);C!==void 0&&(i.top_p=C);let v=this.parseOptionalNumber(e.top_k);v!==void 0&&(i.top_k=v);let k=this.parseOptionalNumber(e.top_a);k!==void 0&&(i.top_a=k);let E=this.parseOptionalNumber(e.typical);E!==void 0&&(i.typical=E);let w=this.parseOptionalNumber(e.min_p);w!==void 0&&(i.min_p=w);let I=this.parseOptionalNumber(e.rep_pen);I!==void 0&&(i.rep_pen=I);let N=this.parseOptionalNumber(e.rep_pen_range);N!==void 0&&(i.rep_pen_range=N);let q=this.parseOptionalNumber(e.rep_pen_slope);q!==void 0&&(i.rep_pen_slope=q);let K=this.parseOptionalNumber(e.tfs);K!==void 0&&(i.tfs=K),e.singleline&&(i.singleline=!0),e.frmtadsnsp&&(i.frmtadsnsp=!0),e.frmtrmblln&&(i.frmtrmblln=!0),e.frmtrmspch&&(i.frmtrmspch=!0),e.frmttriminc&&(i.frmttriminc=!0),e.use_default_badwordsids&&(i.use_default_badwordsids=!0);let U=this.parseCommaSeparated(e.stop_sequence);U.length>0&&(i.stop_sequence=U);let D=this.parseOptionalNumber(e.smoothing_factor);D!==void 0&&(i.smoothing_factor=D);let M=this.parseOptionalNumber(e.dynatemp_range);M!==void 0&&(i.dynatemp_range=M);let G=this.parseOptionalNumber(e.dynatemp_exponent);return G!==void 0&&(i.dynatemp_exponent=G),j(B({},d),{params:Object.keys(i).length>0?i:void 0})}}onSubmit(){if(this.showJsonView())try{let e=JSON.parse(this.jsonContent());this.formSubmit.emit({type:this.styleType(),payload:e})}catch{this.jsonError.set("Invalid JSON format")}else this.form.valid&&this.formSubmit.emit({type:this.styleType(),payload:this.buildPayload()})}onCancel(){this.formCancel.emit()}};c.\u0275fac=function(t){return new(t||c)},c.\u0275cmp=z({type:c,selectors:[["app-style-form"]],inputs:{mode:[1,"mode"],styleType:[1,"styleType"],initialValues:[1,"initialValues"],saving:[1,"saving"]},outputs:{formSubmit:"formSubmit",formCancel:"formCancel"},decls:18,vars:10,consts:[[1,"card","card-full","card-bg-primary","form-stack"],[1,"form-header"],[1,"text-primary"],["type","button",1,"btn-source-control",3,"click"],[1,"form-json"],[1,"form-stack",3,"formGroup"],[1,"form-actions"],["type","button",1,"btn-source-control",3,"click","disabled"],["type","button",1,"btn-primary",3,"click","disabled"],["fill","none","stroke","currentColor","viewBox","0 0 24 24","aria-hidden","true",1,"form-toggle-icon"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M9 12h6m-6 4h6m2 5H7a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h5.586a1 1 0 0 1 .707.293l5.414 5.414a1 1 0 0 1 .293.707V19a2 2 0 0 1-2 2Z"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M17.25 6.75 22.5 12l-5.25 5.25m-10.5 0L1.5 12l5.25-5.25m7.5-3-4.5 16.5"],["for","json-editor",1,"form-label"],["id","json-editor","rows","20","spellcheck","false",1,"form-input","form-code",3,"input","value"],[1,"text-error"],[1,"card","card-bg-secondary","card-full","form-section"],[1,"form-field"],["for","style-name",1,"form-label"],["type","text","id","style-name","formControlName","name",1,"form-input",3,"placeholder"],["for","style-info",1,"form-label"],["id","style-info","formControlName","info","rows","3",1,"form-input",3,"placeholder"],[1,"form-hint"],["for","style-prompt",1,"form-label"],["id","style-prompt","formControlName","prompt","rows","4",1,"form-input",3,"placeholder"],[1,"form-row"],[1,"form-field","form-field-half"],["for","style-tags",1,"form-label"],["type","text","id","style-tags","formControlName","tags",1,"form-input",3,"placeholder"],["for","style-models",1,"form-label"],["type","text","id","style-models","formControlName","models",1,"form-input",3,"placeholder"],[1,"form-checkbox"],["type","checkbox","id","style-public","formControlName","public",1,"checkbox-input"],["for","style-public",1,"checkbox-label"],["type","checkbox","id","style-nsfw","formControlName","nsfw",1,"checkbox-input"],["for","style-nsfw",1,"checkbox-label"],[1,"form-field","form-field-third"],["for","style-sampler",1,"form-label"],["id","style-sampler","formControlName","sampler_name",1,"form-input"],["value",""],["value","k_euler"],["value","k_euler_a"],["value","k_heun"],["value","k_dpm_2"],["value","k_dpm_2_a"],["value","k_dpmpp_2s_a"],["value","k_dpmpp_2m"],["value","k_dpmpp_sde"],["value","dpmsolver"],["value","k_lms"],["value","DDIM"],["value","lcm"],["for","style-cfg",1,"form-label"],["type","number","id","style-cfg","formControlName","cfg_scale","min","0","max","100","step","0.5",1,"form-input"],["for","style-steps",1,"form-label"],["type","number","id","style-steps","formControlName","steps","min","1","max","500",1,"form-input"],["for","style-width",1,"form-label"],["type","number","id","style-width","formControlName","width","min","64","max","3072","step","64",1,"form-input"],["for","style-height",1,"form-label"],["type","number","id","style-height","formControlName","height","min","64","max","3072","step","64",1,"form-input"],["for","style-clip-skip",1,"form-label"],["type","number","id","style-clip-skip","formControlName","clip_skip","min","1","max","12",1,"form-input"],["type","checkbox","id","style-karras","formControlName","karras",1,"checkbox-input"],["for","style-karras",1,"checkbox-label"],["type","checkbox","id","style-tiling","formControlName","tiling",1,"checkbox-input"],["for","style-tiling",1,"checkbox-label"],["type","checkbox","id","style-hires-fix","formControlName","hires_fix",1,"checkbox-input"],["for","style-hires-fix",1,"checkbox-label"],["type","checkbox","id","style-transparent","formControlName","transparent",1,"checkbox-input"],["for","style-transparent",1,"checkbox-label"],["for","style-post-processing",1,"form-label"],["type","text","id","style-post-processing","formControlName","post_processing",1,"form-input",3,"placeholder"],["for","style-loras",1,"form-label"],["id","style-loras","formControlName","loras_json","rows","4","spellcheck","false",1,"form-input","form-code",3,"placeholder"],["for","style-tis",1,"form-label"],["id","style-tis","formControlName","tis_json","rows","4","spellcheck","false",1,"form-input","form-code",3,"placeholder"],["for","style-sharedkey",1,"form-label"],["type","text","id","style-sharedkey","formControlName","sharedkey",1,"form-input",3,"placeholder"],[1,"form-field","form-field-quarter"],["for","style-temperature",1,"form-label"],["type","number","id","style-temperature","formControlName","temperature","min","0","max","5","step","0.1",1,"form-input"],["for","style-top-p",1,"form-label"],["type","number","id","style-top-p","formControlName","top_p","min","0.001","max","1","step","0.01",1,"form-input"],["for","style-top-k",1,"form-label"],["type","number","id","style-top-k","formControlName","top_k","min","0","max","200",1,"form-input"],["for","style-rep-pen",1,"form-label"],["type","number","id","style-rep-pen","formControlName","rep_pen","min","1","max","3","step","0.05",1,"form-input"],["type","checkbox","id","style-singleline","formControlName","singleline",1,"checkbox-input"],["for","style-singleline",1,"checkbox-label"],["type","checkbox","id","style-frmttriminc","formControlName","frmttriminc",1,"checkbox-input"],["for","style-frmttriminc",1,"checkbox-label"],["for","style-stop-sequence",1,"form-label"],["type","text","id","style-stop-sequence","formControlName","stop_sequence",1,"form-input",3,"placeholder"]],template:function(t,d){t&1&&(r(0,"div",0)(1,"div",1)(2,"h3",2),_(3,ve,2,1)(4,ke,2,3),n(),r(5,"button",3),O("click",function(){return d.toggleJsonView()}),_(6,Ee,4,3)(7,we,4,3),n()(),_(8,Ne,6,7,"div",4)(9,Oe,60,48,"form",5),r(10,"div",6)(11,"button",7),O("click",function(){return d.onCancel()}),l(12),s(13,"transloco"),n(),r(14,"button",8),O("click",function(){return d.onSubmit()}),_(15,Te,2,3)(16,$e,2,3)(17,Je,2,3),n()()()),t&2&&(o(3),g(d.mode()==="create"?3:4),o(2),Z("aria-pressed",d.showJsonView()),o(),g(d.showJsonView()?6:7),o(2),g(d.showJsonView()?8:9),o(3),y("disabled",d.saving()),o(),m(" ",p(13,8,"styles.form.cancel")," "),o(2),y("disabled",d.saving()||!d.showJsonView()&&!d.form.valid||d.showJsonView()&&d.jsonError()),o(),g(d.saving()?15:d.mode()==="create"?16:17))},dependencies:[ge,se,fe,he,oe,pe,re,ce,le,ae,ye,ue,me,de,ne],encapsulation:2,changeDetection:0});let a=c;return a})();export{De as a,be as b,Ge as c,Ye as d};
