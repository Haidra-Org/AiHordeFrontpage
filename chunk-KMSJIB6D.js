import{c as V}from"./chunk-BPDV6QKT.js";import{Cb as v,Db as s,Eb as S,Fb as H,Kb as T,Lb as B,Oa as a,Ob as I,Rb as m,Tb as p,X as C,Za as E,aa as u,ba as f,ca as k,nb as A,ob as g,oc as P,pb as b,qc as _,rc as l,sc as O,ta as w,tb as h,ub as r,vb as d,wb as D,zb as L}from"./chunk-4EEEF725.js";var K=["dialogPanel"],M=["*"];function j(n,o){if(n&1&&(r(0,"span",11),k(),r(1,"svg",12),D(2,"circle",13)(3,"path",14),d(),m(4),d()),n&2){let t=s(2);a(4),p(" ",t.loadingLabel()||t.confirmLabel()," ")}}function F(n,o){if(n&1&&m(0),n&2){let t=s(2);p(" ",t.confirmLabel()," ")}}function q(n,o){if(n&1){let t=L();r(0,"div",3)(1,"div",4),v("click",function(){u(t);let i=s();return f(i.onBackdropClick())}),d(),r(2,"div",5,0)(4,"h3",6),m(5),d(),r(6,"div",7),H(7),d(),r(8,"div",8)(9,"button",9,1),v("click",function(){u(t);let i=s();return f(i.cancel.emit())}),m(11),d(),r(12,"button",10,2),v("click",function(){u(t);let i=s();return f(i.confirm.emit())}),g(14,j,5,1,"span",11)(15,F,1,1),d()()()()}if(n&2){let t=s();a(2),A("aria-labelledby",t.titleId),a(2),h("id",t.titleId),a(),p(" ",t.title()," "),a(4),h("disabled",t.loading()),a(2),p(" ",t.cancelLabel()," "),a(),I("btn-danger",t.variant()==="danger"),h("disabled",t.loading()),a(2),b(t.loading()?14:15)}}var J=(()=>{let o=class o{constructor(){this.platformId=C(w),this.previousActiveElement=null,this.dialogPanel=O("dialogPanel"),this.open=l(!1),this.title=l.required(),this.confirmLabel=l("Confirm"),this.cancelLabel=l("Cancel"),this.loading=l(!1),this.loadingLabel=l(void 0),this.variant=l("default"),this.closeOnBackdrop=l(!0),this.confirm=_(),this.cancel=_(),this.titleId=`admin-dialog-title-${Math.random().toString(36).substr(2,9)}`,this.keydownHandler=null,P(()=>{let e=this.open();V(this.platformId)&&(e?this.onOpen():this.onClose())})}ngOnDestroy(){this.removeKeyboardHandler()}onBackdropClick(){this.closeOnBackdrop()&&!this.loading()&&this.cancel.emit()}onOpen(){this.previousActiveElement=document.activeElement,this.keydownHandler=e=>this.handleKeydown(e),document.addEventListener("keydown",this.keydownHandler),setTimeout(()=>{this.dialogPanel()?.nativeElement?.focus()},0)}onClose(){this.removeKeyboardHandler(),this.previousActiveElement&&this.previousActiveElement instanceof HTMLElement&&this.previousActiveElement.focus(),this.previousActiveElement=null}handleKeydown(e){if(e.key==="Escape"&&!this.loading()){e.preventDefault(),this.cancel.emit();return}e.key==="Tab"&&this.trapFocus(e)}trapFocus(e){let i=this.dialogPanel();if(!i)return;let c=i.nativeElement.querySelectorAll('button:not([disabled]), [href], input:not([disabled]), select:not([disabled]), textarea:not([disabled]), [tabindex]:not([tabindex="-1"])');if(c.length===0)return;let x=c[0],y=c[c.length-1];e.shiftKey?document.activeElement===x&&(e.preventDefault(),y.focus()):document.activeElement===y&&(e.preventDefault(),x.focus())}removeKeyboardHandler(){this.keydownHandler&&(document.removeEventListener("keydown",this.keydownHandler),this.keydownHandler=null)}};o.\u0275fac=function(i){return new(i||o)},o.\u0275cmp=E({type:o,selectors:[["app-admin-dialog"]],viewQuery:function(i,c){i&1&&T(c.dialogPanel,K,5),i&2&&B()},inputs:{open:[1,"open"],title:[1,"title"],confirmLabel:[1,"confirmLabel"],cancelLabel:[1,"cancelLabel"],loading:[1,"loading"],loadingLabel:[1,"loadingLabel"],variant:[1,"variant"],closeOnBackdrop:[1,"closeOnBackdrop"]},outputs:{confirm:"confirm",cancel:"cancel"},ngContentSelectors:M,decls:1,vars:1,consts:[["dialogPanel",""],["cancelButton",""],["confirmButton",""],[1,"modal-overlay"],["aria-hidden","true",1,"modal-backdrop",3,"click"],["role","dialog","aria-modal","true","tabindex","-1",1,"dialog-panel"],[1,"admin-heading-card","mb-4",3,"id"],[1,"dialog-content","mb-6"],[1,"flex","justify-end","gap-3"],["type","button",1,"btn-muted",3,"click","disabled"],["type","button",1,"btn-primary",3,"click","disabled"],[1,"inline-flex","items-center","gap-2"],["fill","none","viewBox","0 0 24 24","aria-hidden","true",1,"animate-spin","h-4","w-4"],["cx","12","cy","12","r","10","stroke","currentColor","stroke-width","4",1,"opacity-25"],["fill","currentColor","d","M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z",1,"opacity-75"]],template:function(i,c){i&1&&(S(),g(0,q,16,9,"div",3)),i&2&&b(c.open()?0:-1)},encapsulation:2,changeDetection:0});let n=o;return n})();export{J as a};
