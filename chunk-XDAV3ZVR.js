import{a as re}from"./chunk-KMSJIB6D.js";import{a as ae}from"./chunk-ZPGUFHCW.js";import{a as le}from"./chunk-B3RXY4GL.js";import{p as ie,q as ne,v as oe}from"./chunk-ELF6RP2M.js";import{a as Q}from"./chunk-YL3TDIGQ.js";import"./chunk-LN47MBAJ.js";import{a as te}from"./chunk-OBD3L7BG.js";import"./chunk-PZF2KSPB.js";import{c as Z,d as ee}from"./chunk-MXBDCOJX.js";import{l as X}from"./chunk-JHAYVYNF.js";import{g as J,k as w}from"./chunk-BPDV6QKT.js";import{$b as W,A as $,Cb as x,Db as _,F as T,Oa as i,Rb as l,S as G,Sb as v,Tb as m,Ub as R,X as y,Za as z,aa as C,ba as I,ca as E,da as A,dc as N,ga as q,gc as d,hc as p,ic as Y,ja as h,k as S,nc as F,ob as f,pb as k,q as M,qb as U,r as K,rb as P,sb as B,tb as g,ub as n,vb as o,wb as O,zb as D}from"./chunk-4EEEF725.js";import"./chunk-4CLCTAJ7.js";var se=(()=>{let c=class c{constructor(){this.httpClient=y(J),this.auth=y(Q),this.baseUrl="https://aihorde.net/api/v2"}getHeaders(){let e=this.auth.getStoredApiKey();return e?{apikey:e}:{}}getIPTimeouts(){return this.httpClient.get(`${this.baseUrl}/operations/ipaddr`,{headers:this.getHeaders()}).pipe($(()=>S([])))}getIPTimeout(e){let s=encodeURIComponent(e);return this.httpClient.get(`${this.baseUrl}/operations/ipaddr/${s}`,{headers:this.getHeaders()}).pipe(M(a=>a&&a.length>0?a[0]:null),$(()=>S(null)))}addIPTimeout(e){let s=this.auth.getStoredApiKey();return s?this.httpClient.post(`${this.baseUrl}/operations/ipaddr`,e,{headers:{apikey:s}}).pipe($(()=>S(null))):S(null)}removeIPTimeout(e){let s=this.auth.getStoredApiKey();return s?this.httpClient.delete(`${this.baseUrl}/operations/ipaddr`,{headers:{apikey:s},body:{ipaddr:e}}).pipe(M(()=>!0),$(()=>S(!1))):S(!1)}blockWorkerIP(e,s){let a=this.auth.getStoredApiKey();if(!a)return S(null);let u={days:s};return this.httpClient.put(`${this.baseUrl}/operations/block_worker_ipaddr/${e}`,u,{headers:{apikey:a}}).pipe($(()=>S(null)))}unblockWorkerIP(e){let s=this.auth.getStoredApiKey();return s?this.httpClient.delete(`${this.baseUrl}/operations/block_worker_ipaddr/${e}`,{headers:{apikey:s}}).pipe(M(()=>!0),$(()=>S(!1))):S(!1)}};c.\u0275fac=function(s){return new(s||c)},c.\u0275prov=G({token:c,factory:c.\u0275fac,providedIn:"root"});let t=c;return t})();var ce=t=>({count:t}),j=(t,c)=>c.ipaddr,me=(t,c)=>c.id;function ue(t,c){if(t&1){let r=D();n(0,"div",10)(1,"span",58),l(2),d(3,"transloco"),d(4,"transloco"),o(),n(5,"button",59),x("click",function(){C(r);let s=_();return I(s.openBatchRefreshDialog())}),l(6),d(7,"transloco"),o(),n(8,"button",60),x("click",function(){C(r);let s=_();return I(s.clearSelection())}),l(9),d(10,"transloco"),o()()}if(t&2){let r=_();i(2),R(" ",r.selectedCount()," ",r.selectedCount()===1?p(3,4,"admin.operations.batch.selected_singular"):p(4,6,"admin.operations.batch.selected_plural")," "),i(4),m(" ",p(7,8,"admin.operations.batch.edit_button")," "),i(3),m(" ",p(10,10,"admin.operations.batch.clear_selection")," ")}}function he(t,c){t&1&&(n(0,"div",11),E(),n(1,"svg",61),O(2,"circle",62)(3,"path",63),o(),A(),n(4,"span",64),l(5),d(6,"transloco"),o()()),t&2&&(i(5),v(p(6,1,"admin.operations.ip_timeouts.loading")))}function _e(t,c){t&1&&(n(0,"div",12),E(),n(1,"svg",65),O(2,"path",66),o(),A(),n(3,"span",67),l(4),d(5,"transloco"),o()()),t&2&&(i(4),v(p(5,1,"admin.operations.ip_timeouts.no_timeouts")))}function fe(t,c){if(t&1){let r=D();n(0,"tr")(1,"td")(2,"input",72),x("change",function(){let s=C(r).$implicit,a=_(2);return I(a.toggleSelectIP(s.ipaddr))}),o()(),n(3,"td")(4,"code",73),l(5),o()(),n(6,"td")(7,"span",74),l(8),o()(),n(9,"td")(10,"div",75)(11,"button",76),d(12,"transloco"),x("click",function(){let s=C(r).$implicit,a=_(2);return I(a.openRefreshIPDialog(s))}),E(),n(13,"svg",77),O(14,"path",78),o()(),A(),n(15,"button",79),d(16,"transloco"),x("click",function(){let s=C(r).$implicit,a=_(2);return I(a.openDeleteIPDialog(s))}),E(),n(17,"svg",77),O(18,"path",80),o()()()()()}if(t&2){let r=c.$implicit,e=_(2);i(2),g("checked",e.isIPSelected(r.ipaddr)),i(3),v(r.ipaddr),i(3),v(e.formatDuration(r.seconds)),i(3),g("title",W(p(12,7,"admin.operations.ip_timeouts.refresh"))),i(4),g("title",W(p(16,9,"admin.operations.ip_timeouts.remove")))}}function ke(t,c){if(t&1){let r=D();n(0,"div",13)(1,"div",68)(2,"table",69)(3,"thead")(4,"tr")(5,"th",70)(6,"input",71),d(7,"transloco"),x("change",function(){C(r);let s=_();return I(s.toggleSelectAll())}),o()(),n(8,"th"),l(9),d(10,"transloco"),o(),n(11,"th"),l(12),d(13,"transloco"),o(),n(14,"th"),l(15),d(16,"transloco"),o()()(),n(17,"tbody"),P(18,fe,19,11,"tr",null,j),o()()()()}if(t&2){let r=_();i(6),g("title",W(p(7,7,"admin.operations.batch.select_all")))("checked",r.allSelected())("indeterminate",r.someSelected()),i(3),m(" ",p(10,9,"admin.operations.ip_timeouts.table.ip")," "),i(3),m(" ",p(13,11,"admin.operations.ip_timeouts.table.remaining")," "),i(3),m(" ",p(16,13,"admin.operations.ip_timeouts.table.actions")," "),i(3),B(r.filteredTimeouts())}}function ge(t,c){if(t&1&&(n(0,"p",21),E(),n(1,"svg",32),O(2,"path",33),o(),l(3),o()),t&2){let r=_();i(3),m(" ",r.addIPWarning()," ")}}function xe(t,c){if(t&1&&(n(0,"option",24),l(1),o()),t&2){let r=c.$implicit;g("value",r),i(),R(" ",r," ",r===1?"hour":"hours"," ")}}function ve(t,c){t&1&&(l(0),d(1,"transloco")),t&2&&m(" ",p(1,1,"admin.operations.add_ip.adding")," ")}function be(t,c){t&1&&(l(0),d(1,"transloco")),t&2&&m(" ",p(1,1,"admin.operations.add_ip.add_button")," ")}function Ce(t,c){t&1&&(l(0),d(1,"transloco")),t&2&&m(" ",p(1,1,"admin.operations.check_ip.checking")," ")}function Ie(t,c){t&1&&(l(0),d(1,"transloco")),t&2&&m(" ",p(1,1,"admin.operations.check_ip.check_button")," ")}function we(t,c){if(t&1){let r=D();n(0,"button",81),x("click",function(){C(r);let s=_();return I(s.clearCheckResult())}),l(1),d(2,"transloco"),o()}t&2&&(i(),m(" ",p(2,1,"admin.operations.check_ip.clear")," "))}function Se(t,c){t&1&&(n(0,"div",82)(1,"div",84)(2,"span",85),l(3),d(4,"transloco"),o(),n(5,"span",86),l(6),d(7,"transloco"),o()()()),t&2&&(i(3),v(p(4,2,"admin.operations.check_ip.not_blocked")),i(3),v(p(7,4,"admin.operations.check_ip.not_blocked_message")))}function Te(t,c){if(t&1&&(n(0,"div",83)(1,"div",84)(2,"span",87),l(3),d(4,"transloco"),o(),n(5,"span",86),l(6),d(7,"transloco"),n(8,"strong"),l(9),o()()()()),t&2){let r=_(2);i(3),v(p(4,3,"admin.operations.check_ip.blocked")),i(3),m(" ",p(7,5,"admin.operations.check_ip.blocked_message")," "),i(3),v(r.formatDuration(r.checkResult().seconds))}}function ye(t,c){if(t&1&&(n(0,"div"),f(1,Se,8,6,"div",82)(2,Te,10,7,"div",83),o()),t&2){let r=_();i(),k(r.checkResult()===null?1:2)}}function Ee(t,c){if(t&1){let r=D();n(0,"button",88),d(1,"transloco"),x("click",function(){C(r);let s=_();return I(s.clearWorkerSelection())}),E(),n(2,"svg",89),O(3,"path",90),o()()}t&2&&g("title",W(p(1,2,"admin.operations.worker_block.clear_selection")))}function Pe(t,c){t&1&&(n(0,"div",91),l(1),d(2,"transloco"),o()),t&2&&(i(),m(" ",p(2,1,"admin.operations.worker_block.loading_workers")," "))}function Be(t,c){t&1&&(n(0,"span",96),l(1,"Online"),o())}function Oe(t,c){t&1&&(n(0,"span",97),l(1,"Offline"),o())}function De(t,c){if(t&1){let r=D();n(0,"button",93),x("mousedown",function(){let s=C(r).$implicit,a=_(3);return I(a.selectWorker(s))}),n(1,"span",94),l(2),o(),n(3,"span",95),l(4),o(),f(5,Be,2,0,"span",96)(6,Oe,2,0,"span",97),o()}if(t&2){let r=c.$implicit;i(2),v(r.name),i(2),m("",r.id.slice(0,8),"..."),i(),k(r.online?5:6)}}function We(t,c){if(t&1&&P(0,De,7,3,"button",92,me),t&2){let r=_(2);B(r.filteredWorkers())}}function Re(t,c){if(t&1&&(n(0,"div",41),f(1,Pe,3,3,"div",91)(2,We,2,0),o()),t&2){let r=_();i(),k(r.loadingWorkers()?1:2)}}function Fe(t,c){if(t&1&&(n(0,"option",24),l(1),o()),t&2){let r=c.$implicit;g("value",r),i(),R(" ",r," ",r===1?"day":"days"," ")}}function Le(t,c){t&1&&(n(0,"span",85),l(1,"Online"),o())}function $e(t,c){t&1&&(n(0,"span",102),l(1,"Offline"),o())}function Ve(t,c){t&1&&(n(0,"span",74),l(1,"Maintenance"),o())}function Ae(t,c){t&1&&(n(0,"span",102),l(1,"Paused"),o())}function Ue(t,c){t&1&&(n(0,"span",85),l(1,"Yes"),o())}function He(t,c){t&1&&(n(0,"span",102),l(1,"No"),o())}function Me(t,c){if(t&1&&(n(0,"div",54)(1,"span",52),l(2),d(3,"transloco"),o(),n(4,"span",100),l(5),o()()),t&2){let r=_();i(2),m("",p(3,2,"admin.operations.worker_block.worker_owner"),":"),i(3),v(r.owner)}}function Qe(t,c){if(t&1&&(n(0,"div",54)(1,"span",52),l(2),d(3,"transloco"),o(),n(4,"code",73),l(5),o()()),t&2){let r=_();i(2),m("",p(3,2,"admin.operations.worker_block.worker_ip"),":"),i(3),v(r.ipaddr)}}function je(t,c){if(t&1&&(n(0,"div",54)(1,"span",52),l(2),d(3,"transloco"),o(),n(4,"span",100),l(5),o()()),t&2){let r=_();i(2),m("",p(3,3,"admin.operations.worker_block.worker_models"),":"),i(3),R("",r.models.slice(0,5).join(", "),"",r.models.length>5?" (+"+(r.models.length-5)+" more)":"")}}function Ke(t,c){if(t&1&&(n(0,"div",45)(1,"h4",98),l(2),d(3,"transloco"),o(),n(4,"div",99)(5,"div",51)(6,"span",52),l(7),d(8,"transloco"),o(),n(9,"span",100),l(10),o()(),n(11,"div",51)(12,"span",52),l(13),d(14,"transloco"),o(),n(15,"span",101),f(16,Le,2,0,"span",85)(17,$e,2,0,"span",102),f(18,Ve,2,0,"span",74),f(19,Ae,2,0,"span",102),o()(),n(20,"div",54)(21,"span",52),l(22,"UUID:"),o(),n(23,"code",73),l(24),o()(),n(25,"div",51)(26,"span",52),l(27),d(28,"transloco"),o(),n(29,"span",100),l(30),o()(),n(31,"div",51)(32,"span",52),l(33),d(34,"transloco"),o(),f(35,Ue,2,0,"span",85)(36,He,2,0,"span",102),o(),f(37,Me,6,4,"div",54),f(38,Qe,6,4,"div",54),f(39,je,6,5,"div",54),o()()),t&2){let r=c;i(2),m(" ",p(3,15,"admin.operations.worker_block.selected_worker")," "),i(5),m("",p(8,17,"admin.operations.worker_block.worker_name"),":"),i(3),v(r.name),i(3),m("",p(14,19,"admin.operations.worker_block.worker_status"),":"),i(3),k(r.online?16:17),i(2),k(r.maintenance_mode?18:-1),i(),k(r.paused?19:-1),i(5),v(r.id),i(3),m("",p(28,21,"admin.operations.worker_block.worker_type"),":"),i(3),v(r.type),i(3),m("",p(34,23,"admin.operations.worker_block.worker_trusted"),":"),i(2),k(r.trusted?35:36),i(2),k(r.owner?37:-1),i(),k(r.ipaddr?38:-1),i(),k(r.models&&r.models.length>0?39:-1)}}function Ge(t,c){t&1&&(l(0),d(1,"transloco")),t&2&&m(" ",p(1,1,"admin.operations.worker_block.looking_up")," ")}function qe(t,c){t&1&&(l(0),d(1,"transloco")),t&2&&m(" ",p(1,1,"admin.operations.worker_block.lookup_worker")," ")}function ze(t,c){if(t&1){let r=D();n(0,"div",103)(1,"span",58),l(2),d(3,"transloco"),o(),n(4,"button",105),x("click",function(){C(r);let s=_(2);return I(s.lookupWorkerByUUID())}),f(5,Ge,2,3)(6,qe,2,3),o()()}if(t&2){let r=_(2);i(2),v(p(3,3,"admin.operations.worker_block.uuid_detected")),i(2),g("disabled",r.fetchingWorkerInfo()),i(),k(r.fetchingWorkerInfo()?5:6)}}function Ne(t,c){if(t&1&&(n(0,"p",104),E(),n(1,"svg",32),O(2,"path",33),o(),l(3),o()),t&2){let r=_(2);i(3),m(" ",r.workerFetchError()," ")}}function Ye(t,c){if(t&1&&(n(0,"div",45),f(1,ze,7,5,"div",103),f(2,Ne,4,1,"p",104),o()),t&2){let r=_();i(),k(r.isUUIDFormat()?1:-1),i(),k(r.workerFetchError()?2:-1)}}function Je(t,c){if(t&1&&(n(0,"div",47)(1,"div",50)(2,"div",51)(3,"span",52),l(4),d(5,"transloco"),o(),n(6,"code",73),l(7),o()(),n(8,"div",51)(9,"span",52),l(10),d(11,"transloco"),o(),n(12,"span",74),l(13),o()()()()),t&2){let r=c,e=_();i(4),m("",p(5,4,"admin.operations.ip_timeouts.table.ip"),":"),i(3),v(r.ipaddr),i(3),m("",p(11,6,"admin.operations.ip_timeouts.table.remaining"),":"),i(3),v(e.formatDuration(r.seconds))}}function Xe(t,c){if(t&1&&(n(0,"option",24),l(1),o()),t&2){let r=c.$implicit;g("value",r),i(),R(" ",r," ",r===1?"hour":"hours"," ")}}function Ze(t,c){if(t&1){let r=D();n(0,"div",49)(1,"div",50)(2,"div",51)(3,"span",52),l(4),d(5,"transloco"),o(),n(6,"code",73),l(7),o()(),n(8,"div",51)(9,"span",52),l(10),d(11,"transloco"),o(),n(12,"span",74),l(13),o()()()(),n(14,"div",17)(15,"label",106),l(16),d(17,"transloco"),o(),n(18,"select",107),x("change",function(s){C(r);let a=_();return I(a.onRefreshIPHoursChange(s))}),P(19,Xe,2,3,"option",24,U),o()()}if(t&2){let r=c,e=_();i(4),m("",p(5,6,"admin.operations.ip_timeouts.table.ip"),":"),i(3),v(r.ipaddr),i(3),m("",p(11,8,"admin.operations.ip_timeouts.table.remaining"),":"),i(3),v(e.formatDuration(r.seconds)),i(3),m(" ",p(17,10,"admin.operations.dialog.refresh_duration")," "),i(2),g("value",e.refreshIPHours()),i(),B(e.hourOptions)}}function et(t,c){if(t&1&&(n(0,"div",47)(1,"div",50)(2,"div",51)(3,"span",52),l(4),d(5,"transloco"),o(),n(6,"span",100),l(7),o()(),n(8,"div",51)(9,"span",52),l(10,"ID:"),o(),n(11,"code",108),l(12),o()(),n(13,"div",51)(14,"span",52),l(15),d(16,"transloco"),o(),n(17,"span",74),l(18),o()()()()),t&2){let r=c,e=_();i(4),m("",p(5,6,"admin.operations.worker_block.worker_label"),":"),i(3),v(r.name),i(5),v(r.id),i(3),m("",p(16,8,"admin.operations.worker_block.days_label"),":"),i(3),R("",e.blockDays()," ",e.blockDays()===1?"day":"days")}}function tt(t,c){if(t&1&&(n(0,"div",47)(1,"div",50)(2,"div",51)(3,"span",52),l(4),d(5,"transloco"),o(),n(6,"span",100),l(7),o()(),n(8,"div",51)(9,"span",52),l(10,"ID:"),o(),n(11,"code",108),l(12),o()()()()),t&2){let r=c;i(4),m("",p(5,3,"admin.operations.worker_block.worker_label"),":"),i(3),v(r.name),i(5),v(r.id)}}function it(t,c){if(t&1&&(n(0,"code",110),l(1),o()),t&2){let r=c.$implicit;i(),v(r.ipaddr)}}function nt(t,c){if(t&1&&(n(0,"div",54)(1,"span",52),l(2),d(3,"transloco"),o(),n(4,"div",109),P(5,it,2,1,"code",110,j),o()()),t&2){let r=_();i(2),m("",p(3,1,"admin.operations.batch.ips_list"),":"),i(3),B(r.selectedIPsList())}}function ot(t,c){if(t&1&&(n(0,"code",110),l(1),o()),t&2){let r=c.$implicit;i(),v(r.ipaddr)}}function at(t,c){if(t&1&&(n(0,"div",54)(1,"span",52),l(2),d(3,"transloco"),o(),n(4,"div",109),P(5,ot,2,1,"code",110,j),n(7,"span",111),l(8),d(9,"transloco"),o()()()),t&2){let r=_();i(2),m("",p(3,2,"admin.operations.batch.ips_list"),":"),i(3),B(r.selectedIPsList().slice(0,3)),i(3),v(Y(9,4,"admin.operations.batch.and_more",N(7,ce,r.selectedCount()-3)))}}function rt(t,c){if(t&1&&(n(0,"option",24),l(1),o()),t&2){let r=c.$implicit;g("value",r),i(),R(" ",r," ",r===1?"hour":"hours"," ")}}var Et=(()=>{let c=class c{constructor(){this.title=y(X),this.translator=y(te),this.destroyRef=y(q),this.operationsService=y(se),this.workerService=y(ae),this.auth=y(Q),this.ipTimeouts=h([]),this.loadingTimeouts=h(!1),this.searchQuery=h(""),this.selectedIPs=h(new Set),this.batchRefreshHours=h(720),this.batchRefreshing=h(!1),this.batchRefreshProgress=h({completed:0,total:0}),this.addIPAddress=h(""),this.addIPHours=h(720),this.addingIP=h(!1),this.addIPWarning=F(()=>{let e=this.addIPAddress().trim();return!e||e.includes("/")?null:e.match(/\.0$/)?"This IP ends in .0 - did you forget to add a CIDR mask (e.g., /24)?":e.match(/::$/)?"This IP ends in :: - did you forget to add a CIDR mask (e.g., /64)?":null}),this.checkIPAddress=h(""),this.checkResult=h(void 0),this.checkingIP=h(!1),this.workers=h([]),this.loadingWorkers=h(!1),this.workerSearchQuery=h(""),this.selectedWorker=h(null),this.blockDays=h(1),this.blockingWorker=h(!1),this.workerDropdownOpen=h(!1),this.fetchingWorkerInfo=h(!1),this.workerFetchError=h(null),this.dialogOpen=h(!1),this.dialogType=h("deleteIP"),this.selectedIPForDelete=h(null),this.selectedIPForRefresh=h(null),this.refreshIPHours=h(720),this.selectedWorkerForUnblock=h(null),this.isDialogLoading=h(!1),this.toasts=h([]),this.hourOptions=[720,336,168,72,48,24,12,8,4,2,1],this.dayOptions=Array.from({length:30},(e,s)=>s+1),this.filteredTimeouts=F(()=>{let e=this.searchQuery().toLowerCase().trim();return e?this.ipTimeouts().filter(s=>s.ipaddr.toLowerCase().includes(e)):this.ipTimeouts()}),this.filteredWorkers=F(()=>{let e=this.workerSearchQuery().toLowerCase().trim();return e?this.workers().filter(s=>s.name.toLowerCase().includes(e)||s.id.toLowerCase().includes(e)).slice(0,50):this.workers().slice(0,50)}),this.selectedCount=F(()=>this.selectedIPs().size),this.allSelected=F(()=>{let e=this.filteredTimeouts();if(e.length===0)return!1;let s=this.selectedIPs();return e.every(a=>s.has(a.ipaddr))}),this.someSelected=F(()=>{let e=this.selectedIPs();return this.filteredTimeouts().some(a=>e.has(a.ipaddr))&&!this.allSelected()}),this.selectedIPsList=F(()=>{let e=this.selectedIPs();return this.ipTimeouts().filter(s=>e.has(s.ipaddr))})}ngOnInit(){K([this.translator.get("admin.operations.title"),this.translator.get("app_title")]).pipe(w(this.destroyRef)).subscribe(([e,s])=>{this.title.setTitle(`${e} | ${s}`)}),this.loadIPTimeouts(),this.loadWorkers()}loadIPTimeouts(){this.loadingTimeouts.set(!0),this.operationsService.getIPTimeouts().pipe(w(this.destroyRef),T(()=>this.loadingTimeouts.set(!1))).subscribe({next:e=>{this.ipTimeouts.set(e)},error:()=>{this.showToast("error","Failed to load IP timeouts.")}})}onSearchChange(e){let s=e.target;this.searchQuery.set(s.value)}formatDuration(e){if(e<60)return`${e}s`;if(e<3600)return`${Math.floor(e/60)}m`;if(e<86400)return`${Math.floor(e/3600)}h ${Math.floor(e%3600/60)}m`;let s=Math.floor(e/86400),a=Math.floor(e%86400/3600);return`${s}d ${a}h`}openDeleteIPDialog(e){this.selectedIPForDelete.set(e),this.dialogType.set("deleteIP"),this.dialogOpen.set(!0)}openRefreshIPDialog(e){this.selectedIPForRefresh.set(e),this.refreshIPHours.set(720),this.dialogType.set("refreshIP"),this.dialogOpen.set(!0)}onRefreshIPHoursChange(e){let s=e.target;this.refreshIPHours.set(parseInt(s.value,10))}toggleSelectIP(e){this.selectedIPs.update(s=>{let a=new Set(s);return a.has(e)?a.delete(e):a.add(e),a})}toggleSelectAll(){let e=this.filteredTimeouts();this.allSelected()?this.selectedIPs.update(s=>{let a=new Set(s);return e.forEach(u=>a.delete(u.ipaddr)),a}):this.selectedIPs.update(s=>{let a=new Set(s);return e.forEach(u=>a.add(u.ipaddr)),a})}clearSelection(){this.selectedIPs.set(new Set)}isIPSelected(e){return this.selectedIPs().has(e)}openBatchRefreshDialog(){this.selectedCount()!==0&&(this.batchRefreshHours.set(720),this.dialogType.set("batchRefreshIP"),this.dialogOpen.set(!0))}onBatchRefreshHoursChange(e){let s=e.target;this.batchRefreshHours.set(parseInt(s.value,10))}onAddIPAddressChange(e){let s=e.target;this.addIPAddress.set(s.value)}onAddIPHoursChange(e){let s=e.target;this.addIPHours.set(parseInt(s.value,10))}addIPTimeout(){let e=this.addIPAddress().trim();if(!e){this.showToast("error","IP address is required.");return}e.includes("/")||(e.includes(":")?e=`${e}/128`:e=`${e}/32`),this.addingIP.set(!0),this.operationsService.addIPTimeout({ipaddr:e,hours:this.addIPHours()}).pipe(w(this.destroyRef),T(()=>this.addingIP.set(!1))).subscribe({next:s=>{s?(this.showToast("success","IP timeout added successfully."),this.addIPAddress.set(""),this.loadIPTimeouts()):this.showToast("error","Failed to add IP timeout.")},error:()=>{this.showToast("error","Failed to add IP timeout.")}})}onCheckIPAddressChange(e){let s=e.target;this.checkIPAddress.set(s.value),this.checkResult.set(void 0)}checkIP(){let e=this.checkIPAddress().trim();if(!e){this.showToast("error","IP address is required.");return}this.checkingIP.set(!0),this.checkResult.set(void 0),this.operationsService.getIPTimeout(e).pipe(w(this.destroyRef),T(()=>this.checkingIP.set(!1))).subscribe({next:s=>{this.checkResult.set(s)},error:()=>{this.showToast("error","Failed to check IP.")}})}clearCheckResult(){this.checkIPAddress.set(""),this.checkResult.set(void 0)}loadWorkers(){this.loadingWorkers.set(!0),this.workerService.getWorkers().pipe(w(this.destroyRef),T(()=>this.loadingWorkers.set(!1))).subscribe({next:e=>{this.workers.set(e)},error:()=>{this.showToast("error","Failed to load workers.")}})}onWorkerSearchChange(e){let a=e.target.value;this.workerSearchQuery.set(a),this.workerDropdownOpen.set(!0),this.workerFetchError.set(null),a.trim()||this.selectedWorker.set(null)}selectWorker(e){this.selectedWorker.set(e),this.workerSearchQuery.set(`${e.name} (${e.id.slice(0,8)}...)`),this.workerDropdownOpen.set(!1)}clearWorkerSelection(){this.selectedWorker.set(null),this.workerSearchQuery.set(""),this.workerFetchError.set(null)}lookupWorkerByUUID(){let e=this.workerSearchQuery().trim();if(!/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/i.test(e)){this.workerFetchError.set("Invalid UUID format. Expected format: xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx");return}let a=this.workers().find(u=>u.id.toLowerCase()===e.toLowerCase());if(a){this.selectWorker(a);return}this.fetchingWorkerInfo.set(!0),this.workerFetchError.set(null),this.workerService.getWorker(e).pipe(w(this.destroyRef),T(()=>this.fetchingWorkerInfo.set(!1))).subscribe({next:u=>{u?this.selectWorker(u):this.workerFetchError.set("Worker not found with this UUID.")},error:()=>{this.workerFetchError.set("Failed to fetch worker information.")}})}isUUIDFormat(){let e=this.workerSearchQuery().trim();return/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/i.test(e)}onBlockDaysChange(e){let s=e.target;this.blockDays.set(parseInt(s.value,10))}openBlockWorkerDialog(){if(!this.selectedWorker()){this.showToast("error","Please select a worker first.");return}this.dialogType.set("blockWorker"),this.dialogOpen.set(!0)}openUnblockWorkerDialog(e){this.selectedWorkerForUnblock.set(e),this.dialogType.set("unblockWorker"),this.dialogOpen.set(!0)}closeDialog(){this.dialogOpen.set(!1),this.selectedIPForDelete.set(null),this.selectedIPForRefresh.set(null),this.selectedWorkerForUnblock.set(null)}confirmDialog(){let e=this.dialogType();e==="deleteIP"?this.confirmDeleteIP():e==="refreshIP"?this.confirmRefreshIP():e==="batchRefreshIP"?this.confirmBatchRefreshIP():e==="blockWorker"?this.confirmBlockWorker():e==="unblockWorker"&&this.confirmUnblockWorker()}confirmDeleteIP(){let e=this.selectedIPForDelete();e&&(this.isDialogLoading.set(!0),this.operationsService.removeIPTimeout(e.ipaddr).pipe(w(this.destroyRef),T(()=>this.isDialogLoading.set(!1))).subscribe({next:s=>{s?(this.showToast("success","IP timeout removed successfully."),this.closeDialog(),this.loadIPTimeouts()):this.showToast("error","Failed to remove IP timeout.")},error:()=>{this.showToast("error","Failed to remove IP timeout.")}}))}confirmRefreshIP(){let e=this.selectedIPForRefresh();e&&(this.isDialogLoading.set(!0),this.operationsService.addIPTimeout({ipaddr:e.ipaddr,hours:this.refreshIPHours()}).pipe(w(this.destroyRef),T(()=>this.isDialogLoading.set(!1))).subscribe({next:s=>{s?(this.showToast("success","IP timeout refreshed successfully."),this.closeDialog(),this.loadIPTimeouts()):this.showToast("error","Failed to refresh IP timeout.")},error:()=>{this.showToast("error","Failed to refresh IP timeout.")}}))}confirmBatchRefreshIP(){let e=this.selectedIPsList();if(e.length===0)return;this.isDialogLoading.set(!0),this.batchRefreshing.set(!0),this.batchRefreshProgress.set({completed:0,total:e.length});let s=this.batchRefreshHours(),a=0,u=0,b=0,V=L=>{if(L>=e.length){this.isDialogLoading.set(!1),this.batchRefreshing.set(!1),this.closeDialog(),this.clearSelection(),this.loadIPTimeouts(),b===0?this.showToast("success",`Successfully refreshed ${u} IP timeout(s).`):this.showToast("warning",`Refreshed ${u} IP(s), ${b} failed.`);return}let H=e[L];this.operationsService.addIPTimeout({ipaddr:H.ipaddr,hours:s}).pipe(w(this.destroyRef)).subscribe({next:de=>{a++,de?u++:b++,this.batchRefreshProgress.set({completed:a,total:e.length}),V(L+1)},error:()=>{a++,b++,this.batchRefreshProgress.set({completed:a,total:e.length}),V(L+1)}})};V(0)}confirmBlockWorker(){let e=this.selectedWorker();e&&(this.isDialogLoading.set(!0),this.operationsService.blockWorkerIP(e.id,this.blockDays()).pipe(w(this.destroyRef),T(()=>this.isDialogLoading.set(!1))).subscribe({next:s=>{s?(this.showToast("success",`Worker "${e.name}" IP blocked for ${this.blockDays()} day(s).`),this.closeDialog(),this.clearWorkerSelection()):this.showToast("error","Failed to block worker IP.")},error:()=>{this.showToast("error","Failed to block worker IP.")}}))}confirmUnblockWorker(){let e=this.selectedWorkerForUnblock();e&&(this.isDialogLoading.set(!0),this.operationsService.unblockWorkerIP(e.id).pipe(w(this.destroyRef),T(()=>this.isDialogLoading.set(!1))).subscribe({next:s=>{s?(this.showToast("success",`Worker "${e.name}" IP block removed.`),this.closeDialog()):this.showToast("error","Failed to unblock worker IP.")},error:()=>{this.showToast("error","Failed to unblock worker IP.")}}))}showToast(e,s,a=e==="success"){let u=`toast-${Date.now()}-${Math.random().toString(36).slice(2,7)}`;this.toasts.update(b=>[...b,{id:u,type:e,message:s}]),a&&setTimeout(()=>this.dismissToast(u),3e3)}dismissToast(e){this.toasts.update(s=>s.filter(a=>a.id!==e))}hasUnsavedChanges(){return this.dialogOpen()}onWorkerDropdownBlur(){setTimeout(()=>{this.workerDropdownOpen.set(!1)},200)}onWorkerInputFocus(){this.workerDropdownOpen.set(!0)}};c.\u0275fac=function(s){return new(s||c)},c.\u0275cmp=z({type:c,selectors:[["app-operations"]],decls:171,vars:184,consts:[[1,"admin-container-lg"],[1,"admin-header"],[1,"admin-heading-page"],["type","button",1,"btn-muted",3,"click","disabled"],[1,"mb-8"],[1,"admin-heading-section","mb-4"],[1,"admin-text-muted","mb-4"],[1,"filter-controls","mb-4"],[1,"filter-search"],["type","text",1,"form-input",3,"input","value","placeholder"],[1,"flex","items-center","gap-3"],[1,"admin-loading"],[1,"admin-empty"],[1,"panel","overflow-hidden"],[1,"admin-grid-2-col"],[1,"panel","p-6"],[1,"stack-md"],[1,"form-group"],["for","add-ip-address",1,"form-label"],[1,"admin-text-red"],["id","add-ip-address","type","text",1,"form-input",3,"input","value","placeholder"],[1,"admin-text-warning","text-sm","mt-1"],["for","add-ip-hours",1,"form-label"],["id","add-ip-hours",1,"form-select",3,"change","value"],[3,"value"],["type","button",1,"btn-primary",3,"click","disabled"],["for","check-ip-address",1,"form-label"],["id","check-ip-address","type","text",1,"form-input",3,"input","value","placeholder"],[1,"admin-form-actions"],["type","button",1,"btn-primary","flex-1",3,"click","disabled"],["type","button",1,"btn-muted"],[1,"admin-text-warning","mb-4"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"admin-icon-inline"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"],[1,"panel","p-6","max-w-3xl","overflow-visible"],[1,"admin-form-row"],[1,"form-group","flex-1"],["for","worker-search",1,"form-label"],[1,"relative"],["id","worker-search","type","text","autocomplete","off",1,"form-input",3,"input","focus","blur","value","placeholder"],["type","button",1,"input-clear-btn",3,"title"],[1,"worker-dropdown"],["for","block-days",1,"form-label"],["id","block-days",1,"form-select",3,"change","value"],["type","button",1,"btn-danger",3,"click","disabled"],[1,"admin-section-divider"],["variant","danger",3,"confirm","cancel","open","title","confirmLabel","cancelLabel","loading","loadingLabel"],[1,"panel","p-4"],[3,"confirm","cancel","open","title","confirmLabel","cancelLabel","loading","loadingLabel"],[1,"panel","p-4","mb-4"],[1,"stack-sm"],[1,"admin-info-item"],[1,"admin-info-label"],[1,"badge-base","badge-info"],[1,"admin-info-item","admin-info-item-full"],["for","batch-refresh-hours",1,"form-label"],["id","batch-refresh-hours",1,"form-select",3,"change","value"],[3,"dismiss","toasts"],[1,"admin-text-muted","text-sm"],["type","button",1,"btn-primary","btn-sm",3,"click"],["type","button",1,"btn-muted","btn-sm",3,"click"],["fill","none","viewBox","0 0 24 24","aria-hidden","true",1,"admin-spinner"],["cx","12","cy","12","r","10","stroke","currentColor","stroke-width","4",1,"admin-spinner-track"],["fill","currentColor","d","M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4z",1,"admin-spinner-head"],[1,"admin-loading-text"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"admin-empty-icon"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"],[1,"admin-empty-text"],[1,"data-table-wrapper"],[1,"data-table"],[1,"w-10"],["type","checkbox",1,"checkbox-input",3,"change","checked","indeterminate","title"],["type","checkbox",1,"checkbox-input",3,"change","checked"],[1,"data-table-mono","data-table-mono-primary"],[1,"badge-base","badge-warning"],[1,"data-table-actions"],["type","button",1,"btn-icon",3,"click","title"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-4","h-4"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"],["type","button",1,"btn-icon","btn-icon-danger",3,"click","title"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"],["type","button",1,"btn-muted",3,"click"],[1,"test-result","test-result-safe"],[1,"test-result","test-result-blocked"],[1,"test-result-header"],[1,"badge-base","badge-success"],[1,"admin-text-muted","ml-2"],[1,"badge-base","badge-danger"],["type","button",1,"input-clear-btn",3,"click","title"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"icon-sm"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M6 18L18 6M6 6l12 12"],[1,"worker-dropdown-loading"],["type","button",1,"worker-dropdown-item"],["type","button",1,"worker-dropdown-item",3,"mousedown"],[1,"worker-dropdown-name"],[1,"worker-dropdown-id"],[1,"badge-base","badge-success","ml-auto"],[1,"badge-base","badge-muted","ml-auto"],[1,"admin-section-title"],[1,"admin-info-grid"],[1,"admin-info-value"],[1,"badge-container"],[1,"badge-base","badge-muted"],[1,"admin-lookup-row"],[1,"admin-text-warning","text-sm","mt-2"],["type","button",1,"btn-muted","btn-sm",3,"click","disabled"],["for","refresh-ip-hours",1,"form-label"],["id","refresh-ip-hours",1,"form-select",3,"change","value"],[1,"data-table-mono"],[1,"flex","flex-wrap","gap-1","mt-1"],[1,"data-table-mono","data-table-mono-primary","text-xs"],[1,"admin-text-muted","text-xs"]],template:function(s,a){if(s&1&&(n(0,"div",0)(1,"div",1)(2,"h1",2),l(3),d(4,"transloco"),o(),n(5,"button",3),x("click",function(){return a.loadIPTimeouts()}),l(6),d(7,"transloco"),o()(),n(8,"section",4)(9,"h2",5),l(10),d(11,"transloco"),o(),n(12,"p",6),l(13),d(14,"transloco"),o(),n(15,"div",7)(16,"div",8)(17,"input",9),d(18,"transloco"),x("input",function(b){return a.onSearchChange(b)}),o()(),f(19,ue,11,12,"div",10),o(),f(20,he,7,3,"div",11)(21,_e,6,3,"div",12)(22,ke,20,15,"div",13),o(),n(23,"div",14)(24,"section")(25,"h2",5),l(26),d(27,"transloco"),o(),n(28,"p",6),l(29),d(30,"transloco"),o(),n(31,"div",15)(32,"div",16)(33,"div",17)(34,"label",18),l(35),d(36,"transloco"),n(37,"span",19),l(38,"*"),o()(),n(39,"input",20),d(40,"transloco"),x("input",function(b){return a.onAddIPAddressChange(b)}),o(),f(41,ge,4,1,"p",21),o(),n(42,"div",17)(43,"label",22),l(44),d(45,"transloco"),o(),n(46,"select",23),x("change",function(b){return a.onAddIPHoursChange(b)}),P(47,xe,2,3,"option",24,U),o()(),n(49,"button",25),x("click",function(){return a.addIPTimeout()}),f(50,ve,2,3)(51,be,2,3),o()()()(),n(52,"section")(53,"h2",5),l(54),d(55,"transloco"),o(),n(56,"p",6),l(57),d(58,"transloco"),o(),n(59,"div",15)(60,"div",16)(61,"div",17)(62,"label",26),l(63),d(64,"transloco"),o(),n(65,"input",27),d(66,"transloco"),x("input",function(b){return a.onCheckIPAddressChange(b)}),o()(),n(67,"div",28)(68,"button",29),x("click",function(){return a.checkIP()}),f(69,Ce,2,3)(70,Ie,2,3),o(),f(71,we,3,3,"button",30),o(),f(72,ye,3,1,"div"),o()()()(),n(73,"section",4)(74,"h2",5),l(75),d(76,"transloco"),o(),n(77,"p",6),l(78),d(79,"transloco"),o(),n(80,"p",31),E(),n(81,"svg",32),O(82,"path",33),o(),l(83),d(84,"transloco"),o(),A(),n(85,"div",34)(86,"div",35)(87,"div",36)(88,"label",37),l(89),d(90,"transloco"),n(91,"span",19),l(92,"*"),o()(),n(93,"div",38)(94,"input",39),d(95,"transloco"),x("input",function(b){return a.onWorkerSearchChange(b)})("focus",function(){return a.onWorkerInputFocus()})("blur",function(){return a.onWorkerDropdownBlur()}),o(),f(96,Ee,4,4,"button",40),f(97,Re,3,1,"div",41),o()(),n(98,"div",17)(99,"label",42),l(100),d(101,"transloco"),o(),n(102,"select",43),x("change",function(b){return a.onBlockDaysChange(b)}),P(103,Fe,2,3,"option",24,U),o()(),n(105,"button",44),x("click",function(){return a.openBlockWorkerDialog()}),l(106),d(107,"transloco"),o()(),f(108,Ke,40,25,"div",45)(109,Ye,3,2,"div",45),o()()(),n(110,"app-admin-dialog",46),d(111,"transloco"),d(112,"transloco"),d(113,"transloco"),d(114,"transloco"),x("confirm",function(){return a.confirmDialog()})("cancel",function(){return a.closeDialog()}),n(115,"p",6),l(116),d(117,"transloco"),o(),f(118,Je,14,8,"div",47),o(),n(119,"app-admin-dialog",48),d(120,"transloco"),d(121,"transloco"),d(122,"transloco"),d(123,"transloco"),x("confirm",function(){return a.confirmDialog()})("cancel",function(){return a.closeDialog()}),n(124,"p",6),l(125),d(126,"transloco"),o(),f(127,Ze,21,12),o(),n(128,"app-admin-dialog",46),d(129,"transloco"),d(130,"transloco"),d(131,"transloco"),d(132,"transloco"),x("confirm",function(){return a.confirmDialog()})("cancel",function(){return a.closeDialog()}),n(133,"p",6),l(134),d(135,"transloco"),o(),f(136,et,19,10,"div",47),o(),n(137,"app-admin-dialog",48),d(138,"transloco"),d(139,"transloco"),d(140,"transloco"),d(141,"transloco"),x("confirm",function(){return a.confirmDialog()})("cancel",function(){return a.closeDialog()}),n(142,"p",6),l(143),d(144,"transloco"),o(),f(145,tt,13,5,"div",47),o(),n(146,"app-admin-dialog",48),d(147,"transloco"),d(148,"transloco"),d(149,"transloco"),x("confirm",function(){return a.confirmDialog()})("cancel",function(){return a.closeDialog()}),n(150,"p",6),l(151),d(152,"transloco"),o(),n(153,"div",49)(154,"div",50)(155,"div",51)(156,"span",52),l(157),d(158,"transloco"),o(),n(159,"span",53),l(160),o()(),f(161,nt,7,3,"div",54)(162,at,10,9,"div",54),o()(),n(163,"div",17)(164,"label",55),l(165),d(166,"transloco"),o(),n(167,"select",56),x("change",function(b){return a.onBatchRefreshHoursChange(b)}),P(168,rt,2,3,"option",24,U),o()()(),n(170,"app-admin-toast-bar",57),x("dismiss",function(b){return a.dismissToast(b)}),o()),s&2){let u,b,V,L,H;i(3),m(" ",p(4,90,"admin.operations.title")," "),i(2),g("disabled",a.loadingTimeouts()),i(),m(" ",p(7,92,"admin.operations.refresh")," "),i(4),m(" ",p(11,94,"admin.operations.ip_timeouts.title")," "),i(3),m(" ",p(14,96,"admin.operations.ip_timeouts.description")," "),i(4),g("placeholder",W(p(18,98,"admin.operations.ip_timeouts.search_placeholder")))("value",a.searchQuery()),i(2),k(a.selectedCount()>0?19:-1),i(),k(a.loadingTimeouts()?20:a.filteredTimeouts().length===0?21:22),i(6),m(" ",p(27,100,"admin.operations.add_ip.title")," "),i(3),m(" ",p(30,102,"admin.operations.add_ip.description")," "),i(6),m(" ",p(36,104,"admin.operations.add_ip.ip_label")," "),i(4),g("placeholder",W(p(40,106,"admin.operations.add_ip.ip_placeholder")))("value",a.addIPAddress()),i(2),k(a.addIPWarning()?41:-1),i(3),m(" ",p(45,108,"admin.operations.add_ip.hours_label")," "),i(2),g("value",a.addIPHours()),i(),B(a.hourOptions),i(2),g("disabled",a.addingIP()||!a.addIPAddress().trim()),i(),k(a.addingIP()?50:51),i(4),m(" ",p(55,110,"admin.operations.check_ip.title")," "),i(3),m(" ",p(58,112,"admin.operations.check_ip.description")," "),i(6),m(" ",p(64,114,"admin.operations.check_ip.ip_label")," "),i(2),g("placeholder",W(p(66,116,"admin.operations.check_ip.ip_placeholder")))("value",a.checkIPAddress()),i(3),g("disabled",a.checkingIP()||!a.checkIPAddress().trim()),i(),k(a.checkingIP()?69:70),i(2),k(a.checkResult()!==void 0?71:-1),i(),k(a.checkResult()!==void 0?72:-1),i(3),m(" ",p(76,118,"admin.operations.worker_block.title")," "),i(3),m(" ",p(79,120,"admin.operations.worker_block.description")," "),i(5),m(" ",p(84,122,"admin.operations.worker_block.active_workers_note")," "),i(6),m(" ",p(90,124,"admin.operations.worker_block.worker_label")," "),i(5),g("placeholder",W(p(95,126,"admin.operations.worker_block.worker_placeholder")))("value",a.workerSearchQuery()),i(2),k(a.selectedWorker()?96:-1),i(),k(a.workerDropdownOpen()&&!a.selectedWorker()&&a.filteredWorkers().length>0?97:-1),i(3),m(" ",p(101,128,"admin.operations.worker_block.days_label")," "),i(2),g("value",a.blockDays()),i(),B(a.dayOptions),i(2),g("disabled",a.blockingWorker()||!a.selectedWorker()),i(),m(" ",p(107,130,"admin.operations.worker_block.block_button")," "),i(2),k((u=a.selectedWorker())?108:!a.selectedWorker()&&a.workerSearchQuery().trim()&&!a.workerDropdownOpen()?109:-1,u),i(2),g("open",a.dialogOpen()&&a.dialogType()==="deleteIP")("title",p(111,132,"admin.operations.dialog.delete_ip_title"))("confirmLabel",p(112,134,"admin.operations.dialog.delete"))("cancelLabel",p(113,136,"admin.operations.dialog.cancel"))("loading",a.isDialogLoading())("loadingLabel",p(114,138,"admin.operations.dialog.deleting")),i(6),m(" ",p(117,140,"admin.operations.dialog.delete_ip_confirm")," "),i(2),k((b=a.selectedIPForDelete())?118:-1,b),i(),g("open",a.dialogOpen()&&a.dialogType()==="refreshIP")("title",p(120,142,"admin.operations.dialog.refresh_ip_title"))("confirmLabel",p(121,144,"admin.operations.dialog.refresh"))("cancelLabel",p(122,146,"admin.operations.dialog.cancel"))("loading",a.isDialogLoading())("loadingLabel",p(123,148,"admin.operations.dialog.refreshing")),i(6),m(" ",p(126,150,"admin.operations.dialog.refresh_ip_confirm")," "),i(2),k((V=a.selectedIPForRefresh())?127:-1,V),i(),g("open",a.dialogOpen()&&a.dialogType()==="blockWorker")("title",p(129,152,"admin.operations.dialog.block_worker_title"))("confirmLabel",p(130,154,"admin.operations.dialog.block"))("cancelLabel",p(131,156,"admin.operations.dialog.cancel"))("loading",a.isDialogLoading())("loadingLabel",p(132,158,"admin.operations.dialog.blocking")),i(6),m(" ",p(135,160,"admin.operations.dialog.block_worker_confirm")," "),i(2),k((L=a.selectedWorker())?136:-1,L),i(),g("open",a.dialogOpen()&&a.dialogType()==="unblockWorker")("title",p(138,162,"admin.operations.dialog.unblock_worker_title"))("confirmLabel",p(139,164,"admin.operations.dialog.unblock"))("cancelLabel",p(140,166,"admin.operations.dialog.cancel"))("loading",a.isDialogLoading())("loadingLabel",p(141,168,"admin.operations.dialog.unblocking")),i(6),m(" ",p(144,170,"admin.operations.dialog.unblock_worker_confirm")," "),i(2),k((H=a.selectedWorkerForUnblock())?145:-1,H),i(),g("open",a.dialogOpen()&&a.dialogType()==="batchRefreshIP")("title",p(147,172,"admin.operations.dialog.batch_refresh_title"))("confirmLabel",p(148,174,"admin.operations.dialog.refresh"))("cancelLabel",p(149,176,"admin.operations.dialog.cancel"))("loading",a.isDialogLoading())("loadingLabel",a.batchRefreshProgress().completed+"/"+a.batchRefreshProgress().total),i(5),m(" ",p(152,178,"admin.operations.dialog.batch_refresh_confirm")," "),i(6),m("",p(158,180,"admin.operations.batch.ips_selected"),":"),i(3),v(a.selectedCount()),i(),k(a.selectedCount()<=5?161:162),i(4),m(" ",p(166,182,"admin.operations.dialog.refresh_duration")," "),i(2),g("value",a.batchRefreshHours()),i(),B(a.hourOptions),i(2),g("toasts",a.toasts())}},dependencies:[Z,ee,oe,ie,ne,le,re],encapsulation:2,changeDetection:0});let t=c;return t})();export{Et as OperationsComponent};
