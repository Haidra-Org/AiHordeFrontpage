import{a as _e}from"./chunk-WY5ISYID.js";import{a as et}from"./chunk-XSJHBJON.js";import{a as Xe,b as xe,d as tt}from"./chunk-KQZVQD3N.js";import{a as $e}from"./chunk-62U34UEH.js";import{a as it,b as nt}from"./chunk-IZUKE6BY.js";import{a as Ye,b as Je}from"./chunk-H37K32K2.js";import{c as Y,d as P,e as J,f as se,g as de,h as D,i as He,j as pe,k as Ge,l as ce,m as me,o as je,p as ze,s as Ze,u as Qe,v as ue}from"./chunk-ITLJRJUO.js";import{a as qe,b as Oe}from"./chunk-DY5J6W22.js";import{a as fe}from"./chunk-UQV72EDM.js";import{a as Re}from"./chunk-ISHBUXAM.js";import{c as M,d as We}from"./chunk-BMIYH3UD.js";import{a as G}from"./chunk-Z4QX4XJM.js";import"./chunk-T6V27EFK.js";import{d as re,e as le}from"./chunk-T4BZNTIM.js";import"./chunk-VFTR325L.js";import{k as Ne}from"./chunk-XFTKCJLM.js";import{c as Ae,g as Me,k as K}from"./chunk-GZDNXZTC.js";import{A as O,Cb as g,Db as u,F as ye,Hb as Ie,Ib as Be,Jb as Pe,Kb as ge,Lb as Ke,Oa as i,Ob as A,Pb as Le,Qb as De,Rb as s,S as Ee,Sb as h,Tb as m,Vb as Ve,Wb as Ue,X as I,Xb as Fe,Za as F,aa as C,ba as y,ca as V,da as W,dc as j,ga as R,gc as p,hc as c,ic as z,j as ke,ja as k,k as ne,l as ee,nb as B,nc as T,ob as _,oc as ae,pb as f,q,qc as U,r as Se,rb as $,rc as w,s as we,sb as H,sc as ve,ta as Te,tb as v,ub as a,vb as r,w as oe,wb as S,zb as E}from"./chunk-QF4LG6ZD.js";import{a as Z,b as Q}from"./chunk-4CLCTAJ7.js";var ot=(()=>{let d=class d{constructor(){this.httpClient=I(Me),this.auth=I(G),this.baseUrl="https://aihorde.net/api/v2/sharedkeys",this.clientAgent="AiHordeFrontpage:login",this.handleError=t=>{let o={status:t.status??0,message:t.error?.message??"Unexpected error while contacting the API.",rc:t.error?.rc};return ee(()=>o)}}buildHeaders(t){let o={"Client-Agent":this.clientAgent};return t&&(o.apikey=t),o}ensureApiKey(){return this.auth.getStoredApiKey()}getSharedKey(t){let o=this.ensureApiKey();return this.httpClient.get(`${this.baseUrl}/${t}`,{headers:this.buildHeaders(o??void 0)}).pipe(O(this.handleError))}getSharedKeysByIds(t){return t.length===0?ne([]):oe(t.map(o=>this.getSharedKey(o))).pipe(q(o=>o.filter(l=>!!l)))}createSharedKey(t){let o=this.ensureApiKey();return o?this.httpClient.put(`${this.baseUrl}`,t,{headers:this.buildHeaders(o)}).pipe(O(this.handleError)):ee(()=>({status:401,message:"Missing API key. Please log in again to manage shared keys."}))}updateSharedKey(t,o){let l=this.ensureApiKey();return l?this.httpClient.patch(`${this.baseUrl}/${t}`,o,{headers:this.buildHeaders(l)}).pipe(O(this.handleError)):ee(()=>({status:401,message:"Missing API key. Please log in again to manage shared keys."}))}deleteSharedKey(t){let o=this.ensureApiKey();return o?this.httpClient.delete(`${this.baseUrl}/${t}`,{headers:this.buildHeaders(o)}).pipe(q(()=>!0),O(this.handleError)):ee(()=>({status:401,message:"Missing API key. Please log in again to manage shared keys."}))}};d.\u0275fac=function(o){return new(o||d)},d.\u0275prov=Ee({token:d,factory:d.\u0275fac,providedIn:"root"});let e=d;return e})();var te=["kudos","expiry","max_image_pixels","max_image_steps","max_text_tokens"],N={name:"",kudos:5e3,kudos_unlimited:!1,expiry:-1,expiry_unlimited:!0,max_image_pixels:-1,max_image_pixels_unlimited:!0,max_image_steps:-1,max_image_steps_unlimited:!0,max_text_tokens:-1,max_text_tokens_unlimited:!0},he={kudos:5e3,expiry:30,max_image_pixels:1048576,max_image_steps:30,max_text_tokens:256},at=[{label:"512 x 512",value:262144},{label:"768 x 768",value:589824},{label:"1024 x 1024",value:1048576}];var mt=(e,d)=>d.value;function ut(e,d){e&1&&(a(0,"span",6),s(1),p(2,"transloco"),r()),e&2&&(i(),h(c(2,1,"profile.shared_keys.unlimited")))}function _t(e,d){e&1&&(a(0,"span",6),s(1),p(2,"transloco"),r()),e&2&&(i(),h(c(2,1,"profile.shared_keys.unlimited")))}function ft(e,d){if(e&1&&(a(0,"p",11),s(1),r()),e&2){let n=u();i(),m(" ~ ",n.squareDimensionFromPixels(n.getMaxImagePixelsValue())," px ")}}function xt(e,d){e&1&&(a(0,"span",6),s(1),p(2,"transloco"),r()),e&2&&(i(),h(c(2,1,"profile.shared_keys.unlimited")))}function ht(e,d){if(e&1){let n=E();a(0,"button",24),g("click",function(){let o=C(n).$implicit,l=u();return y(l.applyImagePixelsPreset(o.value))}),s(1),r()}if(e&2){let n=d.$implicit;i(),m(" ",n.label," ")}}function Ct(e,d){e&1&&(a(0,"span",6),s(1),p(2,"transloco"),r()),e&2&&(i(),h(c(2,1,"profile.shared_keys.unlimited")))}function yt(e,d){e&1&&(a(0,"span",6),s(1),p(2,"transloco"),r()),e&2&&(i(),h(c(2,1,"profile.shared_keys.unlimited")))}function gt(e,d){if(e&1){let n=E();a(0,"button",25),g("click",function(){C(n);let o=u();return y(o.onCancel())}),s(1),r()}if(e&2){let n=u();v("disabled",n.submitting()),i(),m(" ",n.cancelLabel()," ")}}function vt(e,d){if(e&1&&s(0),e&2){let n=u();m(" ",n.submittingLabel()," ")}}function bt(e,d){if(e&1&&s(0),e&2){let n=u();m(" ",n.submitLabel()," ")}}var Ce=(()=>{let d=class d{constructor(){this.destroyRef=I(R),this.initialValues=w(N),this.submitLabel=w("Save"),this.submittingLabel=w("Saving..."),this.submitting=w(!1),this.showCancel=w(!1),this.cancelLabel=w("Cancel"),this.formSubmit=U(),this.formCancel=U(),this.form=this.createForm(N),this.imagePixelPresets=at,this.finiteCache=this.createFiniteCache(N),ae(()=>{let t=this.initialValues();this.applyFormValues(t)})}ngOnInit(){this.linkUnlimitedControls()}squareDimensionFromPixels(t){if(t==null||t<=0)return null;let o=Math.round(Math.sqrt(t));return`${o} x ${o}`}applyImagePixelsPreset(t){let o=this.form.controls.max_image_pixels,l=this.form.controls.max_image_pixels_unlimited,x={emitEvent:!1};l.setValue(!1,x),o.enable(x),o.setValue(t,x),this.finiteCache.max_image_pixels=t,o.markAsDirty(),o.markAsTouched(),l.markAsDirty(),l.markAsTouched(),this.form.updateValueAndValidity()}onSubmit(){if(!this.form.valid)return;let t=this.buildPayload();this.formSubmit.emit(t)}onCancel(){this.formCancel.emit()}getMaxImagePixelsValue(){return this.form.controls.max_image_pixels.getRawValue()}isUnlimited(t){return this.form.controls[`${t}_unlimited`]?.value??!1}createForm(t){return new de({name:new D(t.name,{nonNullable:!0,validators:[P.required,P.minLength(3),P.maxLength(255)]}),kudos:new D(t.kudos,{nonNullable:!0,validators:[P.required,P.min(-1),P.max(5e7)]}),kudos_unlimited:new D(t.kudos_unlimited,{nonNullable:!0}),expiry:new D(t.expiry,{nonNullable:!0,validators:[P.required,P.min(-1)]}),expiry_unlimited:new D(t.expiry_unlimited,{nonNullable:!0}),max_image_pixels:new D(t.max_image_pixels,{nonNullable:!0,validators:[P.required,P.min(-1),P.max(4194304)]}),max_image_pixels_unlimited:new D(t.max_image_pixels_unlimited,{nonNullable:!0}),max_image_steps:new D(t.max_image_steps,{nonNullable:!0,validators:[P.required,P.min(-1),P.max(500)]}),max_image_steps_unlimited:new D(t.max_image_steps_unlimited,{nonNullable:!0}),max_text_tokens:new D(t.max_text_tokens,{nonNullable:!0,validators:[P.required,P.min(-1),P.max(500)]}),max_text_tokens_unlimited:new D(t.max_text_tokens_unlimited,{nonNullable:!0})})}createFiniteCache(t){return te.reduce((o,l)=>{let x=t[l];return o[l]=x!==-1?x:he[l],o},{})}seedFiniteCacheFromValues(t){te.forEach(o=>{let l=t[o];this.finiteCache[o]=l!==-1?l:this.finiteCache[o]??he[o]})}applyUnlimitedState(t,o){let l=this.form.controls[t],x={emitEvent:!1};if(o){let b=l.getRawValue();typeof b=="number"&&b!==-1&&(this.finiteCache[t]=b),l.disable(x),l.setValue(-1,x)}else{let b=this.finiteCache[t]??he[t];l.enable(x),l.setValue(b,x)}}refreshUnlimitedStates(){te.forEach(t=>{let o=this.form.controls[`${t}_unlimited`];this.applyUnlimitedState(t,!!o.value)})}linkUnlimitedControls(){te.forEach(t=>{let o=this.form.controls[t],l=this.form.controls[`${t}_unlimited`];this.applyUnlimitedState(t,!!l.value),l.valueChanges.pipe(K(this.destroyRef)).subscribe(x=>this.applyUnlimitedState(t,!!x)),o.valueChanges.pipe(K(this.destroyRef)).subscribe(x=>{o.disabled||typeof x=="number"&&x!==-1&&(this.finiteCache[t]=x)})})}applyFormValues(t){this.form.enable({emitEvent:!1}),this.form.setValue(t,{emitEvent:!1}),this.seedFiniteCacheFromValues(t),this.refreshUnlimitedStates(),this.form.markAsPristine(),this.form.markAsUntouched()}buildPayload(){let t=this.form.getRawValue();return{name:t.name.trim(),kudos:Number(t.kudos),expiry:Number(t.expiry),max_image_pixels:Number(t.max_image_pixels),max_image_steps:Number(t.max_image_steps),max_text_tokens:Number(t.max_text_tokens)}}};d.\u0275fac=function(o){return new(o||d)},d.\u0275cmp=F({type:d,selectors:[["app-shared-key-form"]],inputs:{initialValues:[1,"initialValues"],submitLabel:[1,"submitLabel"],submittingLabel:[1,"submittingLabel"],submitting:[1,"submitting"],showCancel:[1,"showCancel"],cancelLabel:[1,"cancelLabel"]},outputs:{formSubmit:"formSubmit",formCancel:"formCancel"},decls:68,vars:54,consts:[[1,"shared-key-form",3,"ngSubmit","formGroup"],[1,"shared-key-form-grid"],[1,"form-label"],["type","text","formControlName","name",1,"form-input",3,"placeholder"],[1,"form-field-container"],["type","number","formControlName","kudos","aria-describedby","shared-key-kudos-hint",1,"form-input"],[1,"form-input-unlimited-overlay"],["formControlName","kudos_unlimited",3,"description"],["type","number","formControlName","expiry","aria-describedby","shared-key-expiry-hint",1,"form-input"],["formControlName","expiry_unlimited",3,"description"],["type","number","formControlName","max_image_pixels","aria-describedby","shared-key-limit-hint",1,"form-input"],[1,"square-dims-text","text-secondary","text-xs","mt-1"],["formControlName","max_image_pixels_unlimited",3,"description"],["aria-label","Quick pixel presets",1,"quick-fill-row"],["type","button",1,"btn-source-control","btn-xs"],["type","number","formControlName","max_image_steps","aria-describedby","shared-key-limit-hint",1,"form-input"],["formControlName","max_image_steps_unlimited",3,"description"],["type","number","formControlName","max_text_tokens","aria-describedby","shared-key-limit-hint",1,"form-input"],["formControlName","max_text_tokens_unlimited",3,"description"],["id","shared-key-limit-hint",1,"text-secondary","text-xs"],["id","shared-key-expiry-hint",1,"text-secondary","text-xs"],[1,"shared-key-actions","mt-3"],["type","button",1,"btn-source-control",3,"disabled"],["type","submit",1,"btn-primary",3,"disabled"],["type","button",1,"btn-source-control","btn-xs",3,"click"],["type","button",1,"btn-source-control",3,"click","disabled"]],template:function(o,l){o&1&&(a(0,"form",0),g("ngSubmit",function(){return l.onSubmit()}),a(1,"div",1)(2,"div")(3,"label",2),s(4),p(5,"transloco"),r(),S(6,"input",3),p(7,"transloco"),r(),a(8,"div")(9,"label",2),s(10),p(11,"transloco"),r(),a(12,"div",4),S(13,"input",5),_(14,ut,3,3,"span",6),r(),S(15,"app-toggle-checkbox",7),p(16,"transloco"),r(),a(17,"div")(18,"label",2),s(19),p(20,"transloco"),r(),a(21,"div",4),S(22,"input",8),_(23,_t,3,3,"span",6),r(),S(24,"app-toggle-checkbox",9),p(25,"transloco"),r(),a(26,"div")(27,"label",2),s(28),p(29,"transloco"),r(),a(30,"div",4),S(31,"input",10),_(32,ft,2,1,"p",11),_(33,xt,3,3,"span",6),r(),S(34,"app-toggle-checkbox",12),p(35,"transloco"),a(36,"div",13),$(37,ht,2,1,"button",14,mt),r()(),a(39,"div")(40,"label",2),s(41),p(42,"transloco"),r(),a(43,"div",4),S(44,"input",15),_(45,Ct,3,3,"span",6),r(),S(46,"app-toggle-checkbox",16),p(47,"transloco"),r(),a(48,"div")(49,"label",2),s(50),p(51,"transloco"),r(),a(52,"div",4),S(53,"input",17),_(54,yt,3,3,"span",6),r(),S(55,"app-toggle-checkbox",18),p(56,"transloco"),r()(),a(57,"p",19),s(58),p(59,"transloco"),r(),a(60,"p",20),s(61),p(62,"transloco"),r(),a(63,"div",21),_(64,gt,2,2,"button",22),a(65,"button",23),_(66,vt,1,1)(67,bt,1,1),r()()()),o&2&&(v("formGroup",l.form),i(4),h(c(5,26,"profile.shared_keys.name")),i(2),v("placeholder",c(7,28,"profile.shared_keys.name_placeholder")),i(4),h(c(11,30,"profile.shared_keys.kudos")),i(4),f(l.isUnlimited("kudos")?14:-1),i(),v("description",c(16,32,"profile.shared_keys.unlimited_checkbox")),i(4),h(c(20,34,"profile.shared_keys.expiry_days")),i(4),f(l.isUnlimited("expiry")?23:-1),i(),v("description",c(25,36,"profile.shared_keys.unlimited_checkbox")),i(4),h(c(29,38,"profile.shared_keys.max_image_pixels")),i(4),f(l.squareDimensionFromPixels(l.getMaxImagePixelsValue())?32:-1),i(),f(l.isUnlimited("max_image_pixels")?33:-1),i(),v("description",c(35,40,"profile.shared_keys.unlimited_checkbox")),i(3),H(l.imagePixelPresets),i(4),h(c(42,42,"profile.shared_keys.max_image_steps")),i(4),f(l.isUnlimited("max_image_steps")?45:-1),i(),v("description",c(47,44,"profile.shared_keys.unlimited_checkbox")),i(4),h(c(51,46,"profile.shared_keys.max_text_tokens")),i(4),f(l.isUnlimited("max_text_tokens")?54:-1),i(),v("description",c(56,48,"profile.shared_keys.unlimited_checkbox")),i(3),m(" ",c(59,50,"profile.shared_keys.limit_hint")," "),i(3),m(" ",c(62,52,"profile.shared_keys.expiry_hint")," "),i(3),f(l.showCancel()?64:-1),i(),A("btn-disabled",!l.form.valid||l.submitting()),v("disabled",!l.form.valid||l.submitting()),i(),f(l.submitting()?66:67))},dependencies:[ue,pe,Y,Ge,J,se,ce,me,M,_e],styles:[".shared-key-form-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(220px,1fr));gap:1rem}.quick-fill-row[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:.5rem;margin-top:.5rem}.square-dims-text[_ngcontent-%COMP%]{font-style:italic;margin-bottom:.25rem}.btn-xs[_ngcontent-%COMP%]{padding:.3rem .55rem;font-size:.85rem}.shared-key-actions[_ngcontent-%COMP%]{display:flex;gap:.5rem;align-items:center;flex-wrap:wrap;justify-content:flex-end}"],changeDetection:0});let e=d;return e})();function kt(e,d){e&1&&(a(0,"span",4),s(1),p(2,"transloco"),r()),e&2&&(i(),h(c(2,1,"profile.shared_keys.status.active")))}function St(e,d){e&1&&(a(0,"span",5),s(1),p(2,"transloco"),r()),e&2&&(i(),h(c(2,1,"profile.shared_keys.status.expired")))}function wt(e,d){e&1&&(a(0,"span",6),s(1),p(2,"transloco"),r()),e&2&&(i(),h(c(2,1,"profile.shared_keys.status.exhausted")))}function Et(e,d){e&1&&(s(0),p(1,"transloco")),e&2&&m(" ",c(1,1,"profile.shared_keys.unlimited")," ")}function Tt(e,d){if(e&1&&(s(0),p(1,"formatNumber")),e&2){let n=u();m(" ",c(1,1,n.sharedKey().kudos??0)," ")}}function It(e,d){if(e&1&&(a(0,"div",10)(1,"span",3),s(2),p(3,"transloco"),r(),a(4,"span",11),s(5),p(6,"formatNumber"),r()()),e&2){let n=u();i(2),h(c(3,2,"profile.shared_keys.utilized")),i(3),h(c(6,4,n.sharedKey().utilized??0))}}function Bt(e,d){e&1&&(s(0),p(1,"transloco")),e&2&&m(" ",c(1,1,"profile.shared_keys.unlimited")," ")}function Pt(e,d){if(e&1&&(s(0),p(1,"formatNumber")),e&2){let n=u();m(" ",c(1,1,n.sharedKey().max_image_pixels??0)," ")}}function Kt(e,d){if(e&1&&(a(0,"div",12),s(1),r()),e&2){let n=u();i(),m(" ~ ",n.squareDimensionFromPixels(n.sharedKey().max_image_pixels??null)," px ")}}function Lt(e,d){e&1&&(s(0),p(1,"transloco")),e&2&&m(" ",c(1,1,"profile.shared_keys.unlimited")," ")}function Dt(e,d){if(e&1&&(s(0),p(1,"formatNumber")),e&2){let n=u();m(" ",c(1,1,n.sharedKey().max_image_steps??0)," ")}}function Vt(e,d){e&1&&(s(0),p(1,"transloco")),e&2&&m(" ",c(1,1,"profile.shared_keys.unlimited")," ")}function Ut(e,d){if(e&1&&(s(0),p(1,"formatNumber")),e&2){let n=u();m(" ",c(1,1,n.sharedKey().max_text_tokens??0)," ")}}function Ft(e,d){if(e&1&&s(0),e&2){let n=u();m(" ",n.formatExpiry(n.sharedKey().expiry)," ")}}function At(e,d){e&1&&(s(0),p(1,"transloco")),e&2&&m(" ",c(1,1,"profile.shared_keys.never")," ")}function Mt(e,d){e&1&&(s(0),p(1,"transloco")),e&2&&m(" ",c(1,1,"profile.shared_keys.updating")," ")}function Nt(e,d){e&1&&(s(0),p(1,"transloco")),e&2&&m(" ",c(1,1,"profile.shared_keys.edit")," ")}function Wt(e,d){e&1&&(s(0),p(1,"transloco")),e&2&&m(" ",c(1,1,"profile.shared_keys.deleting")," ")}function qt(e,d){e&1&&(s(0),p(1,"transloco")),e&2&&m(" ",c(1,1,"profile.shared_keys.delete")," ")}function Ot(e,d){if(e&1){let n=E();a(0,"div",14)(1,"button",16),g("click",function(){C(n);let o=u();return y(o.startEdit())}),_(2,Mt,2,3)(3,Nt,2,3),r(),a(4,"button",17),g("click",function(){C(n);let o=u();return y(o.onDelete())}),_(5,Wt,2,3)(6,qt,2,3),r()()}if(e&2){let n=u();i(),v("disabled",n.saving()),i(),f(n.saving()?2:3),i(2),v("disabled",n.deleting()),i(),f(n.deleting()?5:6)}}function Rt(e,d){if(e&1){let n=E();a(0,"app-shared-key-form",18),p(1,"transloco"),p(2,"transloco"),p(3,"transloco"),g("formSubmit",function(o){C(n);let l=u();return y(l.onFormSubmit(o))})("formCancel",function(){C(n);let o=u();return y(o.cancelEdit())}),r()}if(e&2){let n=u();v("initialValues",n.editFormValues())("submitLabel",c(1,6,"profile.shared_keys.save_changes"))("submittingLabel",c(2,8,"profile.shared_keys.updating"))("submitting",n.saving())("showCancel",!0)("cancelLabel",c(3,10,"profile.shared_keys.cancel"))}}var be=(()=>{let d=class d{constructor(){this.sharedKey=w.required(),this.saving=w(!1),this.deleting=w(!1),this.readonly=w(!1),this.update=U(),this.delete=U(),this.isEditing=k(!1),this.status=T(()=>{let t=this.sharedKey();return this.computeStatus(t)}),this.editFormValues=T(()=>{let t=this.sharedKey();return this.mapToFormValue(t)})}squareDimensionFromPixels(t){if(t==null||t<=0)return null;let o=Math.round(Math.sqrt(t));return`${o} x ${o}`}formatExpiry(t){if(!t)return"Never";let o=new Date(t);return Number.isNaN(o.getTime())?"Never":o.toLocaleString()}startEdit(){this.isEditing.set(!0)}cancelEdit(){this.isEditing.set(!1)}onFormSubmit(t){this.update.emit(t)}onDelete(){this.delete.emit()}closeEdit(){this.isEditing.set(!1)}computeStatus(t){if(t.expiry){let o=Date.parse(t.expiry);if(!Number.isNaN(o)&&o<Date.now())return"expired"}return t.kudos!==void 0&&t.kudos!==-1&&t.utilized!==void 0&&t.utilized>=t.kudos?"exhausted":"active"}mapToFormValue(t){let o=t.kudos??N.kudos,l=this.deriveExpiryDays(t.expiry),x=t.max_image_pixels??N.max_image_pixels,b=t.max_image_steps??N.max_image_steps,L=t.max_text_tokens??N.max_text_tokens;return{name:t.name??"",kudos:o,kudos_unlimited:o===-1,expiry:l,expiry_unlimited:l===-1,max_image_pixels:x,max_image_pixels_unlimited:x===-1,max_image_steps:b,max_image_steps_unlimited:b===-1,max_text_tokens:L,max_text_tokens_unlimited:L===-1}}deriveExpiryDays(t){if(!t)return-1;let o=Date.parse(t);if(Number.isNaN(o))return-1;let l=Math.ceil((o-Date.now())/(1e3*60*60*24));return l<0?-1:Math.max(l,1)}};d.\u0275fac=function(o){return new(o||d)},d.\u0275cmp=F({type:d,selectors:[["app-shared-key-card"]],inputs:{sharedKey:[1,"sharedKey"],saving:[1,"saving"],deleting:[1,"deleting"],readonly:[1,"readonly"]},outputs:{update:"update",delete:"delete"},decls:53,vars:29,consts:[[1,"shared-key-card"],[1,"shared-key-card__header"],[1,"shared-key-name-row"],[1,"data-label"],[1,"badge-base","badge-success"],[1,"badge-base","badge-warning"],[1,"badge-base","badge-danger"],[1,"shared-key-id"],[1,"shared-key-id-value"],[1,"shared-key-card__body"],[1,"shared-key-field"],[1,"data-value"],[1,"shared-key-dim-row","text-secondary","text-xs"],[1,"shared-key-card__footer"],[1,"shared-key-actions"],[3,"initialValues","submitLabel","submittingLabel","submitting","showCancel","cancelLabel"],["type","button",1,"btn-source-control",3,"click","disabled"],["type","button",1,"btn-danger",3,"click","disabled"],[3,"formSubmit","formCancel","initialValues","submitLabel","submittingLabel","submitting","showCancel","cancelLabel"]],template:function(o,l){o&1&&(a(0,"div",0)(1,"div",1)(2,"div",2)(3,"p",3),s(4),p(5,"transloco"),r(),_(6,kt,3,3,"span",4)(7,St,3,3,"span",5)(8,wt,3,3,"span",6),r(),a(9,"div",7)(10,"code",8),s(11),r()()(),a(12,"div",9)(13,"div",10)(14,"span",3),s(15),p(16,"transloco"),r(),a(17,"span",11),_(18,Et,2,3)(19,Tt,2,3),r()(),_(20,It,7,6,"div",10),a(21,"div",10)(22,"span",3),s(23),p(24,"transloco"),r(),a(25,"span",11),_(26,Bt,2,3)(27,Pt,2,3),r()(),_(28,Kt,2,1,"div",12),a(29,"div",10)(30,"span",3),s(31),p(32,"transloco"),r(),a(33,"span",11),_(34,Lt,2,3)(35,Dt,2,3),r()(),a(36,"div",10)(37,"span",3),s(38),p(39,"transloco"),r(),a(40,"span",11),_(41,Vt,2,3)(42,Ut,2,3),r()(),a(43,"div",10)(44,"span",3),s(45),p(46,"transloco"),r(),a(47,"span",11),_(48,Ft,1,1)(49,At,2,3),r()()(),a(50,"div",13),_(51,Ot,7,4,"div",14),r(),_(52,Rt,4,12,"app-shared-key-form",15),r()),o&2&&(i(4),m(" ",l.sharedKey().name||c(5,17,"profile.shared_keys.untitled")," "),i(2),f(l.status()==="active"?6:l.status()==="expired"?7:l.status()==="exhausted"?8:-1),i(5),h(l.sharedKey().id),i(4),h(c(16,19,"profile.shared_keys.kudos")),i(3),f(l.sharedKey().kudos===-1?18:19),i(2),f(l.sharedKey().utilized!==void 0?20:-1),i(3),h(c(24,21,"profile.shared_keys.max_image_pixels")),i(3),f(l.sharedKey().max_image_pixels===-1?26:27),i(2),f(l.sharedKey().max_image_pixels!==-1&&l.squareDimensionFromPixels(l.sharedKey().max_image_pixels??null)?28:-1),i(3),h(c(32,23,"profile.shared_keys.max_image_steps")),i(3),f(l.sharedKey().max_image_steps===-1?34:35),i(4),h(c(39,25,"profile.shared_keys.max_text_tokens")),i(3),f(l.sharedKey().max_text_tokens===-1?41:42),i(4),h(c(46,27,"profile.shared_keys.expires")),i(3),f(l.sharedKey().expiry?48:49),i(3),f(l.readonly()?-1:51),i(),f(l.isEditing()&&!l.readonly()?52:-1))},dependencies:[M,fe,Ce],styles:[".shared-key-card[_ngcontent-%COMP%]{border:1px solid rgba(255,255,255,.08);background:#ffffff0a;border-radius:.75rem;padding:.75rem}.shared-key-card__header[_ngcontent-%COMP%]{margin-bottom:.75rem}.shared-key-name-row[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.5rem;flex-wrap:wrap}.shared-key-id[_ngcontent-%COMP%]{margin-top:.5rem}.shared-key-id-value[_ngcontent-%COMP%]{display:block;background:#6366f126;border:1px solid rgba(99,102,241,.3);color:#a5b4fc;padding:.375rem .75rem;border-radius:.375rem;font-family:Courier New,monospace;font-size:.875rem;font-weight:600;word-break:break-all;-webkit-user-select:all;user-select:all;width:100%}.shared-key-card__body[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(180px,1fr));gap:.5rem 1rem;margin-top:.75rem}.shared-key-field[_ngcontent-%COMP%]{display:flex;justify-content:space-between;gap:.5rem}.shared-key-dim-row[_ngcontent-%COMP%]{text-align:right}.shared-key-card__footer[_ngcontent-%COMP%]{margin-top:1rem;border-top:1px solid rgba(255,255,255,.08);padding-top:1rem}.shared-key-actions[_ngcontent-%COMP%]{display:flex;gap:.5rem;align-items:center;flex-wrap:wrap;justify-content:flex-end}"],changeDetection:0});let e=d;return e})();var $t=(e,d)=>d.id;function Ht(e,d){e&1&&(s(0),p(1,"transloco")),e&2&&m(" ",c(1,1,"profile.shared_keys.loading")," ")}function Gt(e,d){e&1&&(s(0),p(1,"transloco")),e&2&&m(" ",c(1,1,"profile.shared_keys.refresh")," ")}function jt(e,d){if(e&1){let n=E();a(0,"button",10),g("click",function(){C(n);let o=u(2);return y(o.loadSharedKeys())}),_(1,Ht,2,3)(2,Gt,2,3),r()}if(e&2){let n=u(2);v("disabled",n.loading()),i(),f(n.loading()?1:2)}}function zt(e,d){if(e&1&&(a(0,"div",1)(1,"div")(2,"h3",6),s(3),p(4,"transloco"),r(),a(5,"p",7),s(6),p(7,"transloco"),r(),a(8,"p",8),s(9),p(10,"transloco"),r()(),_(11,jt,3,2,"button",9),r()),e&2){let n=u();i(3),m(" ",c(4,4,"profile.tabs.shared_keys")," "),i(3),m(" ",c(7,6,"profile.shared_keys.description")," "),i(3),m(" ",c(10,8,"profile.shared_keys.cache_notice")," "),i(2),f(n.isExternalData()?-1:11)}}function Zt(e,d){if(e&1&&(a(0,"div",2)(1,"p",11),s(2),p(3,"transloco"),r(),a(4,"p",12),s(5),r()()),e&2){let n=u();i(2),m(" ",c(3,2,"profile.shared_keys.error_title")," "),i(3),h(n.error())}}function Qt(e,d){if(e&1&&(a(0,"div",3)(1,"p",11),s(2),p(3,"transloco"),r(),a(4,"p",12),s(5),r()()),e&2){let n=u();i(2),m(" ",c(3,2,"profile.shared_keys.success_title")," "),i(3),h(n.success())}}function Yt(e,d){e&1&&(a(0,"p",4),s(1),p(2,"transloco"),r()),e&2&&(i(),m(" ",c(2,1,"profile.shared_keys.loading")," "))}function Jt(e,d){e&1&&(a(0,"p",4),s(1),p(2,"transloco"),r()),e&2&&(i(),m(" ",c(2,1,"profile.shared_keys.none")," "))}function Xt(e,d){if(e&1){let n=E();a(0,"app-shared-key-card",15),g("update",function(o){let l=C(n).$implicit,x=u(3);return y(x.onUpdate(l.id,o))})("delete",function(){let o=C(n).$implicit,l=u(3);return y(l.onDelete(o.id))}),r()}if(e&2){let n=d.$implicit,t=u(3);v("sharedKey",n)("saving",t.isSaving(n.id))("deleting",t.isDeleting(n.id))("readonly",t.readonly())}}function ei(e,d){if(e&1&&(a(0,"div",13),$(1,Xt,1,4,"app-shared-key-card",14,$t),r()),e&2){let n=u(2);i(),H(n.sharedKeys())}}function ti(e,d){if(e&1&&_(0,Jt,3,3,"p",4)(1,ei,3,0,"div",13),e&2){let n=u();f(n.sharedKeys().length===0?0:1)}}function ii(e,d){if(e&1){let n=E();a(0,"button",17),g("click",function(){C(n);let o=u(2);return y(o.toggleCreateForm())}),s(1),p(2,"transloco"),r()}e&2&&(i(),m(" ",c(2,1,"profile.shared_keys.create_title")," "))}function ni(e,d){if(e&1){let n=E();a(0,"h4",18),s(1),p(2,"transloco"),r(),a(3,"app-shared-key-form",19),p(4,"transloco"),p(5,"transloco"),g("formSubmit",function(o){C(n);let l=u(2);return y(l.onCreateSubmit(o))}),r(),a(6,"button",20),g("click",function(){C(n);let o=u(2);return y(o.toggleCreateForm())}),s(7),p(8,"transloco"),r()}if(e&2){let n=u(2);i(),m(" ",c(2,6,"profile.shared_keys.create_title")," "),i(2),v("initialValues",n.createFormDefaults)("submitLabel",c(4,8,"profile.shared_keys.create"))("submittingLabel",c(5,10,"profile.shared_keys.creating"))("submitting",n.creating()),i(4),m(" ",c(8,12,"profile.shared_keys.cancel")," ")}}function oi(e,d){if(e&1&&(a(0,"div",5),_(1,ii,3,3,"button",16)(2,ni,9,14),r()),e&2){let n=u();i(),f(n.createFormCollapsed()?1:2)}}var lt=(()=>{let d=class d{constructor(){this.destroyRef=I(R),this.sharedKeyService=I(ot),this.auth=I(G),this.externalSharedKeys=w(void 0,{alias:"sharedKeys"}),this.externalLoading=w(!1,{alias:"loadingExternal"}),this.readonly=w(!1),this.showHeader=w(!0),this.sharedKeysChange=U(),this.internalSharedKeys=k([]),this.sharedKeys=T(()=>{let t=this.externalSharedKeys();return t!==void 0?t:this.internalSharedKeys()}),this.isExternalData=T(()=>this.externalSharedKeys()!==void 0),this.internalLoading=k(!1),this.loading=T(()=>this.isExternalData()?this.externalLoading():this.internalLoading()),this.error=k(null),this.success=k(null),this.creating=k(!1),this.savingKeyId=k(null),this.deletingKeyId=k(null),this.createFormDefaults=N,this.createFormCollapsed=k(!0)}ngOnInit(){this.isExternalData()||this.loadSharedKeys()}loadSharedKeys(){if(this.isExternalData())return;let t=this.auth.currentUser()?.sharedkey_ids??[];if(this.internalLoading.set(!0),this.error.set(null),t.length===0){this.internalSharedKeys.set([]),this.internalLoading.set(!1);return}this.sharedKeyService.getSharedKeysByIds(t).pipe(K(this.destroyRef)).subscribe({next:o=>{this.internalSharedKeys.set(o)},error:o=>{let l=this.extractError(o);this.error.set(l),this.internalLoading.set(!1)},complete:()=>{this.internalLoading.set(!1)}})}onCreateSubmit(t){this.readonly()||(this.creating.set(!0),this.error.set(null),this.success.set(null),this.sharedKeyService.createSharedKey(t).pipe(K(this.destroyRef)).subscribe({next:o=>{let l=[...this.sharedKeys(),o];this.internalSharedKeys.set(l),this.sharedKeysChange.emit(l),this.success.set("Shared key created. Changes can take up to 5 minutes to propagate due to caching.")},error:o=>{this.error.set(this.extractError(o)),this.creating.set(!1)},complete:()=>{this.creating.set(!1)}}))}onUpdate(t,o){this.readonly()||(this.savingKeyId.set(t),this.error.set(null),this.success.set(null),this.sharedKeyService.updateSharedKey(t,o).pipe(K(this.destroyRef)).subscribe({next:l=>{let x=this.sharedKeys().map(b=>b.id===l.id?l:b);this.internalSharedKeys.set(x),this.sharedKeysChange.emit(x),this.success.set("Shared key updated. Changes can take up to 5 minutes to propagate due to caching."),this.closeCardEdit(t)},error:l=>{this.error.set(this.extractError(l)),this.savingKeyId.set(null)},complete:()=>{this.savingKeyId.set(null)}}))}onDelete(t){this.readonly()||(this.deletingKeyId.set(t),this.error.set(null),this.success.set(null),this.sharedKeyService.deleteSharedKey(t).pipe(K(this.destroyRef)).subscribe({next:()=>{let o=this.sharedKeys().filter(l=>l.id!==t);this.internalSharedKeys.set(o),this.sharedKeysChange.emit(o),this.success.set("Shared key deleted. Changes can take up to 5 minutes to propagate due to caching.")},error:o=>{this.error.set(this.extractError(o)),this.deletingKeyId.set(null)},complete:()=>{this.deletingKeyId.set(null)}}))}isSaving(t){return this.savingKeyId()===t}isDeleting(t){return this.deletingKeyId()===t}toggleCreateForm(){this.createFormCollapsed.update(t=>!t)}closeCardEdit(t){this.cardComponents?.find(l=>l.sharedKey().id===t)?.closeEdit()}extractError(t){if(t&&typeof t=="object"){let o=t,l=o.rc?` (code: ${o.rc})`:"",x=o.status?` [${o.status}]`:"";if(o.message)return`${o.message}${x}${l}`}return"Something went wrong while communicating with the API."}};d.\u0275fac=function(o){return new(o||d)},d.\u0275cmp=F({type:d,selectors:[["app-shared-key-list"]],viewQuery:function(o,l){if(o&1&&Ie(be,5),o&2){let x;Be(x=Pe())&&(l.cardComponents=x)}},inputs:{externalSharedKeys:[1,"sharedKeys","externalSharedKeys"],externalLoading:[1,"loadingExternal","externalLoading"],readonly:[1,"readonly"],showHeader:[1,"showHeader"]},outputs:{sharedKeysChange:"sharedKeysChange"},decls:7,vars:5,consts:[[1,"shared-keys-container"],[1,"shared-keys-header"],["role","alert",1,"alert","alert-error"],["role","status",1,"alert","alert-success"],[1,"text-secondary","text-sm","py-4"],[1,"section-divider-top"],[1,"heading-card"],[1,"text-secondary","text-sm"],[1,"text-secondary","text-xs","mt-1"],["type","button",1,"btn-source-control",3,"disabled"],["type","button",1,"btn-source-control",3,"click","disabled"],[1,"alert-title"],[1,"alert-body"],[1,"shared-key-grid"],[3,"sharedKey","saving","deleting","readonly"],[3,"update","delete","sharedKey","saving","deleting","readonly"],["type","button",1,"btn-primary","w-full"],["type","button",1,"btn-primary","w-full",3,"click"],[1,"section-title-sm","mb-2"],[3,"formSubmit","initialValues","submitLabel","submittingLabel","submitting"],["type","button",1,"btn-secondary","mt-3",3,"click"]],template:function(o,l){o&1&&(a(0,"div",0),_(1,zt,12,10,"div",1),_(2,Zt,6,4,"div",2),_(3,Qt,6,4,"div",3),_(4,Yt,3,3,"p",4)(5,ti,2,1),_(6,oi,3,1,"div",5),r()),o&2&&(i(),f(l.showHeader()?1:-1),i(),f(l.error()?2:-1),i(),f(l.success()?3:-1),i(),f(l.loading()?4:5),i(2),f(l.readonly()?-1:6))},dependencies:[M,be,Ce],styles:[".shared-keys-container[_ngcontent-%COMP%]{width:100%}.shared-keys-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:flex-start;gap:1rem;flex-wrap:wrap}.shared-key-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(280px,1fr));gap:1rem;margin-top:1rem}.alert[_ngcontent-%COMP%]{border-radius:.75rem;padding:.75rem 1rem;border:1px solid;margin-top:1rem}.alert-error[_ngcontent-%COMP%]{background:#be185d1f;border-color:#be185d99;color:#f87171}.alert-success[_ngcontent-%COMP%]{background:#10b9811f;border-color:#10b98199;color:#6ee7b7}.alert-title[_ngcontent-%COMP%]{font-weight:600;margin-bottom:.25rem}.alert-body[_ngcontent-%COMP%]{margin:0}"],changeDetection:0});let e=d;return e})();var ai=(e,d)=>d.id;function ri(e,d){if(e&1&&(a(0,"span",5),s(1),r()),e&2){let n=u();i(),m("(",n.imageCount(),")")}}function li(e,d){if(e&1&&(a(0,"span",5),s(1),r()),e&2){let n=u();i(),m("(",n.textCount(),")")}}function si(e,d){if(e&1){let n=E();a(0,"button",12),g("click",function(){C(n);let o=u();return y(o.openCreateForm())}),V(),a(1,"svg",3),S(2,"path",13),r(),s(3),p(4,"transloco"),r()}if(e&2){let n=u();v("disabled",n.showCreateForm()),i(3),m(" ",c(4,2,"styles.create")," ")}}function di(e,d){if(e&1){let n=E();a(0,"div",8)(1,"app-style-form",14),g("formSubmit",function(o){C(n);let l=u();return y(l.onCreateStyle(o))})("formCancel",function(){C(n);let o=u();return y(o.closeCreateForm())}),r()()}if(e&2){let n=u();i(),v("mode","create")("styleType",n.currentStyleType())("saving",n.creating())}}function pi(e,d){if(e&1){let n=E();a(0,"div",9),V(),a(1,"svg",15),S(2,"path",16),r(),W(),a(3,"p"),s(4),r(),a(5,"button",17),g("click",function(){C(n);let o=u();return y(o.loadUserStyles())}),s(6),p(7,"transloco"),r()()}if(e&2){let n=u();i(4),h(n.error()),i(2),m(" ",c(7,2,"styles.retry")," ")}}function ci(e,d){e&1&&(a(0,"div",10),S(1,"div",18),a(2,"p"),s(3),p(4,"transloco"),r()()),e&2&&(i(3),h(c(4,1,"profile.styles.loading")))}function mi(e,d){e&1&&(a(0,"div",19),V(),a(1,"svg",21),S(2,"path",22),r(),W(),a(3,"p"),s(4),p(5,"transloco"),r(),a(6,"p",5),s(7),p(8,"transloco"),r()()),e&2&&(i(4),h(c(5,2,"profile.styles.no_styles")),i(3),m(" ",c(8,4,"profile.styles.create_hint")," "))}function ui(e,d){if(e&1){let n=E();a(0,"app-style-card",24),g("navigate",function(){let o=C(n).$implicit,l=u(3);return y(l.navigateToStyle(o))})("edit",function(){let o=C(n).$implicit,l=u(3);return y(l.onEditStyle(o))})("delete",function(){let o=C(n).$implicit,l=u(3);return y(l.onDeleteStyle(o))}),r()}if(e&2){let n=d.$implicit,t=u(3);Le(n),v("styleType",t.activeTab())("showActions",!t.readonly())}}function _i(e,d){if(e&1&&(a(0,"div",20),$(1,ui,1,4,"app-style-card",23,ai),r()),e&2){let n=u(2);i(),H(n.filteredStyles())}}function fi(e,d){if(e&1&&_(0,mi,9,6,"div",19)(1,_i,3,0,"div",20),e&2){let n=u();f(n.filteredStyles().length===0?0:1)}}function xi(e,d){e&1&&(a(0,"div",11)(1,"a",25),V(),a(2,"svg",3),S(3,"path",26),r(),s(4),p(5,"transloco"),r()()),e&2&&(i(4),m(" ",c(5,1,"profile.styles.browse_all")," "))}var st=(()=>{let d=class d{constructor(){this.styleService=I(Xe),this.auth=I(G),this.router=I(re),this.destroyRef=I(R),this.externalStyles=w(void 0,{alias:"styles"}),this.externalLoading=w(!1,{alias:"loadingExternal"}),this.readonly=w(!1),this.compact=w(!1),this.stylesChange=U(),this.activeTab=k("image"),this.internalLoading=k(!1),this.loading=T(()=>this.isExternalData()?this.externalLoading():this.internalLoading()),this.error=k(null),this.internalUserStyles=k([]),this.userStyles=T(()=>{let t=this.externalStyles();return t!==void 0?t:this.internalUserStyles()}),this.isExternalData=T(()=>this.externalStyles()!==void 0),this.showCreateForm=k(!1),this.creating=k(!1),this.currentUser=T(()=>this.auth.currentUser()),this.userStyleIds=T(()=>this.currentUser()?.styles??[]),this.imageStyles=T(()=>this.userStyles().filter(t=>t.type==="image"&&t.style).map(t=>t.style)),this.textStyles=T(()=>this.userStyles().filter(t=>t.type==="text"&&t.style).map(t=>t.style)),this.filteredStyles=T(()=>this.activeTab()==="image"?this.imageStyles():this.textStyles()),this.imageCount=T(()=>this.userStyles().filter(t=>t.type==="image").length),this.textCount=T(()=>this.userStyles().filter(t=>t.type==="text").length),this.currentStyleType=T(()=>this.activeTab()==="text"?"text":"image")}ngOnInit(){this.isExternalData()||this.loadUserStyles()}setActiveTab(t){this.activeTab()!==t&&(this.activeTab.set(t),this.showCreateForm.set(!1))}loadUserStyles(){if(this.isExternalData())return;let t=this.userStyleIds();if(!t||t.length===0){this.internalUserStyles.set([]);return}this.internalLoading.set(!0),this.error.set(null),this.internalUserStyles.set(t.map(l=>({id:l,style:null,type:null,loading:!0,error:!1})));let o=t.map(l=>this.styleService.getImageStyle(l).pipe(q(x=>({style:x,type:"image"})),O(()=>this.styleService.getTextStyle(l).pipe(q(x=>({style:x,type:"text"})),O(()=>ne(null))))));oe(o).pipe(K(this.destroyRef),ye(()=>this.internalLoading.set(!1))).subscribe({next:l=>{this.internalUserStyles.set(t.map((x,b)=>{let L=l[b];return L?{id:x,style:L.style,type:L.type,loading:!1,error:!1}:{id:x,style:null,type:null,loading:!1,error:!0}}))},error:()=>{this.error.set("Failed to load styles"),this.internalUserStyles.update(l=>l.map(x=>Q(Z({},x),{loading:!1,error:!0})))}})}navigateToStyle(t){let o=xe(t)?"image":"text";this.router.navigate(["/details/styles",o,t.id])}openCreateForm(){this.readonly()||this.showCreateForm.set(!0)}closeCreateForm(){this.showCreateForm.set(!1)}onCreateStyle(t){if(this.readonly())return;this.creating.set(!0),(t.type==="image"?this.styleService.createImageStyle(t.payload):this.styleService.createTextStyle(t.payload)).pipe(K(this.destroyRef),ye(()=>this.creating.set(!1))).subscribe({next:l=>{this.showCreateForm.set(!1),this.auth.refreshUser().subscribe(()=>{this.router.navigate(["/details/styles",t.type,l.id])})},error:l=>{this.error.set(l.message||"Failed to create style")}})}onEditStyle(t){if(this.readonly())return;let o=xe(t)?"image":"text";this.router.navigate(["/details/styles",o,t.id],{queryParams:{edit:"true"}})}onDeleteStyle(t){if(this.readonly()||!confirm("Are you sure you want to delete this style?"))return;((xe(t)?"image":"text")==="image"?this.styleService.deleteImageStyle(t.id):this.styleService.deleteTextStyle(t.id)).pipe(K(this.destroyRef)).subscribe({next:()=>{let x=this.userStyles().filter(b=>b.id!==t.id);this.internalUserStyles.set(x),this.stylesChange.emit(x),this.auth.refreshUser().subscribe()},error:x=>{this.error.set(x.message||"Failed to delete style")}})}};d.\u0275fac=function(o){return new(o||d)},d.\u0275cmp=F({type:d,selectors:[["app-profile-styles-list"]],inputs:{externalStyles:[1,"styles","externalStyles"],externalLoading:[1,"loadingExternal","externalLoading"],readonly:[1,"readonly"],compact:[1,"compact"]},outputs:{stylesChange:"stylesChange"},decls:20,vars:18,consts:[[1,"stack-lg"],[1,"details-tabs"],["type","button",1,"details-tab",3,"click"],["fill","none","stroke","currentColor","viewBox","0 0 24 24","aria-hidden","true",1,"icon-sm"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","m2.25 15.75 5.159-5.159a2.25 2.25 0 0 1 3.182 0l5.159 5.159m-1.5-1.5 1.409-1.409a2.25 2.25 0 0 1 3.182 0l2.909 2.909m-18 3.75h16.5a1.5 1.5 0 0 0 1.5-1.5V6a1.5 1.5 0 0 0-1.5-1.5H3.75A1.5 1.5 0 0 0 2.25 6v12a1.5 1.5 0 0 0 1.5 1.5Zm10.5-11.25h.008v.008h-.008V8.25Zm.375 0a.375.375 0 1 1-.75 0 .375.375 0 0 1 .75 0Z"],[1,"text-secondary","text-sm"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M7.5 8.25h9m-9 3H12m-9.75 1.51c0 1.6 1.123 2.994 2.707 3.227 1.129.166 2.27.293 3.423.379.35.026.67.21.865.501L12 21l2.755-4.133a1.14 1.14 0 0 1 .865-.501 48.172 48.172 0 0 0 3.423-.379c1.584-.233 2.707-1.626 2.707-3.228V6.741c0-1.602-1.123-2.995-2.707-3.228A48.394 48.394 0 0 0 12 3c-2.392 0-4.744.175-7.043.513C3.373 3.746 2.25 5.14 2.25 6.741v6.018Z"],["type","button",1,"btn-primary",3,"disabled"],[1,"card","card-bg-secondary","card-full"],[1,"state-container","state-container-sm","state-error"],[1,"state-container","state-container-sm","text-secondary"],[1,"action-row","action-row-responsive"],["type","button",1,"btn-primary",3,"click","disabled"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M12 4.5v15m7.5-7.5h-15"],[3,"formSubmit","formCancel","mode","styleType","saving"],["fill","none","stroke","currentColor","viewBox","0 0 24 24","aria-hidden","true",1,"state-icon"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M12 9v3.75m9-.75a9 9 0 1 1-18 0 9 9 0 0 1 18 0Zm-9 3.75h.008v.008H12v-.008Z"],["type","button",1,"btn-source-control",3,"click"],[1,"spinner","spinner-md"],[1,"state-container","state-container-sm","state-muted"],[1,"grid-cards"],["fill","none","stroke","currentColor","viewBox","0 0 24 24","aria-hidden","true",1,"state-icon-lg"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","1.5","d","M9.53 16.122a3 3 0 0 0-5.78 1.128 2.25 2.25 0 0 1-2.4 2.245 4.5 4.5 0 0 0 8.4-2.245c0-.399-.078-.78-.22-1.128Zm0 0a15.998 15.998 0 0 0 3.388-1.62m-5.043-.025a15.994 15.994 0 0 1 1.622-3.395m3.42 3.42a15.995 15.995 0 0 0 4.764-4.648l3.876-5.814a1.151 1.151 0 0 0-1.597-1.597L14.146 6.32a15.996 15.996 0 0 0-4.649 4.763m3.42 3.42a6.776 6.776 0 0 0-3.42-3.42"],[3,"style","styleType","showActions"],[3,"navigate","edit","delete","styleType","showActions"],["routerLink","/details/styles/",1,"btn-source-control"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M13.5 6H5.25A2.25 2.25 0 0 0 3 8.25v10.5A2.25 2.25 0 0 0 5.25 21h10.5A2.25 2.25 0 0 0 18 18.75V10.5m-10.5 6L21 3m0 0h-5.25M21 3v5.25"]],template:function(o,l){o&1&&(a(0,"div",0)(1,"div",1)(2,"button",2),g("click",function(){return l.setActiveTab("image")}),V(),a(3,"svg",3),S(4,"path",4),r(),s(5),p(6,"transloco"),_(7,ri,2,1,"span",5),r(),W(),a(8,"button",2),g("click",function(){return l.setActiveTab("text")}),V(),a(9,"svg",3),S(10,"path",6),r(),s(11),p(12,"transloco"),_(13,li,2,1,"span",5),r(),_(14,si,5,4,"button",7),r(),_(15,di,2,3,"div",8),_(16,pi,8,4,"div",9),_(17,ci,5,3,"div",10),_(18,fi,2,1),_(19,xi,6,3,"div",11),r()),o&2&&(i(2),A("details-tab-active",l.activeTab()==="image"),i(3),m(" ",c(6,14,"styles.tabs.image")," "),i(2),f(l.imageCount()>0?7:-1),i(),A("details-tab-active",l.activeTab()==="text"),i(3),m(" ",c(12,16,"styles.tabs.text")," "),i(2),f(l.textCount()>0?13:-1),i(),f(l.readonly()?-1:14),i(),f(l.showCreateForm()&&!l.readonly()?15:-1),i(),f(l.error()?16:-1),i(),f(l.loading()&&!l.error()?17:-1),i(),f(!l.loading()&&!l.error()&&!l.showCreateForm()?18:-1),i(),f(!l.showCreateForm()&&!l.compact()?19:-1))},dependencies:[M,et,tt,le],encapsulation:2,changeDetection:0});let e=d;return e})();var hi=["dialogPanel"],Ci=["usernameInput"],yi=e=>({username:e});function gi(e,d){e&1&&(a(0,"p",8),s(1),p(2,"transloco"),r()),e&2&&(i(),m(" ",c(2,1,"profile.delete_account_warning_permanent")," "))}function vi(e,d){e&1&&(a(0,"p",9),s(1),p(2,"transloco"),r()),e&2&&(i(),m(" ",c(2,1,"profile.delete_account_warning_30_days")," "))}function bi(e,d){if(e&1&&(a(0,"span",17),V(),a(1,"svg",18),S(2,"circle",19)(3,"path",20),r(),s(4),r()),e&2){let n=u(2);i(4),m(" ",n.loadingLabel()||n.confirmLabel()," ")}}function ki(e,d){if(e&1&&s(0),e&2){let n=u(2);m(" ",n.confirmLabel()," ")}}function Si(e,d){if(e&1){let n=E();a(0,"div",2)(1,"div",3),g("click",function(){C(n);let o=u();return y(o.onBackdropClick())}),r(),a(2,"div",4,0)(4,"h3",5),s(5),r(),a(6,"div",6)(7,"div",7),_(8,gi,3,3,"p",8)(9,vi,3,3,"p",9),r(),a(10,"div",10)(11,"label",11),s(12),p(13,"transloco"),r(),a(14,"p",12),s(15),p(16,"transloco"),r(),a(17,"input",13,1),Fe("ngModelChange",function(o){C(n);let l=u();return Ue(l.inputUsername,o)||(l.inputUsername=o),y(o)}),g("input",function(){C(n);let o=u();return y(o.onInputChange())}),r()()(),a(19,"div",14)(20,"button",15),g("click",function(){C(n);let o=u();return y(o.cancel.emit())}),s(21),r(),a(22,"button",16),g("click",function(){C(n);let o=u();return y(o.onConfirm())}),_(23,bi,5,1,"span",17)(24,ki,1,1),r()()()()}if(e&2){let n=u();i(2),B("aria-labelledby",n.titleId()),i(2),v("id",n.titleId()),i(),m(" ",n.title()," "),i(2),De(n.isAlreadyDeleted()?"bg-red-900/30 border border-red-700":"bg-yellow-900/30 border border-yellow-700"),i(),f(n.isAlreadyDeleted()?8:9),i(4),m(" ",c(13,14,"profile.delete_account_enter_username")," "),i(3),m(" ",z(16,16,"profile.delete_account_username_hint",j(19,yi,n.expectedUsername()))," "),i(2),v("placeholder",n.expectedUsername()),Ve("ngModel",n.inputUsername),i(3),v("disabled",n.loading()),i(),m(" ",n.cancelLabel()," "),i(),v("disabled",n.loading()||!n.canConfirm()),i(),f(n.loading()?23:24)}}var dt=(()=>{let d=class d{constructor(){this.platformId=I(Te),this.previousActiveElement=null,this.dialogPanel=ve("dialogPanel"),this.usernameInput=ve("usernameInput"),this.open=w(!1),this.title=w.required(),this.expectedUsername=w.required(),this.isAlreadyDeleted=w(!1),this.confirmLabel=w("Delete"),this.cancelLabel=w("Cancel"),this.loading=w(!1),this.loadingLabel=w(void 0),this.confirm=U(),this.cancel=U(),this.titleId=T(()=>`delete-dialog-title-${this.expectedUsername().replace(/[^a-zA-Z0-9_-]/g,"-")}`),this.keydownHandler=null,this.inputUsername="",this.canConfirm=k(!1),ae(()=>{let t=this.open();Ae(this.platformId)&&(t?this.onOpen():this.onClose())})}ngOnDestroy(){this.removeKeyboardHandler()}onBackdropClick(){this.loading()||this.cancel.emit()}onInputChange(){let t=this.inputUsername.toLowerCase()===this.expectedUsername().toLowerCase();this.canConfirm.set(t)}onConfirm(){this.canConfirm()&&!this.loading()&&this.confirm.emit()}onOpen(){this.inputUsername="",this.canConfirm.set(!1),this.previousActiveElement=document.activeElement,this.keydownHandler=t=>this.handleKeydown(t),document.addEventListener("keydown",this.keydownHandler),setTimeout(()=>{this.usernameInput()?.nativeElement?.focus()},0)}onClose(){this.removeKeyboardHandler(),this.previousActiveElement&&this.previousActiveElement instanceof HTMLElement&&this.previousActiveElement.focus(),this.previousActiveElement=null}handleKeydown(t){if(t.key==="Escape"&&!this.loading()){t.preventDefault(),this.cancel.emit();return}t.key==="Tab"&&this.trapFocus(t)}trapFocus(t){let o=this.dialogPanel();if(!o)return;let l=o.nativeElement.querySelectorAll('button:not([disabled]), [href], input:not([disabled]), select:not([disabled]), textarea:not([disabled]), [tabindex]:not([tabindex="-1"])');if(l.length===0)return;let x=l[0],b=l[l.length-1];t.shiftKey?document.activeElement===x&&(t.preventDefault(),b.focus()):document.activeElement===b&&(t.preventDefault(),x.focus())}removeKeyboardHandler(){this.keydownHandler&&(document.removeEventListener("keydown",this.keydownHandler),this.keydownHandler=null)}};d.\u0275fac=function(o){return new(o||d)},d.\u0275cmp=F({type:d,selectors:[["app-delete-account-dialog"]],viewQuery:function(o,l){o&1&&(ge(l.dialogPanel,hi,5),ge(l.usernameInput,Ci,5)),o&2&&Ke(2)},inputs:{open:[1,"open"],title:[1,"title"],expectedUsername:[1,"expectedUsername"],isAlreadyDeleted:[1,"isAlreadyDeleted"],confirmLabel:[1,"confirmLabel"],cancelLabel:[1,"cancelLabel"],loading:[1,"loading"],loadingLabel:[1,"loadingLabel"]},outputs:{confirm:"confirm",cancel:"cancel"},decls:1,vars:1,consts:[["dialogPanel",""],["usernameInput",""],[1,"modal"],["aria-hidden","true",1,"modal-backdrop",3,"click"],["role","dialog","aria-modal","true","tabindex","-1",1,"dialog-panel","dialog-panel-md"],[1,"admin-heading-card","mb-4",3,"id"],[1,"dialog-content","mb-6"],[1,"mb-4","p-4","rounded-lg"],[1,"text-red-300","text-sm"],[1,"text-yellow-300","text-sm"],[1,"mb-4"],["for","confirm-username",1,"form-label"],[1,"text-sm","text-gray-400","mb-2"],["id","confirm-username","type","text","autocomplete","off",1,"form-input","w-full",3,"ngModelChange","input","placeholder","ngModel"],[1,"flex","justify-end","gap-3"],["type","button",1,"btn-muted",3,"click","disabled"],["type","button",1,"btn-primary","btn-danger",3,"click","disabled"],[1,"inline-flex","items-center","gap-2"],["fill","none","viewBox","0 0 24 24","aria-hidden","true",1,"animate-spin","h-4","w-4"],["cx","12","cy","12","r","10","stroke","currentColor","stroke-width","4",1,"opacity-25"],["fill","currentColor","d","M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z",1,"opacity-75"]],template:function(o,l){o&1&&_(0,Si,25,21,"div",2),o&2&&f(l.open()?0:-1)},dependencies:[Qe,Y,J,He,M],encapsulation:2,changeDetection:0});let e=d;return e})();var wi=e=>({message:e}),Ei=e=>({username:e}),Ti=e=>({age:e}),Ii=e=>({amount:e}),Bi=(e,d)=>d.id;function Pi(e,d){e&1&&(a(0,"div",0),V(),a(1,"svg",15),S(2,"path",16),r(),W(),a(3,"span"),s(4),p(5,"transloco"),r()()),e&2&&(i(4),h(c(5,1,"admin.workers.deletion_success")))}function Ki(e,d){if(e&1&&(a(0,"div",0),V(),a(1,"svg",15),S(2,"path",16),r(),W(),a(3,"span"),s(4),p(5,"transloco"),r()()),e&2){let n=u();i(4),h(c(5,1,n.deleteSuccess()))}}function Li(e,d){if(e&1&&(a(0,"div",1),V(),a(1,"svg",15),S(2,"path",17),r(),W(),a(3,"span"),s(4),p(5,"transloco"),r()()),e&2){let n=u();i(4),h(z(5,1,"profile.delete_account_error",j(4,wi,n.deleteError())))}}function Di(e,d){if(e&1&&(s(0),p(1,"transloco")),e&2){let n=u();m(" ",z(1,1,"profile.welcome",j(4,Ei,n.auth.currentUser().username))," ")}}function Vi(e,d){e&1&&(s(0),p(1,"transloco")),e&2&&m(" ",c(1,1,"profile.login_title")," ")}function Ui(e,d){e&1&&(a(0,"p",25)(1,"small"),s(2),p(3,"transloco"),r()()),e&2&&(i(2),h(c(3,1,"invalid_api_key")))}function Fi(e,d){e&1&&(s(0),p(1,"transloco")),e&2&&m(" ",c(1,1,"profile.logging_in")," ")}function Ai(e,d){e&1&&(s(0),p(1,"transloco")),e&2&&m(" ",c(1,1,"profile.login_button")," ")}function Mi(e,d){if(e&1){let n=E();a(0,"div",13)(1,"div",18)(2,"h2",19),s(3),p(4,"transloco"),r(),a(5,"p",20),s(6),p(7,"transloco"),r(),a(8,"p",21),s(9),p(10,"transloco"),r(),a(11,"form",22),g("ngSubmit",function(){C(n);let o=u();return y(o.login())}),a(12,"div")(13,"label",23),s(14),p(15,"transloco"),r(),S(16,"input",24),p(17,"transloco"),r(),_(18,Ui,4,3,"p",25),a(19,"div"),S(20,"app-toggle-checkbox",26),p(21,"transloco"),r(),a(22,"button",27),_(23,Fi,2,3)(24,Ai,2,3),r()(),a(25,"p",28),s(26),p(27,"transloco"),a(28,"a",29),s(29),p(30,"transloco"),r()()()()}if(e&2){let n=u();i(3),m(" ",c(4,16,"profile.login_title")," "),i(3),m(" ",c(7,18,"profile.login_description")," "),i(3),m(" ",c(10,20,"profile.no_auth_warning")," "),i(2),v("formGroup",n.form),i(3),h(c(15,22,"profile.api_key")),i(2),v("placeholder",c(17,24,"profile.api_key_placeholder")),i(2),f(n.loginError()?18:-1),i(2),v("description",c(21,26,"profile.remember_api_key")),i(2),A("btn-disabled",!n.form.valid||n.auth.isLoading())("btn-primary",n.form.valid&&!n.auth.isLoading()),v("disabled",!n.form.valid||n.auth.isLoading()),i(),f(n.auth.isLoading()?23:24),i(3),m(" ",c(27,28,"profile.no_account")," "),i(3),m(" ",c(30,30,"register_account")," ")}}function Ni(e,d){if(e&1&&(a(0,"span",32),s(1),r()),e&2){let n=u(2);i(),m("(",n.auth.currentUser().worker_ids.length,")")}}function Wi(e,d){if(e&1){let n=E();a(0,"div",34)(1,"div",54),V(),a(2,"svg",55),S(3,"path",56),r(),W(),a(4,"div",57)(5,"h3",58),s(6),p(7,"transloco"),r(),a(8,"p",59),s(9),p(10,"transloco"),r(),a(11,"button",60),g("click",function(){C(n);let o=u(3);return y(o.openUndeleteDialog())}),s(12),p(13,"transloco"),r()()()()}e&2&&(i(6),m(" ",c(7,3,"profile.account_marked_for_deletion_title")," "),i(3),m(" ",c(10,5,"profile.account_marked_for_deletion_message")," "),i(3),m(" ",c(13,7,"profile.undelete_account")," "))}function qi(e,d){if(e&1&&(a(0,"p",32),s(1),p(2,"transloco"),r()),e&2){let n=u(3);i(),m(" ",z(2,1,"profile.account_age",j(4,Ti,n.formatAccountAge(n.auth.currentUser().account_age)))," ")}}function Oi(e,d){e&1&&(a(0,"span",42),p(1,"transloco"),s(2),p(3,"transloco"),r()),e&2&&(B("title",c(1,2,"admin.users.desc.trusted")),i(2),h(c(3,4,"profile.badge.trusted")))}function Ri(e,d){e&1&&(a(0,"span",43),p(1,"transloco"),s(2),p(3,"transloco"),r()),e&2&&(B("title",c(1,2,"admin.users.desc.moderator")),i(2),h(c(3,4,"profile.badge.moderator")))}function $i(e,d){e&1&&(a(0,"span",44),p(1,"transloco"),s(2),p(3,"transloco"),r()),e&2&&(B("title",c(1,2,"admin.users.desc.education")),i(2),h(c(3,4,"profile.badge.education")))}function Hi(e,d){e&1&&(a(0,"span",45),p(1,"transloco"),s(2),p(3,"transloco"),r()),e&2&&(B("title",c(1,2,"admin.users.desc.service")),i(2),h(c(3,4,"profile.badge.service")))}function Gi(e,d){e&1&&(a(0,"span",46),p(1,"transloco"),s(2),p(3,"transloco"),r()),e&2&&(B("title",c(1,2,"admin.users.desc.customizer")),i(2),h(c(3,4,"profile.badge.customizer")))}function ji(e,d){e&1&&(a(0,"span",47),p(1,"transloco"),s(2),p(3,"transloco"),r()),e&2&&(B("title",c(1,2,"admin.users.desc.special")),i(2),h(c(3,4,"profile.badge.special")))}function zi(e,d){e&1&&(a(0,"span",47),s(1),p(2,"transloco"),r()),e&2&&(i(),h(c(2,1,"profile.badge.anonymous")))}function Zi(e,d){e&1&&(a(0,"span",45),p(1,"transloco"),s(2),p(3,"transloco"),r()),e&2&&(B("title",c(1,2,"admin.users.desc.filtered")),i(2),h(c(3,4,"profile.badge.filtered")))}function Qi(e,d){e&1&&(a(0,"span",48),p(1,"transloco"),s(2),p(3,"transloco"),r()),e&2&&(B("title",c(1,2,"admin.users.desc.flagged")),i(2),h(c(3,4,"profile.badge.flagged")))}function Yi(e,d){if(e&1&&(a(0,"p",52),s(1),p(2,"formatNumber"),p(3,"transloco"),r()),e&2){let n=u(3);i(),m(" ",z(3,3,"profile.monthly_kudos",j(6,Ii,c(2,1,n.auth.currentUser().monthly_kudos.amount)))," ")}}function Ji(e,d){if(e&1&&(a(0,"p",52)(1,"strong"),s(2,"Evaluating Kudos:"),r(),s(3),p(4,"formatNumber"),r()),e&2){let n=u(3);B("title","Evaluating Kudos from generations and uptime. When this reaches the threshold, you become trusted."),i(3),m(" ",c(4,2,n.auth.currentUser().evaluating_kudos)," ")}}function Xi(e,d){e&1&&(a(0,"div",53)(1,"h4",61),s(2),p(3,"transloco"),r(),a(4,"p",62),s(5),p(6,"transloco"),r(),a(7,"a",63),s(8),p(9,"transloco"),r()()),e&2&&(i(2),m(" ",c(3,3,"profile.low_kudos_info_title")," "),i(3),m(" ",c(6,5,"profile.low_kudos_info_message")," "),i(3),m(" ",c(9,7,"profile.low_kudos_info_link")," \u2192 "))}function en(e,d){e&1&&(a(0,"a",68),s(1),p(2,"transloco"),r()),e&2&&(i(),h(c(2,1,"profile.admin_panel")))}function tn(e,d){if(e&1){let n=E();a(0,"button",60),g("click",function(){C(n);let o=u(4);return y(o.openUndeleteDialog())}),s(1),p(2,"transloco"),r()}e&2&&(i(),m(" ",c(2,1,"profile.undelete_account")," "))}function nn(e,d){if(e&1){let n=E();a(0,"button",74),g("click",function(){C(n);let o=u(4);return y(o.openDeleteDialog())}),s(1),p(2,"transloco"),r()}e&2&&(i(),m(" ",c(2,1,"profile.delete_account")," "))}function on(e,d){if(e&1){let n=E();a(0,"button",74),g("click",function(){C(n);let o=u(4);return y(o.openDeleteDialog())}),s(1),p(2,"transloco"),r()}e&2&&(i(),m(" ",c(2,1,"profile.permanently_delete_account")," "))}function an(e,d){if(e&1){let n=E();a(0,"div",64)(1,"h4",65),s(2),p(3,"transloco"),r(),S(4,"app-kudos-breakdown-panel",66),r(),a(5,"div",64)(6,"div",67),_(7,en,3,3,"a",68),a(8,"a",69),s(9),p(10,"transloco"),r(),a(11,"button",70),g("click",function(){C(n);let o=u(3);return y(o.logout())}),s(12),p(13,"transloco"),r()(),a(14,"div",71),_(15,tn,3,3,"button",72),_(16,nn,3,3,"button",73),_(17,on,3,3,"button",73),r()()}if(e&2){let n=u(3);i(2),m(" ",c(3,9,"profile.kudos_breakdown")," "),i(2),v("kudosDetails",n.auth.currentUser().kudos_details)("showZeroValues",!1),i(3),f(n.auth.currentUser().moderator?7:-1),i(2),h(c(10,11,"profile.transfer_kudos")),i(3),m(" ",c(13,13,"profile.logout")," "),i(3),f(n.auth.currentUser().deleted?15:-1),i(),f(n.auth.currentUser().deleted?-1:16),i(),f(n.auth.currentUser().deleted?17:-1)}}function rn(e,d){if(e&1&&(_(0,Wi,14,9,"div",34),a(1,"div",35)(2,"div",36)(3,"div",37)(4,"span",38),s(5),r()(),a(6,"div",39)(7,"h2",40),s(8),r(),a(9,"p",32),s(10),r(),_(11,qi,3,6,"p",32),r()(),a(12,"div",41),_(13,Oi,4,6,"span",42),_(14,Ri,4,6,"span",43),_(15,$i,4,6,"span",44),_(16,Hi,4,6,"span",45),_(17,Gi,4,6,"span",46),_(18,ji,4,6,"span",47),_(19,zi,3,3,"span",47),_(20,Zi,4,6,"span",45),_(21,Qi,4,6,"span",48),r(),a(22,"h3",19),s(23),p(24,"transloco"),r(),a(25,"div",49)(26,"span",50),s(27),p(28,"formatNumber"),r(),a(29,"span",51),s(30),p(31,"transloco"),r()(),_(32,Yi,4,8,"p",52),_(33,Ji,5,4,"p",52),_(34,Xi,10,9,"div",53),_(35,an,18,15),r()),e&2){let n,t=u(2);f(t.auth.currentUser().deleted?0:-1),i(5),h(t.auth.currentUser().username.charAt(0).toUpperCase()),i(3),m(" ",t.auth.currentUser().username," "),i(2),m(" ID: ",t.auth.currentUser().id," "),i(),f(t.auth.currentUser().account_age?11:-1),i(2),f(t.auth.currentUser().trusted?13:-1),i(),f(t.auth.currentUser().moderator?14:-1),i(),f(t.auth.currentUser().education?15:-1),i(),f(t.auth.currentUser().service?16:-1),i(),f(t.auth.currentUser().customizer?17:-1),i(),f(t.auth.currentUser().special?18:-1),i(),f(t.auth.currentUser().pseudonymous?19:-1),i(),f(t.auth.currentUser().filtered?20:-1),i(),f(t.auth.currentUser().flagged?21:-1),i(2),h(c(24,21,"profile.kudos")),i(4),h(c(28,23,t.auth.currentUser().kudos)),i(3),h(c(31,25,"profile.kudos_balance")),i(2),f((n=t.auth.currentUser().monthly_kudos)!=null&&n.amount?32:-1),i(),f(t.auth.currentUser().evaluating_kudos!==void 0&&t.auth.currentUser().evaluating_kudos!==null&&!t.auth.currentUser().trusted?33:-1),i(),f(t.auth.currentUser().kudos<100?34:-1),i(),f(t.auth.currentUser().kudos_details?35:-1)}}function ln(e,d){if(e&1&&(a(0,"div",78)(1,"span",79),s(2),p(3,"transloco"),r(),a(4,"span",80),s(5),a(6,"span",28),s(7," ("),S(8,"app-unit-tooltip",81),s(9,") "),r()()()),e&2){let n=d;B("title","Total megapixelsteps you have requested for image generation"),i(2),h(c(3,5,"profile.records.megapixelsteps")),i(3),m(" ",n.primary.formatted," "),i(3),v("unit",n)("swapDisplay",!0)}}function sn(e,d){if(e&1&&(a(0,"div",78)(1,"span",79),s(2),p(3,"transloco"),r(),a(4,"span",80),s(5),a(6,"span",28),s(7," ("),S(8,"app-unit-tooltip",81),s(9,") "),r()()()),e&2){let n=d;B("title","Total tokens you have requested for text generation"),i(2),h(c(3,5,"profile.records.tokens")),i(3),m(" ",n.primary.formatted," "),i(3),v("unit",n)("swapDisplay",!0)}}function dn(e,d){if(e&1&&(a(0,"div",76)(1,"h4",65),s(2),p(3,"transloco"),r(),a(4,"div",77),_(5,ln,10,7,"div",78),_(6,sn,10,7,"div",78),r()()),e&2){let n,t,o=u(3);i(2),m(" ",c(3,3,"profile.records.usage")," "),i(3),f((n=o.usageMegapixelsteps())?5:-1,n),i(),f((t=o.usageTokens())?6:-1,t)}}function pn(e,d){if(e&1&&(a(0,"div",78)(1,"span",79),s(2),p(3,"transloco"),r(),a(4,"span",80),s(5),a(6,"span",28),s(7," ("),S(8,"app-unit-tooltip",81),s(9,") "),r()()()),e&2){let n=d;B("title","Total megapixelsteps your workers have generated"),i(2),h(c(3,5,"profile.records.megapixelsteps")),i(3),m(" ",n.primary.formatted," "),i(3),v("unit",n)("swapDisplay",!0)}}function cn(e,d){if(e&1&&(a(0,"div",78)(1,"span",79),s(2),p(3,"transloco"),r(),a(4,"span",80),s(5),a(6,"span",28),s(7," ("),S(8,"app-unit-tooltip",81),s(9,") "),r()()()),e&2){let n=d;B("title","Total tokens your workers have generated"),i(2),h(c(3,5,"profile.records.tokens")),i(3),m(" ",n.primary.formatted," "),i(3),v("unit",n)("swapDisplay",!0)}}function mn(e,d){if(e&1&&(a(0,"div",76)(1,"h4",65),s(2),p(3,"transloco"),r(),a(4,"div",77),_(5,pn,10,7,"div",78),_(6,cn,10,7,"div",78),r()()),e&2){let n,t,o=u(3);i(2),m(" ",c(3,3,"profile.records.contribution")," "),i(3),f((n=o.contributionMegapixelsteps())?5:-1,n),i(),f((t=o.contributionTokens())?6:-1,t)}}function un(e,d){if(e&1&&(a(0,"div",83)(1,"span",79),s(2),p(3,"transloco"),r(),a(4,"span",80),s(5),p(6,"formatNumber"),r()()),e&2){let n=u(4);B("title","Total image generation requests you have made"),i(2),h(c(3,3,"profile.records.image")),i(3),h(c(6,5,n.auth.currentUser().records.request.image??0))}}function _n(e,d){if(e&1&&(a(0,"div",83)(1,"span",79),s(2),p(3,"transloco"),r(),a(4,"span",80),s(5),p(6,"formatNumber"),r()()),e&2){let n=u(4);B("title","Total text generation requests you have made"),i(2),h(c(3,3,"profile.records.text")),i(3),h(c(6,5,n.auth.currentUser().records.request.text??0))}}function fn(e,d){if(e&1&&(a(0,"div",83)(1,"span",79),s(2),p(3,"transloco"),r(),a(4,"span",80),s(5),p(6,"formatNumber"),r()()),e&2){let n=u(4);B("title","Total image interrogation requests you have made"),i(2),h(c(3,3,"profile.records.interrogation")),i(3),h(c(6,5,n.auth.currentUser().records.request.interrogation??0))}}function xn(e,d){if(e&1&&(a(0,"div",76)(1,"h4",65),s(2),p(3,"transloco"),r(),a(4,"div",82),_(5,un,7,7,"div",83),_(6,_n,7,7,"div",83),_(7,fn,7,7,"div",83),r()()),e&2){let n=u(3);i(2),m(" ",c(3,4,"profile.records.requests")," "),i(3),f(n.auth.currentUser().records.request.image?5:-1),i(),f(n.auth.currentUser().records.request.text?6:-1),i(),f(n.auth.currentUser().records.request.interrogation?7:-1)}}function hn(e,d){if(e&1&&(a(0,"div",83)(1,"span",79),s(2),p(3,"transloco"),r(),a(4,"span",80),s(5),p(6,"formatNumber"),r()()),e&2){let n=u(4);B("title","Total image generations your workers have fulfilled"),i(2),h(c(3,3,"profile.records.image")),i(3),h(c(6,5,n.auth.currentUser().records.fulfillment.image??0))}}function Cn(e,d){if(e&1&&(a(0,"div",83)(1,"span",79),s(2),p(3,"transloco"),r(),a(4,"span",80),s(5),p(6,"formatNumber"),r()()),e&2){let n=u(4);B("title","Total text generations your workers have fulfilled"),i(2),h(c(3,3,"profile.records.text")),i(3),h(c(6,5,n.auth.currentUser().records.fulfillment.text??0))}}function yn(e,d){if(e&1&&(a(0,"div",83)(1,"span",79),s(2),p(3,"transloco"),r(),a(4,"span",80),s(5),p(6,"formatNumber"),r()()),e&2){let n=u(4);B("title","Total image interrogations your workers have fulfilled"),i(2),h(c(3,3,"profile.records.interrogation")),i(3),h(c(6,5,n.auth.currentUser().records.fulfillment.interrogation??0))}}function gn(e,d){if(e&1&&(a(0,"div",76)(1,"h4",65),s(2),p(3,"transloco"),r(),a(4,"div",82),_(5,hn,7,7,"div",83),_(6,Cn,7,7,"div",83),_(7,yn,7,7,"div",83),r()()),e&2){let n=u(3);i(2),m(" ",c(3,4,"profile.records.fulfillments")," "),i(3),f(n.auth.currentUser().records.fulfillment.image?5:-1),i(),f(n.auth.currentUser().records.fulfillment.text?6:-1),i(),f(n.auth.currentUser().records.fulfillment.interrogation?7:-1)}}function vn(e,d){if(e&1&&(a(0,"div",33)(1,"h3",19),s(2),p(3,"transloco"),r(),a(4,"div",75),_(5,dn,7,5,"div",76),_(6,mn,7,5,"div",76),_(7,xn,8,6,"div",76),_(8,gn,8,6,"div",76),r()()),e&2){let n=u(2);i(2),m(" ",c(3,5,"profile.detailed_records")," "),i(3),f(n.auth.currentUser().records.usage?5:-1),i(),f(n.auth.currentUser().records.contribution?6:-1),i(),f(n.auth.currentUser().records.request?7:-1),i(),f(n.auth.currentUser().records.fulfillment?8:-1)}}function bn(e,d){if(e&1&&(a(0,"span",32),s(1),r()),e&2){let n=u(3);i(),m("(",n.auth.currentUser().worker_ids.length,")")}}function kn(e,d){e&1&&(a(0,"p",84),s(1),p(2,"transloco"),r()),e&2&&(i(),m(" ",c(2,1,"profile.no_workers_registered")," "))}function Sn(e,d){e&1&&(a(0,"p",100),s(1),p(2,"transloco"),r()),e&2&&(i(),m(" ",c(2,1,"profile.loading_workers")," "))}function wn(e,d){e&1&&(a(0,"p",84),s(1),p(2,"transloco"),r()),e&2&&(i(),m(" ",c(2,1,"profile.no_workers_match_filters")," "))}function En(e,d){if(e&1&&(a(0,"div",102)(1,"p",105),s(2),r(),S(3,"div",106)(4,"div",107),a(5,"p",32),s(6),p(7,"transloco"),r()()),e&2){let n=u().$implicit;i(2),m(" ",n.id," "),i(4),m(" ",c(7,2,"profile.loading_workers")," ")}}function Tn(e,d){if(e&1){let n=E();a(0,"app-worker-card",108),g("workerUpdated",function(){C(n);let o=u(6);return y(o.onWorkerUpdated())})("workerDeleted",function(o){C(n);let l=u(6);return y(l.onWorkerDeleted(o))}),r()}if(e&2){let n,t=u().$implicit,o=u(5);v("worker",t.worker)("isModerator",((n=o.auth.currentUser())==null?null:n.moderator)??!1)}}function In(e,d){if(e&1&&(a(0,"div",104)(1,"p",105),s(2),r(),a(3,"p",32),s(4),p(5,"transloco"),r()()),e&2){let n=u().$implicit;i(2),m(" ",n.id," "),i(2),m(" ",c(5,2,"profile.no_workers_found")," ")}}function Bn(e,d){if(e&1&&_(0,En,8,4,"div",102)(1,Tn,1,2,"app-worker-card",103)(2,In,6,4,"div",104),e&2){let n=d.$implicit;f(n.loading?0:n.worker?1:2)}}function Pn(e,d){if(e&1&&(a(0,"div",101),$(1,Bn,3,1,null,null,Bi),r()),e&2){let n=u(4);i(),H(n.filteredAndSortedWorkers())}}function Kn(e,d){if(e&1){let n=E();a(0,"div",85)(1,"div",86)(2,"label",87),s(3),p(4,"transloco"),r(),a(5,"input",88),p(6,"transloco"),g("input",function(o){C(n);let l=u(3);return y(l.onFilterTextChange(o))}),r()(),a(7,"div")(8,"label",89),s(9),p(10,"transloco"),r(),a(11,"select",90),g("change",function(o){C(n);let l=u(3);return y(l.onFilterTypeChange(o.target.value))}),a(12,"option",91),s(13),p(14,"transloco"),r(),a(15,"option",92),s(16),p(17,"transloco"),r(),a(18,"option",93),s(19),p(20,"transloco"),r(),a(21,"option",94),s(22),p(23,"transloco"),r()()(),a(24,"div")(25,"label",95),s(26),p(27,"transloco"),r(),a(28,"select",96),g("change",function(o){C(n);let l=u(3);return y(l.onFilterMaintenanceChange(o.target.value))}),a(29,"option",91),s(30),p(31,"transloco"),r(),a(32,"option",97),s(33),p(34,"transloco"),r(),a(35,"option",98),s(36),p(37,"transloco"),r(),a(38,"option",99),s(39),p(40,"transloco"),r()()()(),_(41,Sn,3,3,"p",100),_(42,wn,3,3,"p",84)(43,Pn,3,0,"div",101)}if(e&2){let n=u(3);i(3),h(c(4,17,"profile.workers.search")),i(2),v("value",n.filterText())("placeholder",c(6,19,"profile.workers.search_placeholder")),i(4),h(c(10,21,"profile.workers.type")),i(2),v("value",n.filterWorkerType()),i(2),m(" ",c(14,23,"profile.workers.type.all")," "),i(3),m(" ",c(17,25,"profile.workers.type.image")," "),i(3),m(" ",c(20,27,"profile.workers.type.text")," "),i(3),m(" ",c(23,29,"profile.workers.type.interrogation")," "),i(4),h(c(27,31,"profile.workers.status")),i(2),v("value",n.filterMaintenance()),i(2),m(" ",c(31,33,"profile.workers.status.all")," "),i(3),m(" ",c(34,35,"profile.workers.status.active")," "),i(3),m(" ",c(37,37,"profile.workers.status.maintenance")," "),i(3),m(" ",c(40,39,"profile.workers.status.offline")," "),i(2),f(n.loadingWorkers()?41:-1),i(),f(!n.loadingWorkers()&&n.filteredAndSortedWorkers().length===0&&n.userWorkers().length>0?42:43)}}function Ln(e,d){if(e&1&&(a(0,"div",33)(1,"h3",19),s(2),p(3,"transloco"),_(4,bn,2,1,"span",32),r(),_(5,kn,3,3,"p",84)(6,Kn,44,41),r()),e&2){let n=u(2);i(2),m(" ",c(3,3,"profile.your_workers")," "),i(2),f(n.auth.currentUser().worker_ids&&n.auth.currentUser().worker_ids.length>0?4:-1),i(),f(!n.auth.currentUser().worker_ids||n.auth.currentUser().worker_ids.length===0?5:6)}}function Dn(e,d){if(e&1&&(a(0,"span",32),s(1),r()),e&2){let n=u(3);i(),m("(",n.auth.currentUser().styles.length,")")}}function Vn(e,d){if(e&1&&(a(0,"div",33)(1,"h3",19),s(2),p(3,"transloco"),_(4,Dn,2,1,"span",32),r(),S(5,"app-profile-styles-list"),r()),e&2){let n=u(2);i(2),m(" ",c(3,2,"profile.tabs.styles")," "),i(2),f(n.auth.currentUser().styles&&n.auth.currentUser().styles.length>0?4:-1)}}function Un(e,d){e&1&&(a(0,"div",33),S(1,"app-shared-key-list"),r())}function Fn(e,d){if(e&1){let n=E();a(0,"div",14)(1,"div",30)(2,"button",31),g("click",function(){C(n);let o=u();return y(o.setActiveTab("profile"))}),s(3),p(4,"transloco"),r(),a(5,"button",31),g("click",function(){C(n);let o=u();return y(o.setActiveTab("records"))}),s(6),p(7,"transloco"),r(),a(8,"button",31),g("click",function(){C(n);let o=u();return y(o.setActiveTab("workers"))}),s(9),p(10,"transloco"),_(11,Ni,2,1,"span",32),r(),a(12,"button",31),g("click",function(){C(n);let o=u();return y(o.setActiveTab("styles"))}),s(13),p(14,"transloco"),r(),a(15,"button",31),g("click",function(){C(n);let o=u();return y(o.setActiveTab("shared-keys"))}),s(16),p(17,"transloco"),r()(),_(18,rn,36,27),_(19,vn,9,7,"div",33),_(20,Ln,7,5,"div",33),_(21,Vn,6,4,"div",33),_(22,Un,2,0,"div",33),r()}if(e&2){let n=u();i(2),A("details-tab-active",n.activeTab()==="profile"),i(),m(" ",c(4,21,"profile.tabs.profile")," "),i(2),A("details-tab-active",n.activeTab()==="records"),i(),m(" ",c(7,23,"profile.tabs.detailed_records")," "),i(2),A("details-tab-active",n.activeTab()==="workers"),i(),m(" ",c(10,25,"profile.tabs.your_workers")," "),i(2),f(n.auth.currentUser().worker_ids&&n.auth.currentUser().worker_ids.length>0?11:-1),i(),A("details-tab-active",n.activeTab()==="styles"),i(),m(" ",c(14,27,"profile.tabs.styles")," "),i(2),A("details-tab-active",n.activeTab()==="shared-keys"),i(),m(" ",c(17,29,"profile.tabs.shared_keys")," "),i(2),f(n.activeTab()==="profile"?18:-1),i(),f(n.activeTab()==="records"&&(n.auth.currentUser().records||n.auth.currentUser().usage||n.auth.currentUser().contributions)?19:-1),i(),f(n.activeTab()==="workers"?20:-1),i(),f(n.activeTab()==="styles"?21:-1),i(),f(n.activeTab()==="shared-keys"?22:-1)}}var pa=(()=>{let d=class d{constructor(){this.title=I(Ne),this.translator=I(Re),this.footerColor=I($e),this.destroyRef=I(R),this.workerService=I(Ye),this.router=I(re),this.auth=I(G),this.units=I(Oe),this.workerRequestConcurrency=3,this.loginError=k(!1),this.activeTab=k("profile"),this.userWorkers=k([]),this.loadingWorkers=k(!1),this.workersExpanded=k(!1),this.filterText=k(""),this.filterWorkerType=k("all"),this.filterMaintenance=k("all"),this.deletionSuccessMessage=k(!1),this.deleteDialogOpen=k(!1),this.deleteLoading=k(!1),this.deleteError=k(null),this.deleteSuccess=k(null),this.undeleteDialogOpen=k(!1),this.undeleteLoading=k(!1),this.usernameWithDiscriminator=T(()=>{let t=this.auth.currentUser();return t?t.username:""}),this.filteredAndSortedWorkers=T(()=>{let t=this.userWorkers().filter(b=>b.worker!==null),o=this.filterWorkerType();o!=="all"&&(t=t.filter(b=>b.worker.type===o));let l=this.filterMaintenance();l==="active"?t=t.filter(b=>b.worker.online):l==="maintenance"?t=t.filter(b=>b.worker.maintenance_mode):l==="offline"&&(t=t.filter(b=>!b.worker.online));let x=this.filterText().toLowerCase();return x&&(t=t.filter(b=>b.worker.name.toLowerCase().includes(x)||(b.worker.id??"").toLowerCase().includes(x))),[...t].sort((b,L)=>{let ie=Number(this.isActiveWorker(L.worker))-Number(this.isActiveWorker(b.worker));if(ie!==0)return ie;let pt=b.worker?.name??"",ct=L.worker?.name??"";return pt.localeCompare(ct)})}),this.recordsExpanded=k(!1),this.usageMegapixelsteps=T(()=>{let t=this.auth.currentUser();if(!t?.records?.usage?.megapixelsteps)return null;let o=t.records.usage.megapixelsteps*1e6;return this.units.formatTotalPixelsteps(o)}),this.usageTokens=T(()=>{let t=this.auth.currentUser();return t?.records?.usage?.tokens?this.units.formatTotalTokens(t.records.usage.tokens):null}),this.contributionMegapixelsteps=T(()=>{let t=this.auth.currentUser();if(!t?.records?.contribution?.megapixelsteps)return null;let o=t.records.contribution.megapixelsteps*1e6;return this.units.formatTotalPixelsteps(o)}),this.contributionTokens=T(()=>{let t=this.auth.currentUser();return t?.records?.contribution?.tokens?this.units.formatTotalTokens(t.records.contribution.tokens):null}),this.form=new de({apiKey:new D("",[P.required]),remember:new D(!1)})}ngOnInit(){Se([this.translator.get("profile.title"),this.translator.get("app_title")]).pipe(K(this.destroyRef)).subscribe(([t,o])=>{this.title.setTitle(`${t} | ${o}`)}),this.footerColor.setDarkMode(!0),this.form.controls.apiKey.valueChanges.pipe(K(this.destroyRef)).subscribe(()=>{this.loginError.set(!1)})}login(){this.form.valid&&(this.loginError.set(!1),this.auth.login(this.form.value.apiKey,this.form.value.remember??!1).subscribe(t=>{t?this.form.reset():this.loginError.set(!0)}))}logout(){this.auth.logout()}formatAccountAge(t){let o=Math.floor(t/86400);if(o>365){let l=Math.floor(o/365),x=o%365;return`${l} year${l!==1?"s":""}, ${x} day${x!==1?"s":""}`}return`${o} day${o!==1?"s":""}`}toggleWorkersSection(){let t=!this.workersExpanded();this.workersExpanded.set(t),t&&this.userWorkers().length===0&&this.loadUserWorkers()}toggleRecordsSection(){this.recordsExpanded.set(!this.recordsExpanded())}setActiveTab(t){this.activeTab.set(t),t==="workers"&&this.userWorkers().length===0&&this.loadUserWorkers()}loadUserWorkers(){let o=this.auth.currentUser()?.worker_ids??[];o.length!==0&&(this.loadingWorkers.set(!0),this.userWorkers.set(o.map(l=>({id:l,loading:!0,worker:null}))),ke(o).pipe(we(l=>this.workerService.getWorker(l).pipe(q(x=>({id:l,worker:x}))),this.workerRequestConcurrency),K(this.destroyRef)).subscribe({next:({id:l,worker:x})=>{this.userWorkers.update(b=>b.map(L=>L.id===l?Q(Z({},L),{worker:x,loading:!1}):L))},error:()=>{this.loadingWorkers.set(!1),this.userWorkers.update(l=>l.map(x=>Q(Z({},x),{loading:!1})))},complete:()=>{this.userWorkers.update(l=>this.sortWorkers(l)),this.loadingWorkers.set(!1)}}))}onWorkerUpdated(){this.loadUserWorkers()}onWorkerDeleted(t){this.userWorkers.update(o=>o.filter(l=>l.id!==t)),this.deletionSuccessMessage.set(!0),setTimeout(()=>this.deletionSuccessMessage.set(!1),5e3)}onFilterTextChange(t){let o=t.target;this.filterText.set(o.value)}onFilterTypeChange(t){this.filterWorkerType.set(t)}onFilterMaintenanceChange(t){this.filterMaintenance.set(t)}openDeleteDialog(){this.deleteError.set(null),this.deleteDialogOpen.set(!0)}closeDeleteDialog(){this.deleteDialogOpen.set(!1)}confirmDeleteAccount(){let t=this.auth.currentUser();if(!t)return;let o=t.deleted??!1;this.deleteLoading.set(!0),this.deleteError.set(null),this.auth.deleteUser().pipe(K(this.destroyRef)).subscribe(l=>{this.deleteLoading.set(!1),l.success?(this.deleteDialogOpen.set(!1),o?(this.deleteSuccess.set("profile.delete_account_permanent_success"),setTimeout(()=>{this.auth.logout(),this.router.navigate(["/"])},2e3)):(this.deleteSuccess.set("profile.delete_account_success"),this.auth.refreshUser().subscribe(),setTimeout(()=>this.deleteSuccess.set(null),5e3))):(this.deleteError.set(l.error.message),setTimeout(()=>this.deleteError.set(null),5e3))})}openUndeleteDialog(){this.undeleteDialogOpen.set(!0)}closeUndeleteDialog(){this.undeleteDialogOpen.set(!1)}confirmUndeleteAccount(){this.undeleteLoading.set(!0),this.auth.undeleteUser().pipe(K(this.destroyRef)).subscribe(t=>{this.undeleteLoading.set(!1),this.undeleteDialogOpen.set(!1),t.success?(this.deleteSuccess.set("profile.undelete_account_success"),this.auth.refreshUser().subscribe(),setTimeout(()=>this.deleteSuccess.set(null),5e3)):(this.deleteError.set(t.error??"Failed to restore account"),setTimeout(()=>this.deleteError.set(null),5e3))})}sortWorkers(t){return[...t.map(l=>l.loading?Q(Z({},l),{loading:!1}):l)].sort((l,x)=>{let b=Number(this.isActiveWorker(x.worker))-Number(this.isActiveWorker(l.worker));if(b!==0)return b;let L=l.worker?.name??"",ie=x.worker?.name??"";return L.localeCompare(ie)})}isActiveWorker(t){return t?t.online&&!t.paused&&!t.maintenance_mode:!1}};d.\u0275fac=function(o){return new(o||d)},d.\u0275cmp=F({type:d,selectors:[["app-profile"]],decls:26,vars:32,consts:[["role","status","aria-live","polite",1,"toast","toast-success"],["role","alert","aria-live","assertive",1,"toast","toast-error"],[3,"confirm","cancel","open","title","expectedUsername","isAlreadyDeleted","confirmLabel","cancelLabel","loading"],[3,"confirm","cancel","open","title","confirmLabel","cancelLabel","loading"],[1,"text-gray-300"],[1,"section-primary"],[1,"container-page-header"],[1,"place-center"],[1,"heading-hero"],[1,"section-secondary"],[1,"container-spaced"],[1,"grid-items"],[1,"text-secondary","sm:text-lg"],[1,"container-centered-md"],[1,"container-page-content"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-5","h-5"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M5 13l4 4L19 7"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M6 18L18 6M6 6l12 12"],[1,"card","card-bg-primary"],[1,"heading-card"],[1,"text-intro"],[1,"text-intro","text-secondary"],[3,"ngSubmit","formGroup"],["for","api_key",1,"form-label"],["formControlName","apiKey","type","password","id","api_key","required","",1,"form-input",3,"placeholder"],[1,"text-error"],["formControlName","remember",3,"description"],["type","submit",3,"disabled"],[1,"text-secondary"],["href","https://aihorde.net/register","target","_blank","rel","noopener noreferrer",1,"link"],[1,"details-tabs"],[1,"details-tab",3,"click"],[1,"text-secondary","text-sm"],[1,"card","card-bg-primary","card-full","card-spaced"],[1,"mb-6","p-6","bg-red-900/30","border-2","border-red-600","rounded-lg"],[1,"card","card-bg-primary","card-full"],[1,"profile-header","section-divider-bottom"],[1,"avatar-circle","avatar-lg","avatar-gradient"],[1,"avatar-text"],[1,"profile-header-content"],[1,"heading-subsection"],[1,"badge-container"],[1,"badge-base","badge-success"],[1,"badge-base","badge-purple"],[1,"badge-base","badge-info"],[1,"badge-base","badge-warning"],[1,"badge-base","badge-pink"],[1,"badge-base","badge-secondary"],[1,"badge-base","badge-danger"],[1,"highlight-box"],[1,"data-value-xl"],[1,"data-label-spaced"],[1,"text-secondary","text-sm","text-center"],[1,"mt-4","p-4","bg-blue-50","dark:bg-blue-900/20","border","border-blue-200","dark:border-blue-800","rounded-lg"],[1,"flex","items-start","gap-4"],["fill","currentColor","viewBox","0 0 20 20",1,"w-8","h-8","text-red-400","shrink-0","mt-0.5"],["fill-rule","evenodd","d","M8.485 2.495c.673-1.167 2.357-1.167 3.03 0l6.28 10.875c.673 1.167-.17 2.625-1.516 2.625H3.72c-1.347 0-2.189-1.458-1.515-2.625L8.485 2.495zM10 5a.75.75 0 01.75.75v3.5a.75.75 0 01-1.5 0v-3.5A.75.75 0 0110 5zm0 9a1 1 0 100-2 1 1 0 000 2z","clip-rule","evenodd"],[1,"flex-1"],[1,"text-lg","font-semibold","text-red-300","mb-2"],[1,"text-red-200","text-sm","mb-4"],[1,"btn-warning",3,"click"],[1,"text-sm","font-semibold","text-blue-900","dark:text-blue-100","mb-2"],[1,"text-sm","text-blue-800","dark:text-blue-200","mb-3"],["routerLink","/faq/","fragment","kudos",1,"text-sm","font-medium","text-blue-600","dark:text-blue-400","hover:underline"],[1,"section-divider-top"],[1,"section-title-sm"],["variant","profile",3,"kudosDetails","showZeroValues"],[1,"action-row"],["routerLink","/admin/",1,"btn-primary"],["routerLink","/v2-transfer/",1,"btn-primary"],[1,"btn-source-control",3,"click"],[1,"action-row","mt-4"],[1,"btn-warning"],[1,"btn-primary","btn-danger"],[1,"btn-primary","btn-danger",3,"click"],[1,"records-section-wrapper"],[1,"record-group"],[1,"data-grid-1-2"],[1,"data-item-box"],[1,"data-label"],[1,"data-value"],[3,"unit","swapDisplay"],[1,"data-grid-1-2-3"],[1,"data-item-box","data-item-centered"],[1,"text-secondary","text-center","py-4"],[1,"mb-4","flex","flex-wrap","gap-3","items-end"],[1,"flex-1","min-w-[200px]"],["for","worker-search",1,"form-label","text-sm"],["type","text","id","worker-search",1,"form-input",3,"input","value","placeholder"],["for","worker-type",1,"form-label","text-sm"],["id","worker-type",1,"form-input",3,"change","value"],["value","all"],["value","image"],["value","text"],["value","interrogation"],["for","worker-status",1,"form-label","text-sm"],["id","worker-status",1,"form-input",3,"change","value"],["value","active"],["value","maintenance"],["value","offline"],[1,"text-secondary","text-sm","mb-2"],[1,"worker-grid"],["aria-busy","true",1,"skeleton-box"],[3,"worker","isModerator"],["role","status",1,"skeleton-box","skeleton-box-dashed"],[1,"data-value","text-sm","break-all"],[1,"skeleton-bar","skeleton-bar-sm"],[1,"skeleton-bar","skeleton-bar-lg"],[3,"workerUpdated","workerDeleted","worker","isModerator"]],template:function(o,l){if(o&1&&(_(0,Pi,6,3,"div",0),_(1,Ki,6,3,"div",0),_(2,Li,6,6,"div",1),a(3,"app-delete-account-dialog",2),p(4,"transloco"),p(5,"transloco"),p(6,"transloco"),g("confirm",function(){return l.confirmDeleteAccount()})("cancel",function(){return l.closeDeleteDialog()}),r(),a(7,"app-admin-dialog",3),p(8,"transloco"),p(9,"transloco"),p(10,"transloco"),g("confirm",function(){return l.confirmUndeleteAccount()})("cancel",function(){return l.closeUndeleteDialog()}),a(11,"p",4),s(12),p(13,"transloco"),r()(),a(14,"section",5)(15,"div",6)(16,"div",7)(17,"h1",8),_(18,Di,2,6)(19,Vi,2,3),r()()()(),a(20,"section",9)(21,"div",10)(22,"div",11)(23,"div",12),_(24,Mi,31,32,"div",13)(25,Fn,23,31,"div",14),r()()()()),o&2){let x;f(l.deletionSuccessMessage()?0:-1),i(),f(l.deleteSuccess()?1:-1),i(),f(l.deleteError()?2:-1),i(),v("open",l.deleteDialogOpen())("title",c(4,18,"profile.delete_account_title"))("expectedUsername",l.usernameWithDiscriminator())("isAlreadyDeleted",((x=l.auth.currentUser())==null?null:x.deleted)??!1)("confirmLabel",c(5,20,"profile.delete_account_confirm"))("cancelLabel",c(6,22,"styles.form.cancel"))("loading",l.deleteLoading()),i(4),v("open",l.undeleteDialogOpen())("title",c(8,24,"profile.undelete_account_title"))("confirmLabel",c(9,26,"profile.undelete_account_confirm"))("cancelLabel",c(10,28,"styles.form.cancel"))("loading",l.undeleteLoading()),i(5),h(c(13,30,"profile.undelete_account_message")),i(6),f(l.auth.isLoggedIn()?18:19),i(6),f(l.auth.isLoggedIn()?25:24)}},dependencies:[M,We,_e,ue,pe,je,ze,Y,J,se,Ze,ce,me,fe,le,Je,lt,st,it,qe,dt,nt],encapsulation:2,changeDetection:0});let e=d;return e})();export{pa as ProfileComponent};
