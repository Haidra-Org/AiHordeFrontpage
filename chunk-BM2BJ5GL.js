import{a as N}from"./chunk-QWPHJZNM.js";import{a as P}from"./chunk-CRVG2NOB.js";import{b as L,e as $}from"./chunk-3B2Y74WR.js";import"./chunk-YL3TDIGQ.js";import"./chunk-LN47MBAJ.js";import{a as R}from"./chunk-OBD3L7BG.js";import"./chunk-PZF2KSPB.js";import{c as M}from"./chunk-MXBDCOJX.js";import{l as B}from"./chunk-JHAYVYNF.js";import{k as F}from"./chunk-BPDV6QKT.js";import{Db as u,N as I,Oa as t,Rb as o,Sb as d,Tb as C,Ub as w,X as f,Za as y,dc as g,ga as E,gc as s,hc as p,ja as h,nc as D,ob as x,pb as _,r as T,rb as k,sb as b,tb as v,ub as a,vb as i}from"./chunk-4EEEF725.js";import"./chunk-4CLCTAJ7.js";var U=e=>["/details/workers/id",e],q=e=>["/details/models/name",e],W=(e,l)=>l.id,j=(e,l)=>l.name;function A(e,l){e&1&&(a(0,"div",2)(1,"p",3),o(2),s(3,"transloco"),i()()),e&2&&(t(2),d(p(3,1,"details.teams.loading")))}function O(e,l){if(e&1&&(a(0,"div",2)(1,"div",4)(2,"p",5),o(3),s(4,"transloco"),i(),a(5,"a",6),o(6),s(7,"transloco"),i()()()),e&2){let r=u();t(3),d(r.error()??p(4,2,"details.teams.not_found")),t(3),d(p(7,4,"details.teams.back_to_list"))}}function z(e,l){if(e&1&&(a(0,"p",9),o(1),s(2,"transloco"),a(3,"a",17),o(4),i(),o(5," - team id:"),a(6,"code",18),o(7),i()()),e&2){let r=u(2);t(),C(" ",p(2,4,"details.teams.created_by_label")," "),t(2),v("routerLink",r.getCreatorLink()),t(),d(r.team().creator),t(3),d(r.team().id)}}function G(e,l){if(e&1&&(a(0,"p",10),o(1),i()),e&2){let r=u(2);t(),d(r.team().info)}}function H(e,l){e&1&&(a(0,"span",24),o(1),s(2,"transloco"),i()),e&2&&(t(),d(p(2,1,"details.teams.worker_online")))}function J(e,l){e&1&&(a(0,"span",25),o(1),s(2,"transloco"),i()),e&2&&(t(),d(p(2,1,"details.teams.worker_offline")))}function K(e,l){if(e&1&&(a(0,"a",21)(1,"div",22)(2,"span",23),o(3),i(),x(4,H,3,3,"span",24)(5,J,3,3,"span",25),i(),a(6,"p",26),o(7),i()()),e&2){let r=l.$implicit;v("routerLink",g(5,U,r.id)),t(2),v("title",r.name),t(),d(r.name),t(),_(r.online?4:5),t(3),d(r.id)}}function Q(e,l){if(e&1&&(a(0,"div",16)(1,"h3",19),o(2),s(3,"transloco"),i(),a(4,"div",20),k(5,K,8,7,"a",21,W),i()()),e&2){let r=u(2);t(2),d(p(3,1,"details.teams.workers_section")),t(3),b(r.team().workers)}}function V(e,l){if(e&1&&(a(0,"span",29),o(1),i()),e&2){let r=u().$implicit;t(),C("(",r.count,")")}}function X(e,l){if(e&1&&(a(0,"a",28),o(1),x(2,V,2,1,"span",29),i()),e&2){let r=l.$implicit;v("routerLink",g(3,q,r.name)),t(),C(" ",r.name," "),t(),_((r.count??0)>1?2:-1)}}function Y(e,l){if(e&1&&(a(0,"div")(1,"h3",19),o(2),s(3,"transloco"),i(),a(4,"div",27),k(5,X,3,5,"a",28,j),i()()),e&2){let r=u(2);t(2),d(p(3,1,"details.teams.models_section")),t(3),b(r.team().models)}}function Z(e,l){if(e&1&&(a(0,"div",2)(1,"div",7)(2,"h2",8),o(3),i(),x(4,z,8,6,"p",9),x(5,G,2,1,"p",10),i(),a(6,"div",11)(7,"div",12)(8,"span",13),o(9),s(10,"transloco"),i(),a(11,"span",14),o(12),i(),a(13,"span",15),o(14),s(15,"transloco"),i()(),a(16,"div",12)(17,"span",13),o(18),s(19,"transloco"),i(),a(20,"span",14),o(21),s(22,"formatNumber"),i()(),a(23,"div",12)(24,"span",13),o(25),s(26,"transloco"),i(),a(27,"span",14),o(28),s(29,"formatNumber"),i()(),a(30,"div",12)(31,"span",13),o(32),s(33,"transloco"),i(),a(34,"span",14),o(35),i()()(),x(36,Q,7,3,"div",16),x(37,Y,7,3,"div"),i()),e&2){let r,m,n=u();t(3),d(n.team().name),t(),_(n.team().creator?4:-1),t(),_(n.team().info?5:-1),t(4),d(p(10,15,"details.teams.stats.workers")),t(3),d(n.team().worker_count??0),t(2),w(" (",n.onlineWorkerCount()," ",p(15,17,"details.teams.stats.online"),") "),t(4),d(p(19,19,"details.teams.stats.kudos")),t(3),d(p(22,21,n.team().kudos??0)),t(4),d(p(26,23,"details.teams.stats.requests")),t(3),d(p(29,25,n.team().requests_fulfilled??0)),t(4),d(p(33,27,"details.teams.stats.uptime")),t(3),d(n.formatUptime(n.team().uptime??0)),t(),_((((r=n.team().workers)==null?null:r.length)??0)>0?36:-1),t(),_((((m=n.team().models)==null?null:m.length)??0)>0?37:-1)}}var ce=(()=>{let l=class l{constructor(){this.title=f(B),this.translator=f(R),this.teamService=f(N),this.route=f(L),this.destroyRef=f(E),this.team=h(null),this.loading=h(!0),this.error=h(null),this.onlineWorkerCount=D(()=>{let m=this.team();return m?.workers?m.workers.filter(n=>n.online).length:0})}ngOnInit(){this.route.params.pipe(I(m=>{let n=m.teamId;return this.loading.set(!0),this.error.set(null),this.teamService.getTeam(n)}),F(this.destroyRef)).subscribe({next:m=>{this.team.set(m),this.loading.set(!1),m&&T([this.translator.get("app_title")]).subscribe(([n])=>{this.title.setTitle(`${m.name} | ${n}`)})},error:()=>{this.error.set("Failed to load team"),this.loading.set(!1)}})}formatUptime(m){let n=Math.floor(m/86400),c=Math.floor(m%86400/3600),S=Math.floor(m%3600/60);return n>0?`${n}d ${c}h`:c>0?`${c}h ${S}m`:`${S}m`}getCreatorLink(){let m=this.team();if(!m?.creator)return["/details/users"];let n=m.creator.split("#");return n.length>=2?["/details/users",n[n.length-1]]:["/details/users"]}};l.\u0275fac=function(n){return new(n||l)},l.\u0275cmp=y({type:l,selectors:[["app-team-detail"]],decls:7,vars:4,consts:[[1,"mb-4"],["routerLink","/details/teams",1,"link","text-sm"],[1,"card","card-bg-primary","card-full","card-spaced"],[1,"text-secondary","text-center","py-8"],[1,"text-center","py-8"],[1,"text-red-500","mb-4"],["routerLink","/details/teams",1,"btn-primary"],[1,"section-divider-bottom"],[1,"heading-hero","mb-2"],[1,"text-secondary"],[1,"text-secondary","mt-4"],[1,"data-grid-2-4-spaced","mb-6"],[1,"data-item-box","data-item-centered"],[1,"data-label"],[1,"data-value"],[1,"text-xs","text-secondary"],[1,"mb-6"],[1,"link",3,"routerLink"],[1,"code-block"],[1,"heading-card","mb-4"],[1,"data-grid-1-2-3"],[1,"worker-item-link",3,"routerLink"],[1,"worker-item-header"],[1,"worker-item-name",3,"title"],[1,"badge-base","badge-success","text-xs"],[1,"badge-base","badge-secondary","text-xs"],[1,"worker-item-subtitle"],[1,"badge-container"],[1,"worker-badge","worker-badge-interactive",3,"routerLink"],[1,"text-content-secondary","ml-1"]],template:function(n,c){n&1&&(a(0,"div",0)(1,"a",1),o(2),s(3,"transloco"),i()(),x(4,A,4,3,"div",2)(5,O,8,6,"div",2)(6,Z,38,29,"div",2)),n&2&&(t(2),C(" \u2190 ",p(3,2,"details.teams.back_to_list")," "),t(2),_(c.loading()?4:c.error()||!c.team()?5:6))},dependencies:[M,$,P],encapsulation:2,changeDetection:0});let e=l;return e})();export{ce as TeamDetailComponent};
