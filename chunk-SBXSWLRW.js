import{a as J,b as N}from"./chunk-TWRQSRNJ.js";import{a as fe,b as Se}from"./chunk-IZUKE6BY.js";import{a as Ce,b as ve}from"./chunk-H37K32K2.js";import{u as he}from"./chunk-ITLJRJUO.js";import"./chunk-DY5J6W22.js";import{a as ge}from"./chunk-UQV72EDM.js";import{a as xe}from"./chunk-ISHBUXAM.js";import{c as _e,d as ue}from"./chunk-BMIYH3UD.js";import{a as $}from"./chunk-Z4QX4XJM.js";import"./chunk-T6V27EFK.js";import{b as me}from"./chunk-T4BZNTIM.js";import"./chunk-VFTR325L.js";import{d as de,k as pe}from"./chunk-XFTKCJLM.js";import{c as G,g as ce,k as I}from"./chunk-GZDNXZTC.js";import{$b as q,A as W,Cb as g,Db as m,F as D,Ja as L,Oa as n,Ob as k,Rb as r,S as ie,Sb as _,Tb as h,Ub as z,X as T,Za as R,aa as v,ba as f,ca as U,cb as oe,da as B,dc as Q,ga as ne,gc as l,hc as d,ic as j,ja as C,k as K,lb as se,mb as re,nb as V,nc as E,ob as u,pb as x,q as Z,qb as O,qc as le,r as ee,rb as F,rc as Y,sb as P,ta as ae,tb as w,ub as a,vb as o,w as te,wb as S,zb as b}from"./chunk-QF4LG6ZD.js";import"./chunk-4CLCTAJ7.js";var ke=(()=>{let c=class c{constructor(){this.httpClient=T(ce),this.auth=T($),this.baseUrl="https://aihorde.net/api/v2"}getUser(i){let s=this.auth.getStoredApiKey(),p={};return s&&(p.apikey=s),this.httpClient.get(`${this.baseUrl}/users/${i}`,{headers:p}).pipe(W(()=>K(null)))}searchUsers(i){let s=this.auth.currentUser();return s&&s.username.toLowerCase().includes(i.toLowerCase())?K([{id:s.id,username:s.username}]):K([])}updateUser(i,s){let p=this.auth.getStoredApiKey();return p?this.httpClient.put(`${this.baseUrl}/users/${i}`,s,{headers:{apikey:p}}).pipe(W(()=>K(null))):K(null)}setTrusted(i,s){return this.updateUser(i,{trusted:s})}setFlagged(i,s){return this.updateUser(i,{flagged:s})}resetSuspicion(i){return this.updateUser(i,{reset_suspicion:!0})}setVpnAccess(i,s){return this.updateUser(i,{vpn:s})}setWorkerInvites(i,s){return this.updateUser(i,{worker_invite:s})}getSharedKey(i){return this.httpClient.get(`${this.baseUrl}/sharedkeys/${i}`).pipe(W(()=>K(null)))}getSharedKeysByIds(i){if(i.length===0)return K([]);let s=i.map(p=>this.getSharedKey(p).pipe(W(()=>K(null))));return te(s).pipe(Z(p=>p.filter(y=>y!==null)))}};c.\u0275fac=function(s){return new(s||c)},c.\u0275prov=ie({token:c,factory:c.\u0275fac,providedIn:"root"});let t=c;return t})();var Ee=(t,c)=>c.id;function be(t,c){t&1&&(U(),a(0,"svg",2),S(1,"path",4),o())}function Ve(t,c){t&1&&(U(),a(0,"svg",2),S(1,"path",5),o())}function Me(t,c){if(t&1){let e=b();a(0,"button",6),g("click",function(){v(e);let s=m().$implicit,p=m();return f(p.dismiss.emit(s.id))}),r(1," Dismiss "),o()}}function Te(t,c){if(t&1&&(a(0,"div",1),u(1,be,2,0,":svg:svg",2)(2,Ve,2,0,":svg:svg",2),a(3,"span"),r(4),o(),u(5,Me,2,0,"button",3),o()),t&2){let e=c.$implicit,i=m();k("toast-success",e.type==="success")("toast-error",e.type==="error")("toast-warning",e.type==="warning"),V("role",e.type==="error"?"alert":"status")("aria-live",e.type==="error"?"assertive":"polite"),n(),x(e.type==="success"?1:e.type==="error"||e.type==="warning"?2:-1),n(3),_(e.message),n(),x(i.showDismiss()?5:-1)}}var we=(()=>{let c=class c{constructor(){this.toasts=Y([]),this.showDismiss=Y(!0),this.dismiss=le()}};c.\u0275fac=function(s){return new(s||c)},c.\u0275cmp=R({type:c,selectors:[["app-admin-toast-bar"]],inputs:{toasts:[1,"toasts"],showDismiss:[1,"showDismiss"]},outputs:{dismiss:"dismiss"},decls:2,vars:0,consts:[[1,"toast",3,"toast-success","toast-error","toast-warning"],[1,"toast"],["fill","none","stroke","currentColor","viewBox","0 0 24 24","aria-hidden","true",1,"w-5","h-5"],["type","button","aria-label","Dismiss notification",1,"btn-muted","text-xs"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M5 13l4 4L19 7"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"],["type","button","aria-label","Dismiss notification",1,"btn-muted","text-xs",3,"click"]],template:function(s,p){s&1&&F(0,Te,6,11,"div",0,Ee),s&2&&P(p.toasts())},encapsulation:2,changeDetection:0});let t=c;return t})();var Ue=t=>({username:t}),A=(t,c)=>c.id;function Ie(t,c){t&1&&(a(0,"p",2),r(1),l(2,"transloco"),o()),t&2&&(n(),_(d(2,1,"admin.users.dialog.undelete_message")))}function Be(t,c){if(t&1){let e=b();a(0,"div",14)(1,"div",15),g("click",function(){v(e);let s=m(2);return f(s.closeRawJsonModal())}),o(),a(2,"div",16)(3,"div",17)(4,"h3",18),r(5,"Raw JSON"),o(),a(6,"button",19),g("click",function(){v(e);let s=m(2);return f(s.closeRawJsonModal())}),r(7," Close "),o()(),a(8,"div",20)(9,"div",21)(10,"div",22),r(11,"User"),o(),S(12,"pre",23),o(),a(13,"div",21)(14,"div",22),r(15,"Workers"),o(),S(16,"pre",24),o(),a(17,"div",21)(18,"div",22),r(19,"Shared Keys"),o(),S(20,"pre",25),o(),a(21,"div",21)(22,"div",22),r(23,"Styles"),o(),S(24,"pre",26),o()()()()}if(t&2){let e=m(2);n(12),w("innerHTML",e.userJsonHighlighted(),L),n(4),w("innerHTML",e.workersJsonHighlighted(),L),n(4),w("innerHTML",e.sharedKeysJsonHighlighted(),L),n(4),w("innerHTML",e.stylesJsonHighlighted(),L)}}function Fe(t,c){if(t&1&&u(0,Be,25,4,"div",14),t&2){let e=m();x(e.rawJsonModalOpen()?0:-1)}}function Pe(t,c){if(t&1){let e=b();a(0,"button",36),g("click",function(s){return v(e),m(2).clearUserHistory(),f(s.stopPropagation())}),r(1," Clear "),o()}}function Ke(t,c){if(t&1){let e=b();a(0,"button",39),g("click",function(){let s=v(e).$implicit,p=m(3);return f(p.selectUserFromHistory(s))}),a(1,"div",40)(2,"div",41)(3,"div",42),r(4),o(),a(5,"div",43),r(6),o()(),U(),a(7,"svg",44),S(8,"path",45),o()()()}if(t&2){let e=c.$implicit;n(4),h(" ",e.username," "),n(2),h("#",e.id)}}function De(t,c){if(t&1&&(a(0,"div",35)(1,"div",37),F(2,Ke,9,2,"button",38,A),o()()),t&2){let e=m(2);n(2),P(e.userHistory())}}function He(t,c){if(t&1){let e=b();a(0,"div",5)(1,"button",27),g("click",function(){v(e);let s=m();return f(s.toggleHistorySection())}),a(2,"div",28),U(),a(3,"svg",29),S(4,"path",30),o(),B(),a(5,"span",31),r(6),o()(),a(7,"div",28),u(8,Pe,2,0,"button",32),U(),a(9,"svg",33),S(10,"path",34),o()()(),u(11,De,4,0,"div",35),o()}if(t&2){let e=m();n(6),h("Recent Users (",e.userHistory().length,")"),n(2),x(e.historyExpanded()?8:-1),n(),k("expanded",e.historyExpanded()),n(2),x(e.historyExpanded()?11:-1)}}function ze(t,c){t&1&&(a(0,"div",10),U(),a(1,"svg",46),S(2,"circle",47)(3,"path",48),o(),B(),a(4,"p",49),r(5),l(6,"transloco"),o()()),t&2&&(n(5),_(d(6,1,"admin.users.loading")))}function We(t,c){t&1&&(a(0,"div",11),U(),a(1,"svg",50),S(2,"path",51),o(),B(),a(3,"p",52),r(4),l(5,"transloco"),o()()),t&2&&(n(4),_(d(5,1,"admin.users.not_found")))}function Le(t,c){t&1&&(a(0,"div",11),U(),a(1,"svg",50),S(2,"path",53),o(),B(),a(3,"p",52),r(4),l(5,"transloco"),o()()),t&2&&(n(4),h(" ",d(5,1,"admin.users.select_user")," "))}function Je(t,c){if(t&1){let e=b();a(0,"div",55)(1,"div",74),U(),a(2,"svg",75),S(3,"path",58),o(),B(),a(4,"span",76),r(5),l(6,"transloco"),o()(),a(7,"button",77),g("click",function(){v(e);let s=m(2);return f(s.openUndeleteUserDialog())}),r(8),l(9,"transloco"),o()()}t&2&&(n(5),_(d(6,2,"admin.users.deleted_warning")),n(3),h(" ",d(9,4,"admin.users.undelete")," "))}function Ne(t,c){t&1&&(a(0,"span",62),r(1),l(2,"transloco"),o()),t&2&&(n(),_(d(2,1,"admin.users.badge.deleted")))}function Re(t,c){t&1&&(U(),a(0,"svg",63),S(1,"path",78),o())}function Oe(t,c){t&1&&(U(),a(0,"svg",64),S(1,"path",79),o())}function je(t,c){t&1&&(a(0,"span",65),r(1),l(2,"transloco"),o()),t&2&&(n(),_(d(2,1,"admin.users.moderator_badge")))}function Ge(t,c){if(t&1&&(a(0,"div",68)(1,"div",69),r(2),l(3,"transloco"),o(),a(4,"div",18),r(5),o()()),t&2){let e=m(2);n(2),h(" ",d(3,2,"admin.users.field.evaluating_kudos")," "),n(3),h(" ",e.selectedUser().evaluating_kudos," ")}}function $e(t,c){if(t&1){let e=b();a(0,"button",80),g("click",function(){v(e);let s=m(2);return f(s.openResetSuspicionDialog())}),r(1," Reset "),o()}}function Ae(t,c){if(t&1){let e=b();a(0,"div",72)(1,"div",81)(2,"div",82),l(3,"transloco"),a(4,"div",83)(5,"span",84),r(6),l(7,"transloco"),o(),a(8,"span",85),r(9),l(10,"transloco"),o()(),a(11,"label",86)(12,"input",87),g("change",function(s){v(e);let p=m(2);return f(p.onFieldChange("moderator",s))}),o(),S(13,"div",88)(14,"div",89),o()(),a(15,"div",82),l(16,"transloco"),a(17,"div",83)(18,"span",84),r(19),l(20,"transloco"),o(),a(21,"span",85),r(22),l(23,"transloco"),o()(),a(24,"label",86)(25,"input",87),g("change",function(s){v(e);let p=m(2);return f(p.onFieldChange("trusted",s))}),o(),S(26,"div",88)(27,"div",89),o()(),a(28,"div",82),l(29,"transloco"),a(30,"div",83)(31,"span",84),r(32),l(33,"transloco"),o(),a(34,"span",85),r(35),l(36,"transloco"),o()(),a(37,"label",86)(38,"input",87),g("change",function(s){v(e);let p=m(2);return f(p.onFieldChange("flagged",s))}),o(),S(39,"div",88)(40,"div",89),o()(),a(41,"div",82),l(42,"transloco"),a(43,"div",83)(44,"span",84),r(45),l(46,"transloco"),o(),a(47,"span",85),r(48),l(49,"transloco"),o()(),a(50,"label",86)(51,"input",87),g("change",function(s){v(e);let p=m(2);return f(p.onFieldChange("customizer",s))}),o(),S(52,"div",88)(53,"div",89),o()(),a(54,"div",82),l(55,"transloco"),a(56,"div",83)(57,"span",84),r(58),l(59,"transloco"),o(),a(60,"span",85),r(61),l(62,"transloco"),o()(),a(63,"label",86)(64,"input",87),g("change",function(s){v(e);let p=m(2);return f(p.onFieldChange("service",s))}),o(),S(65,"div",88)(66,"div",89),o()(),a(67,"div",82),l(68,"transloco"),a(69,"div",83)(70,"span",84),r(71),l(72,"transloco"),o(),a(73,"span",85),r(74),l(75,"transloco"),o()(),a(76,"label",86)(77,"input",87),g("change",function(s){v(e);let p=m(2);return f(p.onFieldChange("education",s))}),o(),S(78,"div",88)(79,"div",89),o()(),a(80,"div",82),l(81,"transloco"),a(82,"div",83)(83,"span",84),r(84),l(85,"transloco"),o(),a(86,"span",85),r(87),l(88,"transloco"),o()(),a(89,"label",86)(90,"input",87),g("change",function(s){v(e);let p=m(2);return f(p.onFieldChange("special",s))}),o(),S(91,"div",88)(92,"div",89),o()(),a(93,"div",82),l(94,"transloco"),a(95,"div",83)(96,"span",84),r(97),l(98,"transloco"),o(),a(99,"span",85),r(100),l(101,"transloco"),o()(),a(102,"label",86)(103,"input",87),g("change",function(s){v(e);let p=m(2);return f(p.onFieldChange("filtered",s))}),o(),S(104,"div",88)(105,"div",89),o()(),a(106,"div",82),l(107,"transloco"),a(108,"div",83)(109,"span",84),r(110),l(111,"transloco"),o(),a(112,"span",85),r(113),l(114,"transloco"),o()(),a(115,"label",86)(116,"input",87),g("change",function(s){v(e);let p=m(2);return f(p.onFieldChange("vpn",s))}),o(),S(117,"div",88)(118,"div",89),o()(),a(119,"div",82),l(120,"transloco"),a(121,"div",83)(122,"span",84),r(123),l(124,"transloco"),o(),a(125,"span",85),r(126),l(127,"transloco"),o()(),a(128,"label",86)(129,"input",87),g("change",function(s){v(e);let p=m(2);return f(p.onFieldChange("publicWorkers",s))}),o(),S(130,"div",88)(131,"div",89),o()()()()}if(t&2){let e=m(2);n(2),k("field-row-dimmed",!e.moderatorValue())("field-row-changed",e.moderatorChanged()),V("title",d(3,80,"admin.users.desc.moderator")),n(4),_(d(7,82,"admin.users.field.moderator")),n(3),_(d(10,84,"admin.users.desc.moderator")),n(3),w("checked",e.moderatorValue()),n(3),k("field-row-dimmed",!e.trustedValue())("field-row-changed",e.trustedChanged()),V("title",d(16,86,"admin.users.desc.trusted")),n(4),_(d(20,88,"admin.users.field.trusted")),n(3),_(d(23,90,"admin.users.desc.trusted")),n(3),w("checked",e.trustedValue()),n(3),k("field-row-dimmed",!e.flaggedValue())("field-row-changed",e.flaggedChanged()),V("title",d(29,92,"admin.users.desc.flagged")),n(4),_(d(33,94,"admin.users.field.flagged")),n(3),_(d(36,96,"admin.users.desc.flagged")),n(3),w("checked",e.flaggedValue()),n(3),k("field-row-dimmed",!e.customizerValue())("field-row-changed",e.customizerChanged()),V("title",d(42,98,"admin.users.desc.customizer")),n(4),_(d(46,100,"admin.users.field.customizer")),n(3),_(d(49,102,"admin.users.desc.customizer")),n(3),w("checked",e.customizerValue()),n(3),k("field-row-dimmed",!e.serviceValue())("field-row-changed",e.serviceChanged()),V("title",d(55,104,"admin.users.desc.service")),n(4),_(d(59,106,"admin.users.field.service")),n(3),_(d(62,108,"admin.users.desc.service")),n(3),w("checked",e.serviceValue()),n(3),k("field-row-dimmed",!e.educationValue())("field-row-changed",e.educationChanged()),V("title",d(68,110,"admin.users.desc.education")),n(4),_(d(72,112,"admin.users.field.education")),n(3),_(d(75,114,"admin.users.desc.education")),n(3),w("checked",e.educationValue()),n(3),k("field-row-dimmed",!e.specialValue())("field-row-changed",e.specialChanged()),V("title",d(81,116,"admin.users.desc.special")),n(4),_(d(85,118,"admin.users.field.special")),n(3),_(d(88,120,"admin.users.desc.special")),n(3),w("checked",e.specialValue()),n(3),k("field-row-dimmed",!e.filteredValue())("field-row-changed",e.filteredChanged()),V("title",d(94,122,"admin.users.desc.filtered")),n(4),_(d(98,124,"admin.users.field.filtered")),n(3),_(d(101,126,"admin.users.desc.filtered")),n(3),w("checked",e.filteredValue()),n(3),k("field-row-dimmed",!e.vpnValue())("field-row-changed",e.vpnChanged()),V("title",d(107,128,"admin.users.desc.vpn_access")),n(4),_(d(111,130,"admin.users.field.vpn_access")),n(3),_(d(114,132,"admin.users.desc.vpn_access")),n(3),w("checked",e.vpnValue()),n(3),k("field-row-dimmed",!e.publicWorkersValue())("field-row-changed",e.publicWorkersChanged()),V("title",d(120,134,"admin.users.desc.public_workers")),n(4),_(d(124,136,"admin.users.field.public_workers")),n(3),_(d(127,138,"admin.users.desc.public_workers")),n(3),w("checked",e.publicWorkersValue())}}function qe(t,c){if(t&1){let e=b();a(0,"div",72)(1,"div",90)(2,"div"),l(3,"transloco"),a(4,"label",91),r(5),l(6,"transloco"),o(),a(7,"p",92),r(8),l(9,"transloco"),o(),a(10,"input",93),g("input",function(s){v(e);let p=m(2);return f(p.onFieldChange("workerInvites",s))}),o()(),a(11,"div"),l(12,"transloco"),a(13,"label",91),r(14),l(15,"transloco"),o(),a(16,"p",92),r(17),l(18,"transloco"),o(),a(19,"input",94),g("input",function(s){v(e);let p=m(2);return f(p.onFieldChange("usageMultiplier",s))}),o()(),a(20,"div"),l(21,"transloco"),a(22,"label",91),r(23),l(24,"transloco"),o(),a(25,"p",92),r(26),l(27,"transloco"),o(),a(28,"input",93),g("input",function(s){v(e);let p=m(2);return f(p.onFieldChange("concurrency",s))}),o()(),a(29,"div"),l(30,"transloco"),a(31,"label",91),r(32),l(33,"transloco"),o(),a(34,"p",92),r(35),l(36,"transloco"),o(),a(37,"input",93),g("input",function(s){v(e);let p=m(2);return f(p.onFieldChange("monthlyKudos",s))}),o()()()()}if(t&2){let e=m(2);n(2),V("title",d(3,24,"admin.users.desc.worker_invites")),n(3),_(d(6,26,"admin.users.field.worker_invites")),n(3),h(" ",d(9,28,"admin.users.desc.worker_invites")," "),n(2),k("form-input-changed",e.workerInvitesChanged()),w("value",e.workerInvitesValue()),n(),V("title",d(12,30,"admin.users.desc.usage_multiplier")),n(3),_(d(15,32,"admin.users.field.usage_multiplier")),n(3),h(" ",d(18,34,"admin.users.desc.usage_multiplier")," "),n(2),k("form-input-changed",e.usageMultiplierChanged()),w("value",e.usageMultiplierValue()),n(),V("title",d(21,36,"admin.users.desc.concurrency")),n(3),_(d(24,38,"admin.users.field.concurrency")),n(3),h(" ",d(27,40,"admin.users.desc.concurrency")," "),n(2),k("form-input-changed",e.concurrencyChanged()),w("value",e.concurrencyValue()),n(),V("title",d(30,42,"admin.users.desc.monthly_kudos")),n(3),_(d(33,44,"admin.users.field.monthly_kudos")),n(3),h(" ",d(36,46,"admin.users.desc.monthly_kudos")," "),n(2),k("form-input-changed",e.monthlyKudosChanged()),w("value",e.monthlyKudosValue())}}function Qe(t,c){if(t&1){let e=b();a(0,"div",100),l(1,"transloco"),a(2,"div",101)(3,"span",31),r(4),l(5,"transloco"),o(),a(6,"span",102),r(7),l(8,"transloco"),o(),a(9,"span",102),r(10),l(11,"transloco"),o(),a(12,"span",103),r(13),o()(),a(14,"button",104),g("click",function(){v(e);let s=m(3);return f(s.regenerateProxyPasskey())}),r(15),l(16,"transloco"),o()()}if(t&2){let e=m(3);V("title",d(1,7,"admin.users.desc.proxy_passkey")),n(4),_(d(5,9,"admin.users.field.proxy_passkey")),n(3),_(d(8,11,"admin.users.desc.proxy_passkey")),n(3),_(d(11,13,"admin.users.hint.proxy_passkey")),n(3),_(e.selectedUser().proxy_passkey),n(),w("disabled",e.isRegeneratingPasskey()),n(),h(" ",d(16,15,"admin.users.action.regenerate_proxy_passkey")," ")}}function Ye(t,c){if(t&1){let e=b();a(0,"div",73)(1,"div",95),l(2,"transloco"),a(3,"div",96)(4,"span",84),r(5),l(6,"transloco"),o(),a(7,"span",85),r(8),l(9,"transloco"),o()(),a(10,"input",97),g("input",function(s){v(e);let p=m(2);return f(p.onFieldChange("contact",s))}),o()(),a(11,"div",95),l(12,"transloco"),a(13,"div",98)(14,"span",84),r(15),l(16,"transloco"),o(),a(17,"span",85),r(18),l(19,"transloco"),o()(),a(20,"textarea",99),l(21,"transloco"),g("input",function(s){v(e);let p=m(2);return f(p.onFieldChange("adminComment",s))}),o()(),u(22,Qe,17,17,"div",100),o()}if(t&2){let e=m(2);n(),V("title",d(2,15,"admin.users.desc.contact")),n(4),_(d(6,17,"admin.users.field.contact")),n(3),_(d(9,19,"admin.users.desc.contact")),n(2),k("form-input-changed",e.contactChanged()),w("value",e.contactValue()),n(),V("title",d(12,21,"admin.users.desc.admin_comment")),n(4),_(d(16,23,"admin.users.field.admin_comment")),n(3),_(d(19,25,"admin.users.desc.admin_comment")),n(2),k("form-input-changed",e.adminCommentChanged()),w("placeholder",q(d(21,27,"admin.users.field.admin_comment")))("value",e.adminCommentValue()),n(2),x(e.selectedUser().proxy_passkey?22:-1)}}function Xe(t,c){if(t&1&&(a(0,"div",72),S(1,"app-kudos-breakdown-panel",105),o()),t&2){let e=m(2);n(),w("kudosDetails",e.selectedUser().kudos_details)}}function Ze(t,c){if(t&1&&(a(0,"div",110)(1,"span",111),r(2),l(3,"transloco"),o(),a(4,"span",31),r(5),l(6,"formatNumber"),o()()),t&2){let e=m(5);n(2),h("",d(3,2,"admin.users.records.megapixelsteps"),":"),n(3),_(d(6,4,e.selectedUser().records.usage.megapixelsteps??0))}}function et(t,c){if(t&1&&(a(0,"div",110)(1,"span",111),r(2),l(3,"transloco"),o(),a(4,"span",31),r(5),l(6,"formatNumber"),o()()),t&2){let e=m(5);n(2),h("",d(3,2,"admin.users.records.tokens"),":"),n(3),_(d(6,4,e.selectedUser().records.usage.tokens??0))}}function tt(t,c){if(t&1&&(a(0,"div",107)(1,"h4",108),r(2),l(3,"transloco"),o(),a(4,"div",109),u(5,Ze,7,6,"div",110),u(6,et,7,6,"div",110),o()()),t&2){let e=m(4);n(2),h(" ",d(3,3,"admin.users.records.usage")," "),n(3),x(e.selectedUser().records.usage.megapixelsteps!==void 0?5:-1),n(),x(e.selectedUser().records.usage.tokens!==void 0?6:-1)}}function it(t,c){if(t&1&&(a(0,"div",110)(1,"span",111),r(2),l(3,"transloco"),o(),a(4,"span",31),r(5),l(6,"formatNumber"),o()()),t&2){let e=m(5);n(2),h("",d(3,2,"admin.users.records.megapixelsteps"),":"),n(3),_(d(6,4,e.selectedUser().records.contribution.megapixelsteps??0))}}function nt(t,c){if(t&1&&(a(0,"div",110)(1,"span",111),r(2),l(3,"transloco"),o(),a(4,"span",31),r(5),l(6,"formatNumber"),o()()),t&2){let e=m(5);n(2),h("",d(3,2,"admin.users.records.tokens"),":"),n(3),_(d(6,4,e.selectedUser().records.contribution.tokens??0))}}function at(t,c){if(t&1&&(a(0,"div",107)(1,"h4",108),r(2),l(3,"transloco"),o(),a(4,"div",109),u(5,it,7,6,"div",110),u(6,nt,7,6,"div",110),o()()),t&2){let e=m(4);n(2),h(" ",d(3,3,"admin.users.records.contribution")," "),n(3),x(e.selectedUser().records.contribution.megapixelsteps!==void 0?5:-1),n(),x(e.selectedUser().records.contribution.tokens!==void 0?6:-1)}}function ot(t,c){if(t&1&&(a(0,"div",110)(1,"span",111),r(2),l(3,"transloco"),o(),a(4,"span",31),r(5),l(6,"formatNumber"),o()()),t&2){let e=m(5);n(2),h("",d(3,2,"admin.users.records.image"),":"),n(3),_(d(6,4,e.selectedUser().records.request.image??0))}}function st(t,c){if(t&1&&(a(0,"div",110)(1,"span",111),r(2),l(3,"transloco"),o(),a(4,"span",31),r(5),l(6,"formatNumber"),o()()),t&2){let e=m(5);n(2),h("",d(3,2,"admin.users.records.text"),":"),n(3),_(d(6,4,e.selectedUser().records.request.text??0))}}function rt(t,c){if(t&1&&(a(0,"div",110)(1,"span",111),r(2),l(3,"transloco"),o(),a(4,"span",31),r(5),l(6,"formatNumber"),o()()),t&2){let e=m(5);n(2),h("",d(3,2,"admin.users.records.interrogation"),":"),n(3),_(d(6,4,e.selectedUser().records.request.interrogation??0))}}function lt(t,c){if(t&1&&(a(0,"div",107)(1,"h4",108),r(2),l(3,"transloco"),o(),a(4,"div",109),u(5,ot,7,6,"div",110),u(6,st,7,6,"div",110),u(7,rt,7,6,"div",110),o()()),t&2){let e=m(4);n(2),h(" ",d(3,4,"admin.users.records.requests")," "),n(3),x(e.selectedUser().records.request.image!==void 0?5:-1),n(),x(e.selectedUser().records.request.text!==void 0?6:-1),n(),x(e.selectedUser().records.request.interrogation!==void 0?7:-1)}}function dt(t,c){if(t&1&&(a(0,"div",110)(1,"span",111),r(2),l(3,"transloco"),o(),a(4,"span",31),r(5),l(6,"formatNumber"),o()()),t&2){let e=m(5);n(2),h("",d(3,2,"admin.users.records.image"),":"),n(3),_(d(6,4,e.selectedUser().records.fulfillment.image??0))}}function ct(t,c){if(t&1&&(a(0,"div",110)(1,"span",111),r(2),l(3,"transloco"),o(),a(4,"span",31),r(5),l(6,"formatNumber"),o()()),t&2){let e=m(5);n(2),h("",d(3,2,"admin.users.records.text"),":"),n(3),_(d(6,4,e.selectedUser().records.fulfillment.text??0))}}function pt(t,c){if(t&1&&(a(0,"div",110)(1,"span",111),r(2),l(3,"transloco"),o(),a(4,"span",31),r(5),l(6,"formatNumber"),o()()),t&2){let e=m(5);n(2),h("",d(3,2,"admin.users.records.interrogation"),":"),n(3),_(d(6,4,e.selectedUser().records.fulfillment.interrogation??0))}}function mt(t,c){if(t&1&&(a(0,"div",107)(1,"h4",108),r(2),l(3,"transloco"),o(),a(4,"div",109),u(5,dt,7,6,"div",110),u(6,ct,7,6,"div",110),u(7,pt,7,6,"div",110),o()()),t&2){let e=m(4);n(2),h(" ",d(3,4,"admin.users.records.fulfillments")," "),n(3),x(e.selectedUser().records.fulfillment.image!==void 0?5:-1),n(),x(e.selectedUser().records.fulfillment.text!==void 0?6:-1),n(),x(e.selectedUser().records.fulfillment.interrogation!==void 0?7:-1)}}function _t(t,c){if(t&1&&(a(0,"div",110)(1,"span",111),r(2),l(3,"transloco"),o(),a(4,"span",31),r(5),l(6,"formatNumber"),o()()),t&2){let e=m(5);n(2),h("",d(3,2,"admin.users.records.image"),":"),n(3),_(d(6,4,e.selectedUser().records.style.image??0))}}function ut(t,c){if(t&1&&(a(0,"div",110)(1,"span",111),r(2),l(3,"transloco"),o(),a(4,"span",31),r(5),l(6,"formatNumber"),o()()),t&2){let e=m(5);n(2),h("",d(3,2,"admin.users.records.text"),":"),n(3),_(d(6,4,e.selectedUser().records.style.text??0))}}function xt(t,c){if(t&1&&(a(0,"div",107)(1,"h4",108),r(2),l(3,"transloco"),o(),a(4,"div",109),u(5,_t,7,6,"div",110),u(6,ut,7,6,"div",110),o()()),t&2){let e=m(4);n(2),h(" ",d(3,3,"admin.users.records.styles")," "),n(3),x(e.selectedUser().records.style.image!==void 0?5:-1),n(),x(e.selectedUser().records.style.text!==void 0?6:-1)}}function ht(t,c){if(t&1&&(a(0,"div",72)(1,"div",106),u(2,tt,7,5,"div",107),u(3,at,7,5,"div",107),u(4,lt,8,6,"div",107),u(5,mt,8,6,"div",107),u(6,xt,7,5,"div",107),o()()),t&2){let e=m(3);n(2),x(e.selectedUser().records.usage?2:-1),n(),x(e.selectedUser().records.contribution?3:-1),n(),x(e.selectedUser().records.request?4:-1),n(),x(e.selectedUser().records.fulfillment?5:-1),n(),x(e.selectedUser().records.style?6:-1)}}function Ct(t,c){if(t&1){let e=b();a(0,"div",71)(1,"button",27),g("click",function(){v(e);let s=m(2);return f(s.toggleRecordsSection())}),a(2,"span",31),r(3),l(4,"transloco"),o(),U(),a(5,"svg",33),S(6,"path",34),o()(),u(7,ht,7,5,"div",72),o()}if(t&2){let e=m(2);n(3),_(d(4,4,"admin.users.section.records")),n(2),k("expanded",e.recordsExpanded()),n(2),x(e.recordsExpanded()?7:-1)}}function gt(t,c){if(t&1&&(a(0,"span",115),r(1),o()),t&2){let e=c.$implicit;n(),_(e)}}function vt(t,c){if(t&1&&(a(0,"span",116),r(1),o()),t&2){let e=m(5);n(),h("+",e.selectedUser().active_generations.image.length-10," more")}}function ft(t,c){if(t&1&&(a(0,"div")(1,"h4",113),r(2),l(3,"transloco"),o(),a(4,"div",114),F(5,gt,2,1,"span",115,O),u(7,vt,2,1,"span",116),o()()),t&2){let e=m(4);n(2),z(" ",d(3,3,"admin.users.active_generations.image")," (",e.selectedUser().active_generations.image.length,") "),n(3),P(e.selectedUser().active_generations.image.slice(0,10)),n(2),x(e.selectedUser().active_generations.image.length>10?7:-1)}}function St(t,c){if(t&1&&(a(0,"span",115),r(1),o()),t&2){let e=c.$implicit;n(),_(e)}}function yt(t,c){if(t&1&&(a(0,"span",116),r(1),o()),t&2){let e=m(5);n(),h("+",e.selectedUser().active_generations.text.length-10," more")}}function kt(t,c){if(t&1&&(a(0,"div")(1,"h4",113),r(2),l(3,"transloco"),o(),a(4,"div",114),F(5,St,2,1,"span",115,O),u(7,yt,2,1,"span",116),o()()),t&2){let e=m(4);n(2),z(" ",d(3,3,"admin.users.active_generations.text")," (",e.selectedUser().active_generations.text.length,") "),n(3),P(e.selectedUser().active_generations.text.slice(0,10)),n(2),x(e.selectedUser().active_generations.text.length>10?7:-1)}}function wt(t,c){if(t&1&&(a(0,"span",115),r(1),o()),t&2){let e=c.$implicit;n(),_(e)}}function Ut(t,c){if(t&1&&(a(0,"span",116),r(1),o()),t&2){let e=m(5);n(),h("+",e.selectedUser().active_generations.alchemy.length-10," more")}}function Et(t,c){if(t&1&&(a(0,"div")(1,"h4",113),r(2),l(3,"transloco"),o(),a(4,"div",114),F(5,wt,2,1,"span",115,O),u(7,Ut,2,1,"span",116),o()()),t&2){let e=m(4);n(2),z(" ",d(3,3,"admin.users.active_generations.alchemy")," (",e.selectedUser().active_generations.alchemy.length,") "),n(3),P(e.selectedUser().active_generations.alchemy.slice(0,10)),n(2),x(e.selectedUser().active_generations.alchemy.length>10?7:-1)}}function bt(t,c){if(t&1&&(a(0,"div",72)(1,"div",112),u(2,ft,8,5,"div"),u(3,kt,8,5,"div"),u(4,Et,8,5,"div"),o()()),t&2){let e,i,s,p=m(3);n(2),x(!((e=p.selectedUser().active_generations)==null||e.image==null)&&e.image.length?2:-1),n(),x(!((i=p.selectedUser().active_generations)==null||i.text==null)&&i.text.length?3:-1),n(),x(!((s=p.selectedUser().active_generations)==null||s.alchemy==null)&&s.alchemy.length?4:-1)}}function Vt(t,c){if(t&1){let e=b();a(0,"div",71)(1,"button",27),g("click",function(){v(e);let s=m(2);return f(s.toggleActiveGenerationsSection())}),a(2,"span",31),r(3),l(4,"transloco"),o(),U(),a(5,"svg",33),S(6,"path",34),o()(),u(7,bt,5,3,"div",72),o()}if(t&2){let e=m(2);n(3),_(d(4,4,"admin.users.section.active_generations")),n(2),k("expanded",e.activeGenerationsExpanded()),n(2),x(e.activeGenerationsExpanded()?7:-1)}}function Mt(t,c){if(t&1&&(a(0,"div",68)(1,"div",40)(2,"div")(3,"div",117),r(4),o(),a(5,"div",116),r(6),o()(),a(7,"span",118),r(8),o()()()),t&2){let e=c.$implicit;n(4),h(" ",e.name," "),n(2),h(" ",e.type," "),n(2),h("",e.id.slice(0,8),"...")}}function Tt(t,c){if(t&1&&(a(0,"div",72)(1,"div",37),F(2,Mt,9,3,"div",68,A),o()()),t&2){let e=m(3);n(2),P(e.selectedUser().styles)}}function It(t,c){if(t&1){let e=b();a(0,"div",71)(1,"button",27),g("click",function(){v(e);let s=m(2);return f(s.toggleStylesSection())}),a(2,"span",31),r(3),l(4,"transloco"),o(),U(),a(5,"svg",33),S(6,"path",34),o()(),u(7,Tt,4,0,"div",72),o()}if(t&2){let e=m(2);n(3),z("",d(4,5,"admin.users.section.styles")," (",e.selectedUser().styles.length,")"),n(2),k("expanded",e.stylesExpanded()),n(2),x(e.stylesExpanded()?7:-1)}}function Bt(t,c){t&1&&(a(0,"div",10),U(),a(1,"svg",121),S(2,"circle",47)(3,"path",48),o()())}function Ft(t,c){t&1&&(a(0,"div",120),r(1," No shared key details available "),o())}function Pt(t,c){if(t&1&&(a(0,"div",127),r(1),l(2,"date"),o()),t&2){let e=m().$implicit;n(),h(" Expires: ",j(2,1,e.expiry,"mediumDate")," ")}}function Kt(t,c){t&1&&r(0," Unlimited ")}function Dt(t,c){if(t&1&&(r(0),l(1,"formatNumber")),t&2){let e=m().$implicit;h(" ",d(1,1,e.kudos??0)," ")}}function Ht(t,c){t&1&&r(0," \u221E ")}function zt(t,c){if(t&1&&(r(0),l(1,"formatNumber")),t&2){let e=m().$implicit;h(" ",d(1,1,e.max_image_pixels??0)," ")}}function Wt(t,c){t&1&&r(0," \u221E ")}function Lt(t,c){if(t&1&&r(0),t&2){let e=m().$implicit;h(" ",e.max_image_steps??0," ")}}function Jt(t,c){t&1&&r(0," \u221E ")}function Nt(t,c){if(t&1&&r(0),t&2){let e=m().$implicit;h(" ",e.max_text_tokens??0," ")}}function Rt(t,c){if(t&1&&(a(0,"div",122)(1,"div",123)(2,"div",124)(3,"div",125),r(4),o(),a(5,"div",126),r(6),o()(),u(7,Pt,3,4,"div",127),o(),a(8,"div",128)(9,"div")(10,"span",111),r(11,"Kudos Limit:"),o(),a(12,"span",129),u(13,Kt,1,0)(14,Dt,2,3),o()(),a(15,"div")(16,"span",111),r(17,"Utilized:"),o(),a(18,"span",129),r(19),l(20,"formatNumber"),o()()(),a(21,"div",130)(22,"div",131)(23,"div",132),r(24,"Max Pixels"),o(),a(25,"div",31),u(26,Ht,1,0)(27,zt,2,3),o()(),a(28,"div",131)(29,"div",132),r(30,"Max Steps"),o(),a(31,"div",31),u(32,Wt,1,0)(33,Lt,1,1),o()(),a(34,"div",131)(35,"div",132),r(36,"Max Tokens"),o(),a(37,"div",31),u(38,Jt,1,0)(39,Nt,1,1),o()()()()),t&2){let e=c.$implicit;n(4),h(" ",e.name??"Unnamed Key"," "),n(),w("title",q(e.id)),n(),h(" ",e.id," "),n(),x(e.expiry?7:-1),n(6),x(e.kudos===-1?13:14),n(6),_(d(20,10,e.utilized??0)),n(7),x(e.max_image_pixels===-1?26:27),n(6),x(e.max_image_steps===-1?32:33),n(6),x(e.max_text_tokens===-1?38:39)}}function Ot(t,c){if(t&1&&(a(0,"div",37),F(1,Rt,40,12,"div",122,A),o()),t&2){let e=m(4);n(),P(e.userSharedKeys())}}function jt(t,c){if(t&1&&(a(0,"div",119),u(1,Bt,4,0,"div",10)(2,Ft,2,0,"div",120)(3,Ot,3,0,"div",37),o()),t&2){let e=m(3);n(),x(e.loadingSharedKeys()?1:e.userSharedKeys().length===0&&e.sharedKeysFetched()?2:3)}}function Gt(t,c){if(t&1){let e=b();a(0,"div",71)(1,"button",27),g("click",function(){v(e);let s=m(2);return f(s.toggleSharedKeysSection())}),a(2,"span",31),r(3),l(4,"transloco"),o(),U(),a(5,"svg",33),S(6,"path",34),o()(),u(7,jt,4,1,"div",119),o()}if(t&2){let e=m(2);n(3),z("",d(4,5,"admin.users.section.shared_keys")," (",e.selectedUser().sharedkey_ids.length,")"),n(2),k("expanded",e.sharedKeysExpanded()),n(2),x(e.sharedKeysExpanded()?7:-1)}}function $t(t,c){t&1&&(a(0,"div",10),U(),a(1,"svg",121),S(2,"circle",47)(3,"path",48),o()())}function At(t,c){if(t&1){let e=b();a(0,"app-worker-card",135),g("workerUpdated",function(){v(e);let s=m(5);return f(s.onWorkerUpdated())})("workerDeleted",function(s){v(e);let p=m(5);return f(p.onWorkerDeleted(s))}),o()}if(t&2){let e,i=c.$implicit,s=m(5);w("worker",i)("isModerator",((e=s.auth.currentUser())==null?null:e.moderator)??!1)}}function qt(t,c){if(t&1&&(a(0,"div",133),F(1,At,1,2,"app-worker-card",134,A),o()),t&2){let e=m(4);n(),P(e.userWorkers())}}function Qt(t,c){if(t&1&&(a(0,"div",119),u(1,$t,4,0,"div",10)(2,qt,3,0,"div",133),o()),t&2){let e=m(3);n(),x(e.loadingWorkers()?1:2)}}function Yt(t,c){if(t&1){let e=b();a(0,"div",71)(1,"button",27),g("click",function(){v(e);let s=m(2);return f(s.toggleWorkersSection())}),a(2,"span",31),r(3),l(4,"transloco"),o(),U(),a(5,"svg",33),S(6,"path",34),o()(),u(7,Qt,3,1,"div",119),o()}if(t&2){let e=m(2);n(3),_(d(4,4,"admin.users.section.workers")),n(2),k("expanded",e.workersExpanded()),n(2),x(e.workersExpanded()?7:-1)}}function Xt(t,c){if(t&1){let e=b();a(0,"div",54),u(1,Je,10,6,"div",55),a(2,"div",56),U(),a(3,"svg",57),S(4,"path",58),o(),B(),a(5,"span"),r(6),l(7,"transloco"),o()(),a(8,"div",59)(9,"div",60)(10,"h2",61),r(11),u(12,Ne,3,3,"span",62),u(13,Re,2,0,":svg:svg",63),u(14,Oe,2,0,":svg:svg",64),u(15,je,3,3,"span",65),o(),a(16,"button",66),g("click",function(){v(e);let s=m();return f(s.openRawJsonModal())}),r(17," Raw JSON "),o()(),a(18,"div",67)(19,"div",68)(20,"div",69),r(21),l(22,"transloco"),o(),a(23,"div",18),r(24),l(25,"formatNumber"),o()(),a(26,"div",68)(27,"div",69),r(28),l(29,"transloco"),o(),a(30,"div",18),r(31),o()(),u(32,Ge,6,4,"div",68),a(33,"div",68)(34,"div",69),r(35),l(36,"transloco"),o(),a(37,"div",18),r(38),o(),u(39,$e,2,0,"button",70),o()()(),a(40,"div",71)(41,"button",27),g("click",function(){v(e);let s=m();return f(s.togglePermissionsSection())}),a(42,"span",31),r(43),l(44,"transloco"),o(),U(),a(45,"svg",33),S(46,"path",34),o()(),u(47,Ae,132,140,"div",72),o(),B(),a(48,"div",71)(49,"button",27),g("click",function(){v(e);let s=m();return f(s.toggleLimitsSection())}),a(50,"span",31),r(51),l(52,"transloco"),o(),U(),a(53,"svg",33),S(54,"path",34),o()(),u(55,qe,38,48,"div",72),o(),B(),a(56,"div",71)(57,"button",27),g("click",function(){v(e);let s=m();return f(s.toggleContactSection())}),a(58,"span",31),r(59),l(60,"transloco"),o(),U(),a(61,"svg",33),S(62,"path",34),o()(),u(63,Ye,23,29,"div",73),o(),B(),a(64,"div",71)(65,"button",27),g("click",function(){v(e);let s=m();return f(s.toggleKudosDetailsSection())}),a(66,"span",31),r(67),l(68,"transloco"),o(),U(),a(69,"svg",33),S(70,"path",34),o()(),u(71,Xe,2,1,"div",72),o(),u(72,Ct,8,6,"div",71),u(73,Vt,8,6,"div",71),u(74,It,8,7,"div",71),u(75,Gt,8,7,"div",71),u(76,Yt,8,6,"div",71),o()}if(t&2){let e=m();k("panel-unsaved",e.isDirty()),n(),x(e.selectedUser().deleted?1:-1),n(),k("unsaved-changes-warning-hidden",!e.isDirty()),n(4),_(d(7,44,"admin.users.unsaved_changes")),n(5),h(" ",e.selectedUser().username," "),n(),x(e.selectedUser().deleted?12:-1),n(),x(e.trustedValue()?13:-1),n(),x(e.flaggedValue()?14:-1),n(),x(e.selectedUser().moderator?15:-1),n(6),h(" ",d(22,46,"admin.users.field.kudos")," "),n(3),h(" ",d(25,48,e.selectedUser().kudos)," "),n(4),h(" ",d(29,50,"admin.users.field.worker_count")," "),n(3),h(" ",e.selectedUser().worker_count," "),n(),x(e.selectedUser().evaluating_kudos!==void 0?32:-1),n(),k("border-2",e.selectedUser().suspicious>10&&!e.trustedValue())("border-red-500",e.selectedUser().suspicious>10&&!e.trustedValue()),n(2),h(" ",d(36,52,"admin.users.field.suspicious")," "),n(3),h(" ",e.selectedUser().suspicious," "),n(),x(e.selectedUser().suspicious>0?39:-1),n(4),_(d(44,54,"admin.users.section.permissions")),n(2),k("expanded",e.permissionsExpanded()),n(2),x(e.permissionsExpanded()?47:-1),n(4),_(d(52,56,"admin.users.section.limits")),n(2),k("expanded",e.limitsExpanded()),n(2),x(e.limitsExpanded()?55:-1),n(4),_(d(60,58,"admin.users.section.contact")),n(2),k("expanded",e.contactExpanded()),n(2),x(e.contactExpanded()?63:-1),n(4),_(d(68,60,"admin.users.section.kudos_details")),n(2),k("expanded",e.kudosDetailsExpanded()),n(2),x(e.kudosDetailsExpanded()?71:-1),n(),x(e.selectedUser().records?72:-1),n(),x(e.hasActiveGenerations(e.selectedUser())?73:-1),n(),x(e.selectedUser().styles&&e.selectedUser().styles.length>0?74:-1),n(),x(e.selectedUser().sharedkey_ids&&e.selectedUser().sharedkey_ids.length>0?75:-1),n(),x(e.selectedUser().worker_ids&&e.selectedUser().worker_ids.length>0?76:-1)}}function Zt(t,c){if(t&1){let e=b();a(0,"button",136),g("click",function(){v(e);let s=m();return f(s.saveChanges())}),r(1),l(2,"transloco"),o()}if(t&2){let e=m();w("disabled",e.isSaving()),n(),h(" ",d(2,2,"admin.users.save")," ")}}var X="admin_user_history",ei=30,Bi=(()=>{let c=class c{constructor(){this.title=T(pe),this.translator=T(xe),this.destroyRef=T(ne),this.userService=T(ke),this.workerService=T(Ce),this.platformId=T(ae),this.route=T(me),this.auth=T($),this.searchQuery=C(""),this.loading=C(!1),this.selectedUser=C(null),this.userNotFound=C(!1),this.userWorkers=C([]),this.loadingWorkers=C(!1),this.userSharedKeys=C([]),this.loadingSharedKeys=C(!1),this.sharedKeysFetched=C(!1),this.workersExpanded=C(!1),this.permissionsExpanded=C(!0),this.limitsExpanded=C(!0),this.contactExpanded=C(!1),this.kudosDetailsExpanded=C(!1),this.recordsExpanded=C(!1),this.activeGenerationsExpanded=C(!1),this.stylesExpanded=C(!1),this.sharedKeysExpanded=C(!1),this.rawJsonModalOpen=C(!1),this.trustedValue=C(!1),this.flaggedValue=C(!1),this.workerInvitesValue=C(0),this.moderatorValue=C(!1),this.publicWorkersValue=C(!1),this.customizerValue=C(!1),this.serviceValue=C(!1),this.educationValue=C(!1),this.specialValue=C(!1),this.filteredValue=C(!1),this.vpnValue=C(!1),this.usageMultiplierValue=C(1),this.concurrencyValue=C(0),this.monthlyKudosValue=C(0),this.contactValue=C(""),this.adminCommentValue=C(""),this.isRegeneratingPasskey=C(!1),this.isDirty=C(!1),this.isSaving=C(!1),this.userJson=E(()=>J(this.selectedUser())),this.workersJson=E(()=>J(this.userWorkers())),this.sharedKeysJson=E(()=>J(this.userSharedKeys())),this.stylesJson=E(()=>J(this.selectedUser()?.styles??[])),this.userJsonHighlighted=E(()=>N(this.userJson())),this.workersJsonHighlighted=E(()=>N(this.workersJson())),this.sharedKeysJsonHighlighted=E(()=>N(this.sharedKeysJson())),this.stylesJsonHighlighted=E(()=>N(this.stylesJson())),this.trustedChanged=E(()=>{let i=this.selectedUser();return i?this.trustedValue()!==i.trusted:!1}),this.flaggedChanged=E(()=>{let i=this.selectedUser();return i?this.flaggedValue()!==i.flagged:!1}),this.moderatorChanged=E(()=>{let i=this.selectedUser();return i?this.moderatorValue()!==i.moderator:!1}),this.publicWorkersChanged=E(()=>{let i=this.selectedUser();return i?this.publicWorkersValue()!==(i.public_workers??!1):!1}),this.customizerChanged=E(()=>{let i=this.selectedUser();return i?this.customizerValue()!==(i.customizer??!1):!1}),this.serviceChanged=E(()=>{let i=this.selectedUser();return i?this.serviceValue()!==(i.service??!1):!1}),this.educationChanged=E(()=>{let i=this.selectedUser();return i?this.educationValue()!==(i.education??!1):!1}),this.specialChanged=E(()=>{let i=this.selectedUser();return i?this.specialValue()!==(i.special??!1):!1}),this.filteredChanged=E(()=>{let i=this.selectedUser();return i?this.filteredValue()!==(i.filtered??!1):!1}),this.vpnChanged=E(()=>{let i=this.selectedUser();return i?this.vpnValue()!==(i.vpn??!1):!1}),this.workerInvitesChanged=E(()=>{let i=this.selectedUser();return i?this.workerInvitesValue()!==i.worker_invited:!1}),this.usageMultiplierChanged=E(()=>{let i=this.selectedUser();return i?this.usageMultiplierValue()!==(i.usage_multiplier??1):!1}),this.concurrencyChanged=E(()=>{let i=this.selectedUser();return i?this.concurrencyValue()!==(i.concurrency??0):!1}),this.monthlyKudosChanged=E(()=>{let i=this.selectedUser();return i?this.monthlyKudosValue()!==(i.monthly_kudos?.amount??0):!1}),this.contactChanged=E(()=>{let i=this.selectedUser();return i?this.contactValue().trim()!==(i.contact??""):!1}),this.adminCommentChanged=E(()=>{let i=this.selectedUser();return i?this.adminCommentValue().trim()!==(i.admin_comment??""):!1}),this.dialogOpen=C(!1),this.dialogType=C("resetSuspicion"),this.isUpdating=C(!1),this.toasts=C([]),this.userHistory=C([]),this.historyExpanded=C(!1),this.fieldSignals={trusted:this.trustedValue,flagged:this.flaggedValue,moderator:this.moderatorValue,publicWorkers:this.publicWorkersValue,customizer:this.customizerValue,service:this.serviceValue,education:this.educationValue,special:this.specialValue,filtered:this.filteredValue,vpn:this.vpnValue,workerInvites:this.workerInvitesValue,usageMultiplier:this.usageMultiplierValue,concurrency:this.concurrencyValue,monthlyKudos:this.monthlyKudosValue,contact:this.contactValue,adminComment:this.adminCommentValue}}ngOnInit(){ee([this.translator.get("admin.users.title"),this.translator.get("app_title")]).pipe(I(this.destroyRef)).subscribe(([s,p])=>{this.title.setTitle(`${s} | ${p}`)}),this.loadUserHistory();let i=this.route.snapshot.paramMap.get("userId");if(i)this.searchQuery.set(i),this.searchUser();else{let s=this.userHistory();if(s.length>0){let p=s[0];this.searchQuery.set(p.id.toString()),this.searchUser()}}}onSearchChange(i){let s=i.target;this.searchQuery.set(s.value)}searchUser(){let i=this.searchQuery().trim();if(!i)return;this.loading.set(!0),this.clearToasts(),this.userNotFound.set(!1),this.selectedUser.set(null),this.userWorkers.set([]),this.workersExpanded.set(!1),this.userSharedKeys.set([]),this.sharedKeysFetched.set(!1),this.sharedKeysExpanded.set(!1);let s=null,p=parseInt(i,10);if(!isNaN(p))s=p;else{let y=i.match(/#(\d+)$/);y&&(s=parseInt(y[1],10))}s!==null?this.userService.getUser(s).pipe(I(this.destroyRef),D(()=>this.loading.set(!1))).subscribe({next:y=>{y?(this.setSelectedUser(y),this.addToUserHistory(y)):this.userNotFound.set(!0)},error:()=>{this.userNotFound.set(!0),this.showToast("error","Failed to load user data.")}}):(this.loading.set(!1),this.userNotFound.set(!0))}setSelectedUser(i){this.selectedUser.set(i),this.trustedValue.set(i.trusted),this.flaggedValue.set(i.flagged),this.workerInvitesValue.set(i.worker_invited),this.moderatorValue.set(i.moderator??!1),this.publicWorkersValue.set(i.public_workers??!1),this.customizerValue.set(i.customizer??!1),this.serviceValue.set(i.service??!1),this.educationValue.set(i.education??!1),this.specialValue.set(i.special??!1),this.filteredValue.set(i.filtered??!1),this.vpnValue.set(i.vpn??!1),this.usageMultiplierValue.set(i.usage_multiplier??1),this.concurrencyValue.set(i.concurrency??0),this.monthlyKudosValue.set(i.monthly_kudos?.amount??0),this.contactValue.set(i.contact??""),this.adminCommentValue.set(i.admin_comment??""),this.isDirty.set(!1)}onFieldChange(i,s){let p=s.target,y=this.fieldSignals[i];if(p instanceof HTMLInputElement&&p.type==="checkbox")y.set(p.checked);else if(p instanceof HTMLInputElement&&p.type==="number"){let M=p.value;if(i==="usageMultiplier"){let H=parseFloat(M);y.set(Number.isFinite(H)?H:1)}else y.set(parseInt(M,10)||0)}else y.set(p.value);this.checkDirty()}checkDirty(){let i=this.selectedUser();i&&this.isDirty.set(this.trustedValue()!==i.trusted||this.flaggedValue()!==i.flagged||this.moderatorValue()!==i.moderator||this.publicWorkersValue()!==(i.public_workers??!1)||this.customizerValue()!==(i.customizer??!1)||this.serviceValue()!==(i.service??!1)||this.educationValue()!==(i.education??!1)||this.specialValue()!==(i.special??!1)||this.filteredValue()!==(i.filtered??!1)||this.vpnValue()!==(i.vpn??!1)||this.workerInvitesValue()!==i.worker_invited||this.usageMultiplierValue()!==(i.usage_multiplier??1)||this.concurrencyValue()!==(i.concurrency??0)||this.monthlyKudosValue()!==(i.monthly_kudos?.amount??0)||this.contactValue().trim()!==(i.contact??"")||this.adminCommentValue().trim()!==(i.admin_comment??""))}saveChanges(){let i=this.selectedUser();if(!i||!this.isDirty())return;this.isSaving.set(!0);let s={};this.trustedValue()!==i.trusted&&(s.trusted=this.trustedValue()),this.flaggedValue()!==i.flagged&&(s.flagged=this.flaggedValue()),this.workerInvitesValue()!==i.worker_invited&&(s.worker_invite=this.workerInvitesValue()),this.moderatorValue()!==i.moderator&&(s.moderator=this.moderatorValue()),this.publicWorkersValue()!==(i.public_workers??!1)&&(s.public_workers=this.publicWorkersValue()),this.customizerValue()!==(i.customizer??!1)&&(s.customizer=this.customizerValue()),this.serviceValue()!==(i.service??!1)&&(s.service=this.serviceValue()),this.educationValue()!==(i.education??!1)&&(s.education=this.educationValue()),this.specialValue()!==(i.special??!1)&&(s.special=this.specialValue()),this.filteredValue()!==(i.filtered??!1)&&(s.filtered=this.filteredValue()),this.vpnValue()!==(i.vpn??!1)&&(s.vpn=this.vpnValue()),this.usageMultiplierValue()!==(i.usage_multiplier??1)&&(s.usage_multiplier=this.usageMultiplierValue()),this.concurrencyValue()!==(i.concurrency??0)&&(s.concurrency=this.concurrencyValue()),this.monthlyKudosValue()!==(i.monthly_kudos?.amount??0)&&(s.monthly_kudos=this.monthlyKudosValue()),this.contactValue().trim()!==(i.contact??"")&&(s.contact=this.contactValue().trim()||void 0),this.adminCommentValue().trim()!==(i.admin_comment??"")&&(s.admin_comment=this.adminCommentValue().trim()||void 0),this.userService.updateUser(i.id,s).pipe(I(this.destroyRef),D(()=>this.isSaving.set(!1))).subscribe({next:p=>{p&&(this.userService.getUser(i.id).pipe(I(this.destroyRef)).subscribe(y=>{y&&this.setSelectedUser(y)}),this.showToast("success","Changes saved successfully."))},error:()=>{this.showToast("error","Failed to save changes.")}})}toggleWorkersSection(){let i=!this.workersExpanded();this.workersExpanded.set(i),i&&this.userWorkers().length===0&&this.loadUserWorkers()}togglePermissionsSection(){this.permissionsExpanded.set(!this.permissionsExpanded())}toggleLimitsSection(){this.limitsExpanded.set(!this.limitsExpanded())}toggleContactSection(){this.contactExpanded.set(!this.contactExpanded())}toggleKudosDetailsSection(){this.kudosDetailsExpanded.set(!this.kudosDetailsExpanded())}toggleRecordsSection(){this.recordsExpanded.set(!this.recordsExpanded())}toggleActiveGenerationsSection(){this.activeGenerationsExpanded.set(!this.activeGenerationsExpanded())}toggleStylesSection(){this.stylesExpanded.set(!this.stylesExpanded())}toggleSharedKeysSection(){let i=!this.sharedKeysExpanded();this.sharedKeysExpanded.set(i),i&&!this.sharedKeysFetched()&&this.loadUserSharedKeys()}openRawJsonModal(){let i=this.selectedUser();i&&(i.worker_ids?.length&&this.userWorkers().length===0&&!this.loadingWorkers()&&this.loadUserWorkers(),i.sharedkey_ids?.length&&!this.sharedKeysFetched()&&!this.loadingSharedKeys()&&this.loadUserSharedKeys(),this.rawJsonModalOpen.set(!0))}closeRawJsonModal(){this.rawJsonModalOpen.set(!1)}loadUserSharedKeys(){let i=this.selectedUser();!i||!i.sharedkey_ids||i.sharedkey_ids.length===0||(this.loadingSharedKeys.set(!0),this.userService.getSharedKeysByIds(i.sharedkey_ids).pipe(I(this.destroyRef),D(()=>this.loadingSharedKeys.set(!1))).subscribe({next:s=>{this.userSharedKeys.set(s),this.sharedKeysFetched.set(!0)},error:()=>{this.sharedKeysFetched.set(!0),this.showToast("error","Failed to load shared keys.")}}))}hasActiveGenerations(i){if(!i||!i.active_generations)return!1;let s=i.active_generations;return(s.image?.length??0)>0||(s.text?.length??0)>0||(s.alchemy?.length??0)>0}loadUserWorkers(){let i=this.selectedUser();!i||!i.worker_ids||i.worker_ids.length===0||(this.loadingWorkers.set(!0),this.workerService.getWorkersByIds(i.worker_ids).pipe(I(this.destroyRef),D(()=>this.loadingWorkers.set(!1))).subscribe({next:s=>{this.userWorkers.set(s)},error:()=>{this.showToast("error","Failed to load workers.")}}))}openResetSuspicionDialog(){this.dialogType.set("resetSuspicion"),this.dialogOpen.set(!0)}openUndeleteUserDialog(){this.dialogType.set("undeleteUser"),this.dialogOpen.set(!0)}closeDialog(){this.dialogOpen.set(!1)}confirmDialog(){let i=this.selectedUser();if(!i)return;this.isUpdating.set(!0);let s=this.dialogType(),p;if(s==="resetSuspicion")p=this.userService.resetSuspicion(i.id);else if(s==="undeleteUser")p=this.userService.updateUser(i.id,{undelete:!0});else{this.isUpdating.set(!1);return}p.pipe(I(this.destroyRef),D(()=>{this.isUpdating.set(!1),this.closeDialog()})).subscribe({next:y=>{y&&(this.userService.getUser(i.id).pipe(I(this.destroyRef)).subscribe(M=>{M&&this.setSelectedUser(M)}),s==="resetSuspicion"?this.showToast("success","Suspicion reset successfully."):s==="undeleteUser"&&this.showToast("success","User restored successfully."))},error:()=>{s==="resetSuspicion"?this.showToast("error","Failed to reset suspicion."):s==="undeleteUser"&&this.showToast("error","Failed to restore user.")}})}onWorkerUpdated(){this.loadUserWorkers()}onWorkerDeleted(i){this.userWorkers.update(s=>s.filter(p=>p.id!==i)),this.showToast("success","Worker deleted successfully! Note: It may take up to a minute for the API to reflect this change.")}regenerateProxyPasskey(){let i=this.selectedUser();i&&(this.isRegeneratingPasskey.set(!0),this.userService.updateUser(i.id,{generate_proxy_passkey:!0}).pipe(I(this.destroyRef),D(()=>this.isRegeneratingPasskey.set(!1))).subscribe({next:s=>{s&&this.userService.getUser(i.id).pipe(I(this.destroyRef)).subscribe(p=>{p&&this.setSelectedUser(p)})},error:()=>{this.showToast("error","Failed to regenerate passkey.")}}))}showToast(i,s,p=i==="success"){let y=`toast-${Date.now()}-${Math.random().toString(36).slice(2,7)}`;this.toasts.update(M=>[...M,{id:y,type:i,message:s}]),p&&setTimeout(()=>this.dismissToast(y),3e3)}dismissToast(i){this.toasts.update(s=>s.filter(p=>p.id!==i))}clearToasts(){this.toasts.set([])}loadUserHistory(){if(G(this.platformId))try{let i=localStorage.getItem(X);if(i){let s=JSON.parse(i);this.userHistory.set(s)}}catch(i){console.error("Failed to load user history:",i),this.userHistory.set([])}}addToUserHistory(i){if(!G(this.platformId))return;let p=this.userHistory().filter(H=>H.id!==i.id),M=[{id:i.id,username:i.username,timestamp:Date.now()},...p].slice(0,ei);this.userHistory.set(M);try{localStorage.setItem(X,JSON.stringify(M))}catch(H){console.error("Failed to save user history:",H)}}toggleHistorySection(){this.historyExpanded.set(!this.historyExpanded())}selectUserFromHistory(i){this.searchQuery.set(i.id.toString()),this.searchUser()}clearUserHistory(){if(this.userHistory.set([]),!!G(this.platformId))try{localStorage.removeItem(X)}catch(i){console.error("Failed to clear user history:",i)}}};c.\u0275fac=function(s){return new(s||c)},c.\u0275cmp=R({type:c,selectors:[["app-user-management"]],decls:28,vars:39,consts:[[3,"dismiss","toasts"],[3,"confirm","cancel","open","title","confirmLabel","cancelLabel","loading","variant"],[1,"text-gray-300"],[1,"admin-container"],[1,"admin-heading-page"],[1,"panel","mb-6"],[1,"mb-6"],[1,"flex","gap-3"],["type","text",1,"form-input","flex-1",3,"input","keydown.enter","value","placeholder"],[1,"btn-primary",3,"click","disabled"],[1,"admin-loading"],[1,"admin-empty"],[1,"panel",3,"panel-unsaved"],[1,"btn-save-fixed",3,"disabled"],[1,"modal"],[1,"modal-backdrop",3,"click"],["role","dialog","aria-modal","true","aria-label","Raw JSON",1,"dialog-panel","json-dialog"],[1,"flex","items-center","justify-between","mb-4"],[1,"admin-heading-card"],[1,"btn-muted","text-sm",3,"click"],[1,"json-grid"],[1,"json-section"],[1,"json-section-title","admin-text-light"],["aria-label","User JSON",1,"json-block",3,"innerHTML"],["aria-label","Workers JSON",1,"json-block",3,"innerHTML"],["aria-label","Shared Keys JSON",1,"json-block",3,"innerHTML"],["aria-label","Styles JSON",1,"json-block",3,"innerHTML"],[1,"expandable-header",3,"click"],[1,"flex","items-center","gap-2"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-5","h-5","admin-text-muted"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"],[1,"admin-text-light"],["title","Clear history",1,"btn-muted","text-sm","px-2","py-1"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"expandable-icon"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M19 9l-7 7-7-7"],[1,"p-4","pt-0"],["title","Clear history",1,"btn-muted","text-sm","px-2","py-1",3,"click"],[1,"admin-grid-history"],[1,"list-item-button"],[1,"list-item-button",3,"click"],[1,"flex","items-center","justify-between"],[1,"flex-1","min-w-0"],[1,"admin-text-white","truncate"],[1,"admin-text-muted","text-sm"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-4","h-4","admin-icon-muted","shrink-0","ml-2"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M9 5l7 7-7 7"],["fill","none","viewBox","0 0 24 24",1,"admin-spinner"],["cx","12","cy","12","r","10","stroke","currentColor","stroke-width","4",1,"admin-spinner-track"],["fill","currentColor","d","M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z",1,"admin-spinner-head"],[1,"admin-loading-text"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"admin-empty-icon"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"],[1,"admin-empty-text"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"],[1,"panel"],[1,"bg-red-900/50","border-b","border-red-700","px-6","py-3","flex","items-center","justify-between","gap-3"],[1,"unsaved-changes-warning"],["fill","currentColor","viewBox","0 0 20 20",1,"w-5","h-5"],["fill-rule","evenodd","d","M8.485 2.495c.673-1.167 2.357-1.167 3.03 0l6.28 10.875c.673 1.167-.17 2.625-1.516 2.625H3.72c-1.347 0-2.189-1.458-1.515-2.625L8.485 2.495zM10 5a.75.75 0 01.75.75v3.5a.75.75 0 01-1.5 0v-3.5A.75.75 0 0110 5zm0 9a1 1 0 100-2 1 1 0 000 2z","clip-rule","evenodd"],[1,"p-6","pb-3"],[1,"flex","items-center","justify-between","mb-6"],[1,"admin-heading-section","flex","items-center","gap-2"],[1,"text-xs","font-medium","px-2","py-0.5","rounded","bg-red-600","text-white"],["fill","currentColor","viewBox","0 0 20 20","aria-label","Trusted user",1,"w-5","h-5","text-green-400"],["fill","currentColor","viewBox","0 0 20 20","aria-label","Flagged user",1,"w-5","h-5","text-red-400"],[1,"admin-badge-moderator"],["type","button",1,"btn-muted","text-sm",3,"click"],[1,"admin-grid-stats-4","mb-6"],[1,"admin-bg-dark","rounded-lg","p-3"],[1,"text-xs","admin-text-muted","mb-1"],[1,"btn-danger","text-xs","mt-2","px-2","py-1"],[1,"admin-border-t"],[1,"p-6","pt-4"],[1,"p-6","pt-4","space-y-4"],[1,"flex","items-center","gap-3"],["fill","currentColor","viewBox","0 0 20 20",1,"w-5","h-5","text-red-400"],[1,"text-red-300"],[1,"btn-warning","text-sm","px-3","py-1.5",3,"click"],["fill-rule","evenodd","d","M10 18a8 8 0 100-16 8 8 0 000 16zm3.857-9.809a.75.75 0 00-1.214-.882l-3.483 4.79-1.88-1.88a.75.75 0 10-1.06 1.061l2.5 2.5a.75.75 0 001.137-.089l4-5.5z","clip-rule","evenodd"],["fill-rule","evenodd","d","M10 18a8 8 0 100-16 8 8 0 000 16zM8.28 7.22a.75.75 0 00-1.06 1.06L8.94 10l-1.72 1.72a.75.75 0 101.06 1.06L10 11.06l1.72 1.72a.75.75 0 101.06-1.06L11.06 10l1.72-1.72a.75.75 0 00-1.06-1.06L10 8.94 8.28 7.22z","clip-rule","evenodd"],[1,"btn-danger","text-xs","mt-2","px-2","py-1",3,"click"],[1,"admin-grid-permissions"],[1,"field-row-compact"],[1,"field-label"],[1,"field-label-text"],[1,"field-label-desc"],[1,"toggle-switch"],["type","checkbox",3,"change","checked"],[1,"toggle-switch-track"],[1,"toggle-switch-thumb"],[1,"admin-grid-limits","gap-4"],[1,"field-label-text","block","mb-1"],[1,"field-label-desc","mb-2"],["type","number","min","0",1,"form-input","w-full",3,"input","value"],["type","number","step","0.1","min","0.1",1,"form-input","w-full",3,"input","value"],[1,"field-row-stacked"],[1,"field-label","max-w-sm"],["type","text","placeholder","email@example.com",1,"form-input","flex-1",3,"input","value"],[1,"field-label","pt-2","max-w-sm"],[1,"form-input","flex-1","min-h-20",3,"input","value","placeholder"],[1,"flex","items-center","justify-between","py-2","admin-border-t","gap-3","pt-4"],[1,"flex","flex-col"],[1,"text-xs","admin-icon-muted"],[1,"admin-text-white","font-mono","text-sm","break-all"],[1,"btn-primary","whitespace-nowrap",3,"click","disabled"],["variant","admin",3,"kudosDetails"],[1,"grid","grid-cols-1","md:grid-cols-2","gap-6"],[1,"admin-bg-dark","rounded-lg","p-4"],[1,"text-sm","font-medium","admin-text-light","mb-3"],[1,"space-y-2","text-sm"],[1,"flex","justify-between"],[1,"admin-text-muted"],[1,"space-y-4"],[1,"text-sm","font-medium","admin-text-light","mb-2"],[1,"flex","flex-wrap","gap-2"],[1,"text-xs","font-mono","admin-bg-dark","px-2","py-1","rounded"],[1,"text-xs","admin-text-muted"],[1,"admin-text-light","text-sm"],[1,"text-xs","font-mono","admin-text-muted"],[1,"p-4"],[1,"admin-text-muted","text-center","py-4"],["fill","none","viewBox","0 0 24 24",1,"admin-spinner","w-6","h-6"],[1,"admin-bg-dark","rounded-lg","p-4","space-y-3"],[1,"flex","items-start","justify-between","gap-2"],[1,"min-w-0","flex-1"],[1,"admin-text-white","font-medium","truncate"],[1,"text-xs","font-mono","admin-text-muted","truncate",3,"title"],[1,"text-xs","admin-text-muted","whitespace-nowrap"],[1,"grid","grid-cols-2","gap-2","text-sm"],[1,"admin-text-light","ml-1"],[1,"grid","grid-cols-3","gap-2","text-xs"],[1,"admin-bg-darker","rounded","p-2"],[1,"admin-text-muted","mb-1"],[1,"admin-grid-workers"],[3,"worker","isModerator"],[3,"workerUpdated","workerDeleted","worker","isModerator"],[1,"btn-save-fixed",3,"click","disabled"]],template:function(s,p){if(s&1&&(a(0,"app-admin-toast-bar",0),g("dismiss",function(M){return p.dismissToast(M)}),o(),a(1,"app-admin-dialog",1),l(2,"transloco"),l(3,"transloco"),l(4,"transloco"),l(5,"transloco"),l(6,"transloco"),g("confirm",function(){return p.confirmDialog()})("cancel",function(){return p.closeDialog()}),u(7,Ie,3,3,"p",2),o(),oe(8,Fe,1,1),se(9,8),a(11,"div",3)(12,"h1",4),r(13),l(14,"transloco"),o(),u(15,He,12,5,"div",5),a(16,"div",6)(17,"div",7)(18,"input",8),l(19,"transloco"),g("input",function(M){return p.onSearchChange(M)})("keydown.enter",function(){return p.searchUser()}),o(),a(20,"button",9),g("click",function(){return p.searchUser()}),r(21),l(22,"transloco"),o()()(),u(23,ze,7,3,"div",10)(24,We,6,3,"div",11)(25,Le,6,3,"div",11)(26,Xt,77,62,"div",12),o(),u(27,Zt,3,4,"button",13)),s&2){let y;w("toasts",p.toasts()),n(),w("open",p.dialogOpen())("title",p.dialogType()==="resetSuspicion"?j(2,17,"admin.users.dialog.reset_suspicion_title",Q(35,Ue,(y=p.selectedUser())==null?null:y.username)):j(3,20,"admin.users.dialog.undelete_title",Q(37,Ue,(y=p.selectedUser())==null?null:y.username)))("confirmLabel",p.dialogType()==="resetSuspicion"?d(4,23,"admin.users.dialog.confirm"):d(5,25,"admin.users.dialog.undelete_confirm"))("cancelLabel",d(6,27,"admin.users.dialog.cancel"))("loading",p.isUpdating())("variant",p.dialogType()==="resetSuspicion"?"danger":"default"),n(6),x(p.dialogType()==="undeleteUser"?7:-1),n(2),re(p.rawJsonModalOpen()),n(4),_(d(14,29,"admin.users.title")),n(2),x(p.userHistory().length>0?15:-1),n(3),w("value",p.searchQuery())("placeholder",d(19,31,"admin.users.search_placeholder")),n(2),w("disabled",p.loading()||!p.searchQuery()),n(),h(" ",d(22,33,"admin.users.search_button")," "),n(2),x(p.loading()?23:p.userNotFound()?24:p.selectedUser()?26:25),n(4),x(p.isDirty()?27:-1)}},dependencies:[_e,ue,he,ge,ve,de,Se,we,fe],styles:[".json-dialog[_ngcontent-%COMP%]{max-width:none;width:calc(100vw - 2rem);height:calc(100vh - 2rem);padding:1rem;display:flex;flex-direction:column}.json-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(260px,1fr));gap:12px;flex:1;overflow:auto;align-items:stretch}.json-section[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:6px;min-height:0;height:100%}.json-section-title[_ngcontent-%COMP%]{font-size:.95rem;font-weight:600;color:var(--color-text-primary)}.dark[_nghost-%COMP%]   .json-section-title[_ngcontent-%COMP%], .dark   [_nghost-%COMP%]   .json-section-title[_ngcontent-%COMP%]{color:#fff}.json-block[_ngcontent-%COMP%]{font-family:ui-monospace,SFMono-Regular,Consolas,Liberation Mono,Menlo,monospace;font-size:12px;line-height:1.4;white-space:pre-wrap;word-break:break-word;background:var(--color-bg-secondary);color:var(--color-text-primary);padding:12px;border-radius:8px;border:1px solid var(--color-border-primary);overflow:auto;flex:1;min-height:0}.dark[_nghost-%COMP%]   .json-block[_ngcontent-%COMP%], .dark   [_nghost-%COMP%]   .json-block[_ngcontent-%COMP%]{background:#0f172a;color:#e2e8f0;border-color:#ffffff14}"],changeDetection:0});let t=c;return t})();export{Bi as UserManagementComponent};
