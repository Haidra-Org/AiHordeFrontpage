/* =================================================================
   DETAILS PAGE TABS
   
   Tab navigation for the /details pages (Workers, Models, Usage Stats)
   Uses Tailwind CSS v4 @apply directive.
   ================================================================= */

@layer components {
  /* =================================================================
     TAB NAVIGATION
     ================================================================= */

  .details-tabs {
    @apply flex flex-wrap gap-2 mb-6 pb-2;
    border-bottom: 1px solid var(--color-border-secondary);
  }

  .dark .details-tabs {
    @apply border-gray-700;
  }

  .details-tab {
    @apply py-3 px-5 text-[0.9375rem] font-medium no-underline transition-all duration-200;
    @apply border rounded-t-lg cursor-pointer bg-transparent;
    @apply dark:border-gray-600 border-gray-300;
    color: var(--color-text-secondary);
    font-family: inherit;
    border-bottom: none;
    position: relative;
  }

  .details-tab:hover {
    color: var(--color-brand-purple);
    background-color: var(--color-bg-secondary);
  }

  .dark .details-tab {
    @apply text-gray-400;
  }

  .dark .details-tab:hover {
    @apply text-purple-300 bg-gray-700;
  }

  .details-tab-active {
    color: var(--color-brand-purple);
    background-color: var(--color-bg-primary);
    border-color: var(--color-border-secondary);
  }

  .details-tab-active::after {
    @apply absolute bottom-[-1px] left-0 right-0 h-0.5;
    content: "";
    background-color: var(--color-brand-purple);
  }

  .dark .details-tab-active {
    @apply text-purple-300 bg-gray-800 border-gray-700;
  }

  .details-content {
    @apply mt-4;
  }

  /* =================================================================
     SUMMARY STATS
     ================================================================= */

  .details-summary {
    @apply flex flex-wrap gap-4 p-4 rounded-lg;
    background-color: var(--color-bg-secondary);
    border: 1px solid var(--color-border-primary);
  }

  .dark .details-summary {
    @apply bg-gray-900 border-gray-700;
  }

  .summary-stat {
    @apply flex flex-col gap-1 flex-1 min-w-[120px] text-center py-2 px-4;
  }

  .summary-label {
    @apply text-xs font-semibold uppercase tracking-wide;
    color: var(--color-text-muted);
  }

  .dark .summary-label {
    @apply text-gray-500;
  }

  .summary-value {
    @apply flex items-baseline justify-center gap-1.5 text-2xl font-bold;
    color: var(--color-text-primary);
  }

  .dark .summary-value {
    @apply text-gray-100;
  }

  /* Period badge in summary */
  .summary-period-badge {
    @apply text-[0.6875rem] font-semibold uppercase tracking-tight py-0.5 px-1.5 rounded whitespace-nowrap;
    color: var(--color-brand-purple);
    background-color: color-mix(in srgb, var(--color-brand-purple) 12%, transparent);
  }

  .dark .summary-period-badge {
    @apply text-purple-300;
    background-color: color-mix(in srgb, var(--color-brand-purple) 25%, transparent);
  }

  /* =================================================================
     FILTERS
     ================================================================= */

  .details-filters {
    @apply flex flex-col gap-4;
    @apply md:flex-row md:items-center md:justify-between md:flex-wrap;
  }

  .filter-search {
    @apply relative flex-1 max-w-96;
  }

  .filter-search-icon {
    @apply absolute left-3 top-1/2 -translate-y-1/2 pointer-events-none;
    color: var(--color-text-muted);
  }

  .dark .filter-search-icon {
    @apply text-gray-500;
  }

  .filter-input {
    @apply w-full py-2.5 px-3 pl-9 text-sm rounded-lg transition-all duration-200;
    color: var(--color-text-primary);
    background-color: var(--color-bg-secondary);
    border: 1px solid var(--color-border-primary);
  }

  .filter-input:focus {
    @apply outline-none;
    border-color: var(--color-brand-blue);
    box-shadow: 0 0 0 3px color-mix(in srgb, var(--color-brand-blue) 20%, transparent);
  }

  .filter-input::placeholder {
    color: var(--color-text-muted);
  }

  .dark .filter-input {
    @apply text-gray-100 bg-gray-800 border-gray-700;
  }

  .dark .filter-input:focus {
    @apply border-blue-400;
    box-shadow: 0 0 0 3px color-mix(in srgb, rgb(96 165 250) 20%, transparent);
  }

  .dark .filter-input::placeholder {
    @apply text-gray-500;
  }

  /* =================================================================
     FILTER AUTOCOMPLETE - Dropdown suggestions for filter search
     ================================================================= */

  /* Container for filter search with autocomplete */
  .filter-search-autocomplete {
    @apply relative flex-1 max-w-96;
  }

  /* Autocomplete dropdown panel */
  .filter-autocomplete-dropdown {
    @apply absolute left-0 right-0 mt-1 max-h-64 overflow-y-auto rounded-lg shadow-lg;
    /* Use inset: auto to avoid viewport clipping issues */
    top: 100%;
    z-index: 50;
    background-color: var(--color-bg-primary);
    border: 1px solid var(--color-border-primary);
  }

  .dark .filter-autocomplete-dropdown {
    @apply bg-gray-800 border-gray-600;
  }

  /* Individual autocomplete suggestion item */
  .filter-autocomplete-item {
    @apply flex items-center justify-between gap-2 w-full py-2.5 px-3 text-left text-sm transition-colors duration-150;
    color: var(--color-text-primary);
    background: transparent;
    border: none;
    cursor: pointer;
  }

  .filter-autocomplete-item:hover,
  .filter-autocomplete-item:focus {
    background-color: var(--color-bg-secondary);
    outline: none;
  }

  .filter-autocomplete-item.filter-autocomplete-item-active {
    background-color: var(--color-bg-secondary);
  }

  .dark .filter-autocomplete-item {
    @apply text-gray-200;
  }

  .dark .filter-autocomplete-item:hover,
  .dark .filter-autocomplete-item:focus,
  .dark .filter-autocomplete-item.filter-autocomplete-item-active {
    @apply bg-gray-700;
  }

  /* Model name in autocomplete */
  .filter-autocomplete-name {
    @apply font-medium truncate flex-1;
  }

  /* Metadata (worker count, type badge) in autocomplete */
  .filter-autocomplete-meta {
    @apply flex items-center gap-2 shrink-0 text-xs;
    color: var(--color-text-secondary);
  }

  .dark .filter-autocomplete-meta {
    @apply text-gray-400;
  }

  /* Type badge (Image/Text) in autocomplete */
  .filter-autocomplete-badge {
    @apply py-0.5 px-1.5 rounded text-[0.625rem] font-semibold uppercase tracking-tight;
    background-color: color-mix(in srgb, var(--color-brand-purple) 15%, transparent);
    color: var(--color-brand-purple);
  }

  .dark .filter-autocomplete-badge {
    @apply text-purple-300;
    background-color: color-mix(in srgb, var(--color-brand-purple) 30%, transparent);
  }

  /* No results message */
  .filter-autocomplete-empty {
    @apply py-3 px-3 text-center text-sm;
    color: var(--color-text-secondary);
  }

  .dark .filter-autocomplete-empty {
    @apply text-gray-400;
  }

  /* Loading state in autocomplete */
  .filter-autocomplete-loading {
    @apply py-3 text-center text-sm;
    color: var(--color-text-secondary);
  }

  .dark .filter-autocomplete-loading {
    @apply text-gray-400;
  }

  .filter-sort {
    @apply flex items-center gap-2 flex-wrap;
  }

  .sort-button {
    @apply inline-flex items-center gap-1 py-2 px-3 text-[0.8125rem] font-medium rounded-md cursor-pointer transition-all duration-200;
    color: var(--color-text-secondary);
    background-color: transparent;
    border: 1px solid var(--color-border-primary);
  }

  .sort-button:hover {
    background-color: var(--color-bg-secondary);
    color: var(--color-text-primary);
  }

  .dark .sort-button {
    @apply text-gray-400 border-gray-700;
  }

  .dark .sort-button:hover {
    @apply bg-gray-700 text-gray-100;
  }

  .sort-button.sort-active {
    border-color: var(--color-brand-purple);
    color: var(--color-brand-purple);
    background-color: color-mix(in srgb, var(--color-brand-purple) 15%, var(--color-bg-primary));
  }

  .dark .sort-button.sort-active {
    @apply text-purple-300;
    border-color: var(--color-brand-purple);
    background-color: color-mix(in srgb, var(--color-brand-purple) 30%, transparent);
  }

  .sort-indicator {
    @apply text-xs font-semibold;
  }

  /* =================================================================
     MODELS TABLE
     ================================================================= */

  .models-table {
    @apply flex flex-col gap-2;
  }

  /* Table header - visible on desktop only */
  .models-table-header {
    @apply hidden p-3 rounded-lg;
    background-color: var(--color-bg-secondary);
    border: 1px solid var(--color-border-primary);
  }

  @media (min-width: 768px) {
    .models-table-header {
      @apply grid items-center gap-3;
      grid-template-columns: 1fr 5.5rem 5.5rem 5.5rem 4.5rem 8.5rem;
    }
  }

  /* Usage stats table - 4-column layout (rank, name, count, percentage) */
  @media (min-width: 768px) {
    .models-table-header.usage-table-header {
      grid-template-columns: 3rem 1fr 7rem 9rem;
    }
  }

  /* Leaderboard table - 3-column layout (rank, name, value) */
  @media (min-width: 768px) {
    .models-table-header.leaderboard-table-header {
      grid-template-columns: 3rem 1fr 8rem;
    }
  }

  .dark .models-table-header {
    @apply bg-gray-900 border-gray-700;
  }

  .models-table-th {
    @apply text-[0.6875rem] font-bold uppercase tracking-wide;
    color: var(--color-text-muted);
  }

  .dark .models-table-th {
    @apply text-gray-500;
  }

  .models-table-th-right {
    @apply text-right justify-end;
  }

  /* Sortable table headers - reusable for any sortable table column */
  .models-table-th-sortable {
    @apply cursor-pointer transition-colors duration-200;
    @apply inline-flex items-center gap-1;
    background: none;
    border: none;
    padding: 0;
    margin: 0;
    font-size: inherit;
    font-weight: inherit;
    text-transform: inherit;
    letter-spacing: inherit;
    font-family: inherit;
  }

  .models-table-th-sortable:hover {
    color: var(--color-brand-purple);
  }

  .dark .models-table-th-sortable:hover {
    @apply text-purple-300;
  }



  .models-table-th-sortable .sort-indicator {
    @apply text-xs ml-0.5;
  }

  /* Table row */
  .models-table-row {
    @apply grid gap-2 p-3.5 rounded-lg transition-all duration-200;
    grid-template-columns: 1fr 1fr;
    grid-template-rows: auto auto auto;
    background-color: var(--color-bg-primary);
    border: 1px solid var(--color-border-primary);
  }

  .models-table-row:hover {
    background-color: var(--color-bg-secondary);
    border-color: var(--color-border-secondary);
  }

  @media (min-width: 768px) {
    .models-table-row {
      @apply items-center gap-3;
      grid-template-columns: 1fr 5.5rem 5.5rem 5.5rem 4.5rem 8.5rem;
      grid-template-rows: auto;
    }
  }

  /* Usage stats table rows - 4-column layout */
  @media (min-width: 768px) {
    .models-table-row.usage-table-row {
      grid-template-columns: 3rem 1fr 7rem 9rem;
    }
  }

  /* Leaderboard table rows - 3-column layout */
  @media (min-width: 768px) {
    .models-table-row.leaderboard-table-row {
      grid-template-columns: 3rem 1fr 8rem;
    }
  }

  .dark .models-table-row {
    @apply bg-gray-800 border-gray-700;
  }

  .dark .models-table-row:hover {
    background-color: rgb(55 65 81 / 0.5);
    @apply border-gray-600;
  }

  /* Highlighted model row (linked from URL) */
  .models-table-row-highlighted {
    @apply ring-4 ring-orange-400 ring-offset-2;
    @apply dark:ring-orange-500 dark:ring-offset-gray-900;
    scroll-margin-top: 1rem;
  }

  /* Name cell - spans full width on mobile */
  .models-table-cell-name {
    @apply flex flex-col gap-1.5 min-w-0;
    grid-column: 1 / -1;
  }

  @media (min-width: 768px) {
    .models-table-cell-name {
      @apply flex-row items-center gap-3;
      grid-column: auto;
    }
  }

  .models-table-name {
    @apply text-[0.9375rem] font-semibold truncate;
    color: var(--color-text-primary);
  }

  .dark .models-table-name {
    @apply text-gray-100;
  }

  .models-table-badges {
    @apply flex items-center gap-1.5 shrink-0;
  }

  /* Data cells */
  .models-table-cell {
    @apply flex flex-col gap-0.5;
  }

  @media (min-width: 768px) {
    .models-table-cell {
      @apply justify-center text-right;
    }
  }

  /* Mobile-only label */
  .models-table-label {
    @apply text-[0.625rem] font-semibold uppercase tracking-tight;
    color: var(--color-text-muted);
  }

  @media (min-width: 768px) {
    .models-table-label {
      @apply hidden;
    }
  }

  .dark .models-table-label {
    @apply text-gray-500;
  }

  .models-table-value {
    @apply text-[0.8125rem] font-medium tabular-nums;
    color: var(--color-text-primary);
  }

  .dark .models-table-value {
    @apply text-gray-200;
  }

  /* Highlight high values */
  .models-table-value-highlight {
    @apply font-semibold;
    color: var(--color-brand-purple);
  }

  .dark .models-table-value-highlight {
    @apply text-purple-300;
  }

  /* Muted values (zero or unavailable) */
  .models-table-value-muted {
    color: var(--color-text-muted);
  }

  .dark .models-table-value-muted {
    @apply text-gray-500;
  }

  /* =================================================================
     USAGE STATS LAYOUTS
     ================================================================= */

  .usage-overview {
    @apply flex flex-col gap-6;
  }

  .usage-totals-grid {
    @apply grid gap-6;
    grid-template-columns: 1fr;
  }

  @media (min-width: 768px) {
    .usage-totals-grid {
      grid-template-columns: repeat(2, 1fr);
    }
  }

  .usage-models {
    @apply flex flex-col gap-4;
  }

  /* Card header with flex layout */
  .card-header-flex {
    @apply flex items-center justify-between gap-4 mb-4;
  }

  .card-header-flex .heading-card {
    @apply mb-0;
  }

  /* Model list for overview cards */
  .model-list {
    @apply flex flex-col gap-2;
  }

  .model-list-item {
    @apply flex items-center gap-3 p-2 rounded-md;
    background-color: var(--color-bg-secondary);
  }

  .dark .model-list-item {
    @apply bg-gray-800;
  }

  .model-rank {
    @apply flex items-center justify-center w-6 h-6 text-xs font-bold rounded-full shrink-0;
    color: var(--color-brand-purple);
    background-color: color-mix(in srgb, var(--color-brand-purple) 15%, transparent);
  }

  .dark .model-rank {
    background-color: color-mix(in srgb, var(--color-brand-purple) 30%, transparent);
  }

  .model-name {
    @apply flex-1 text-sm font-medium truncate;
    color: var(--color-text-primary);
  }

  .dark .model-name {
    @apply text-gray-200;
  }

  .model-count {
    @apply text-[0.8125rem] font-semibold tabular-nums;
    color: var(--color-text-secondary);
  }

  .dark .model-count {
    @apply text-gray-400;
  }

  /* Rank badge in table */
  .model-rank-badge {
    @apply inline-flex items-center justify-center w-8 h-6 text-xs font-semibold rounded tabular-nums;
    color: var(--color-text-muted);
    background-color: var(--color-bg-secondary);
  }

  .dark .model-rank-badge {
    @apply bg-gray-700 text-gray-400;
  }

  /* Top 3 rank badges get special styling */
  .model-rank-badge.rank-1 {
    background: linear-gradient(135deg, #fbbf24, #f59e0b);
    color: #451a03;
  }

  .model-rank-badge.rank-2 {
    background: linear-gradient(135deg, #cbd5e1, #94a3b8);
    color: #1e293b;
  }

  .model-rank-badge.rank-3 {
    background: linear-gradient(135deg, #fdba74, #f97316);
    color: #431407;
  }

  /* Percentage bar */
  .percentage-bar-container {
    @apply flex items-center justify-end gap-2 w-full;
  }

  .percentage-bar {
    @apply h-1.5 rounded-full transition-all duration-300;
    background: linear-gradient(to right, var(--color-brand-purple), var(--color-brand-blue));
    min-width: 2px;
    max-width: 5rem;
  }

  .percentage-text {
    @apply text-xs font-medium tabular-nums min-w-10 text-right;
    color: var(--color-text-muted);
  }

  .dark .percentage-text {
    @apply text-gray-400;
  }

  /* Period filter group */
  .filter-period {
    @apply flex items-center gap-2 flex-wrap;
  }

  .filter-label {
    @apply text-[0.8125rem] font-medium;
    color: var(--color-text-muted);
  }

  .dark .filter-label {
    @apply text-gray-500;
  }

  /* Small link button */
  .btn-link-sm {
    @apply inline-flex items-center gap-1 p-0 text-[0.8125rem] font-medium bg-transparent border-none cursor-pointer transition-colors duration-200;
    color: var(--color-brand-blue);
  }

  .btn-link-sm:hover {
    color: var(--color-brand-blue-hover);
    @apply underline;
  }

  .dark .btn-link-sm {
    @apply text-blue-400;
  }

  .dark .btn-link-sm:hover {
    @apply text-blue-300;
  }
}
