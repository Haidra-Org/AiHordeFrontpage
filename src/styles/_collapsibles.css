/* =================================================================
   COLLAPSIBLE & EXPANDABLE SECTION STYLES
   
   Includes:
   - Collapsible header button
   - Sticky section header
   - Chevron icons
   - Expanded detail panel
   - Detail grid
   ================================================================= */

@layer components {
  /* =================================================================
     COLLAPSIBLE CARD PATTERNS
     Wrapper and content patterns for collapsible intro sections
     ================================================================= */

  /* Collapsible card wrapper - main container for collapsible sections */
  .collapsible-card {
    @apply mb-6 rounded-lg border overflow-hidden;
    @apply bg-gray-50;
    @apply dark:bg-gray-900;

    @media (min-width: 1024px) {
      @apply mb-8;
    }
  }

  /* Collapsible header content wrapper - flex row for icon + text */
  .collapsible-header-content {
    @apply flex items-center gap-3;
  }

  /* Collapsible header text wrapper - text alignment */
  .collapsible-header-text {
    @apply text-left;
  }

  /* Collapsible header title - h2 within collapsible header */
  .collapsible-header-title {
    @apply text-lg font-semibold text-gray-900 m-0;
    @apply dark:text-white;
  }

  /* Collapsible icon - sized icon for header */
  .collapsible-header-icon {
    @apply shrink-0 w-10 h-10;
  }

  /* Non-sticky collapsible header button (for intro sections) */
  .collapsible-header-button {
    @apply w-full flex items-center justify-between cursor-pointer;
    @apply px-4 py-3;
    @apply bg-transparent border-none text-left;
    @apply transition-all duration-200;
    @apply hover:text-purple-600;
    @apply dark:hover:text-purple-500;

    @media (min-width: 640px) {
      @apply px-6;
    }
  }

  /* Sticky collapsible section header (for table sections) */
  .section-header-collapsible {
    @apply flex items-center justify-between cursor-pointer;
    @apply sticky z-30 bg-white rounded-lg;
    @apply px-4 py-3 -mx-4 mb-3;
    @apply transition-all duration-200;
    @apply hover:text-purple-600;
    @apply dark:bg-gray-900 dark:hover:text-purple-500;
    top: var(--nav-height-mobile);

    /* Desktop - use desktop navbar height */
    @media (min-width: 768px) {
      top: var(--nav-height-desktop);
    }

    /* Mobile-specific margin adjustments for full-width appearance */
    @media (max-width: 767px) {
      margin-left: calc(-1 * var(--spacing-container-padding-mobile));
      margin-right: calc(-1 * var(--spacing-container-padding-mobile));
      padding-left: var(--spacing-container-padding-mobile);
      padding-right: var(--spacing-container-padding-mobile);
    }
  }

  /* Add shadow when sticky (appears after scrolling) */
  .section-header-collapsible::after {
    content: "";
    @apply absolute bottom-0 left-0 right-0 h-px opacity-0;
    @apply transition-opacity duration-200;
    background: linear-gradient(
      to right,
      transparent,
      rgb(229 231 235),
      transparent
    );
  }

  .section-header-collapsible.is-stuck::after {
    @apply opacity-100;
  }

  .dark .section-header-collapsible::after {
    background: linear-gradient(
      to right,
      transparent,
      rgb(55 65 81),
      transparent
    );
  }

  /* Chevron icon for collapsible sections */
  .chevron-icon {
    @apply w-6 h-6 shrink-0 transition-transform duration-200;
  }

  .chevron-icon.expanded {
    @apply rotate-180;
  }

  /* Small chevron icon for expandable rows */
  .chevron-icon-sm {
    @apply w-5 h-5 shrink-0 text-gray-500 transition-transform duration-200;
    @apply dark:text-gray-400;
  }

  .chevron-icon-sm.expanded {
    @apply rotate-180;
  }

  /* Expanded detail panel */
  .expanded-detail-panel {
    @apply p-4 border-t border-gray-200 bg-gray-50;
    @apply dark:border-gray-700 dark:bg-gray-700/30;
  }

  /* Detail grid - 2 column layout for expanded details */
  .detail-grid {
    @apply grid grid-cols-1 gap-4 md:grid-cols-2;
  }

  /* Detail image container */
  .detail-image {
    @apply flex items-center justify-center;
  }

  .detail-image img {
    @apply max-w-full h-auto max-h-[300px] rounded-lg shadow-lg;
  }

  /* Detail text content */
  .detail-text {
    @apply text-sm leading-relaxed text-gray-700 bg-gray-50 p-4 rounded-lg;
    @apply dark:text-gray-300 dark:bg-gray-800;
  }

  /* =================================================================
     CARD EXPANDABLE CONTENT
     Padding for expandable content areas inside collapsible cards
     ================================================================= */

  /* Content area for expandable/collapsible sections */
  .card-expandable-content {
    @apply px-4 pb-4;

    @media (min-width: 640px) {
      @apply px-6 pb-6;
    }
  }

  /* Content wrapper with vertical spacing between children */
  .card-expandable-stack {
    @apply flex flex-col gap-6;
  }

  /* Collapse action footer - centered hide/show button area */
  .collapse-action-footer {
    @apply mt-6 pt-4 text-center;
    @apply border-t border-gray-200;
    @apply dark:border-gray-700;
  }
}
