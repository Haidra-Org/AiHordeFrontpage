/* =================================================================
   CARD STYLES
   
   Unified card system for all card-like components.
   
   Includes:
   - Base card and variants
   - Panels (admin-style cards)
   - Stat cards
   - Worker cards
   - Callouts
   - Interactive cards
   - Image grid
   ================================================================= */

@layer components {
  /* =================================================================
     CALLOUT COMPONENTS
     ================================================================= */

  .callout-2-grid {
    @apply grid grid-cols-1 gap-6;
    @apply md:grid-cols-2;
  }
  /* Generic callout container */
  .callout {
    @apply p-4 border-2 border-edge-secondary rounded-lg bg-surface-primary;
    @apply dark:border-gray-700 dark:bg-gray-800;
  }

  .callout-accent {
    @apply border-purple-500 bg-white;
    @apply dark:border-purple-400 dark:bg-gray-800;
  }

  .callout-info {
    @apply border-blue-400 bg-blue-50;
    @apply dark:border-blue-500 dark:bg-blue-900/20;
  }

  .callout-title {
    @apply m-0 mb-2 text-lg font-semibold text-gray-900;
    @apply dark:text-white;
  }

  .callout-body {
    @apply m-0 mb-3 text-base text-gray-700;
    @apply dark:text-gray-300;
  }

  .cta-actions {
    @apply flex flex-col gap-3 sm:flex-row;
  }

  /* =================================================================
     CARD BASE
     ================================================================= */

  /* Card base */
  .card {
    @apply flex flex-col max-w-lg p-6 mx-auto text-center;
    @apply text-content-primary border border-edge-secondary rounded-lg;
    @apply dark:text-white dark:border-gray-600;
    @apply xl:p-8;
    box-shadow: var(--shadow-card);
    /* Note: Using contain: style only, not layout, to allow fixed-position 
       modals inside cards to position relative to viewport */
    contain: style;
  }

  /* Card full-width modifier - removes max-width constraint */
  .card-full {
    @apply max-w-none text-left;
  }

  /* Card with primary background */
  .card-bg-primary {
    @apply bg-white dark:bg-gray-800;
  }

  /* Card with secondary background */
  .card-bg-secondary {
    @apply bg-gray-50 dark:bg-gray-900;
  }

  /* =================================================================
     PANEL VARIANT - Admin-style cards with simpler styling
     ================================================================= */

  .panel {
    @apply rounded-lg overflow-hidden;
    background-color: var(--color-surface-secondary);
    border: 1px solid var(--color-edge-primary);
  }

  .dark .panel {
    @apply bg-gray-800 border-gray-700;
  }

  .panel--unsaved {
    @apply outline-2 outline-yellow-500 outline-offset-0;
  }

  .panel-link {
    @apply flex items-center p-4 rounded-lg transition-colors duration-200;
    background-color: var(--color-surface-secondary);
  }

  .panel-link:hover {
    background-color: var(--color-edge-primary);
  }

  .dark .panel-link {
    @apply bg-gray-700;
  }

  .dark .panel-link:hover {
    @apply bg-gray-600;
  }

  /* =================================================================
     STAT CARD VARIANT - Cards with icon and stat display
     ================================================================= */

  .stat-card {
    @apply flex items-center p-6;
  }

  .stat-card-icon {
    @apply flex items-center justify-center w-12 h-12 rounded-lg shrink-0;
  }

  .stat-card-icon--purple {
    @apply bg-purple-100 text-purple-600;
  }

  .dark .stat-card-icon--purple {
    background-color: rgb(88 28 135 / 0.5);
    @apply text-purple-400;
  }

  .stat-card-icon--blue {
    @apply bg-blue-100 text-blue-600;
  }

  .dark .stat-card-icon--blue {
    background-color: rgb(30 58 138 / 0.5);
    @apply text-blue-400;
  }

  .stat-card-icon--green {
    @apply bg-green-100 text-green-600;
  }

  .dark .stat-card-icon--green {
    background-color: rgb(22 101 52 / 0.5);
    @apply text-green-400;
  }

  .stat-card-icon--yellow {
    @apply bg-yellow-100 text-yellow-700;
  }

  .dark .stat-card-icon--yellow {
    background-color: rgb(113 63 18 / 0.5);
    @apply text-yellow-400;
  }

  .stat-card-icon--indigo {
    @apply bg-indigo-100 text-indigo-600;
  }

  .dark .stat-card-icon--indigo {
    background-color: rgb(49 46 129 / 0.5);
    @apply text-indigo-400;
  }

  .stat-card-content {
    @apply ml-4;
  }

  .stat-card-label {
    @apply text-sm;
    color: var(--color-content-secondary);
  }

  .dark .stat-card-label {
    @apply text-gray-400;
  }

  .stat-card-value {
    @apply text-2xl font-semibold;
    color: var(--color-content-primary);
  }

  .dark .stat-card-value {
    @apply text-white;
  }

  /* =================================================================
     WORKER CARD VARIANT - Cards with status indication
     ================================================================= */

  .worker-card {
    @apply rounded-lg overflow-hidden;
  }

  .worker-card--normal {
    background-color: var(--color-surface-primary);
    border: 1px solid var(--color-edge-primary);
  }

  .dark .worker-card--normal {
    @apply bg-gray-800 border-gray-700;
  }

  .worker-card--issue {
    @apply bg-red-50 border border-red-300;
  }

  .dark .worker-card--issue {
    background-color: rgb(127 29 29 / 0.3);
    border-color: rgb(185 28 28 / 0.5);
  }

  /* Status icon for worker cards */
  .status-icon {
    @apply flex items-center justify-center w-10 h-10 rounded-full shrink-0;
  }

  .status-icon--success {
    @apply bg-green-100 text-green-600;
  }

  .dark .status-icon--success {
    @apply bg-green-800 text-green-400;
  }

  .status-icon--error {
    @apply bg-red-100 text-red-600;
  }

  .dark .status-icon--error {
    @apply bg-red-900 text-red-400;
  }

  /* =================================================================
     EXPANDABLE CARD - Used in lists
     ================================================================= */

  .card-expandable {
    @apply border border-gray-200 rounded-lg;
    @apply dark:border-gray-700;
  }

  /* Card row clickable - interactive card row */
  .card-row-clickable {
    @apply flex items-center justify-between p-4 cursor-pointer;
    @apply transition-colors duration-200;
    @apply hover:bg-gray-50 dark:hover:bg-gray-800;
  }

  /* Card expanded section - details section */
  .card-expanded {
    @apply p-4 border-t border-gray-200 bg-gray-50;
    @apply dark:border-gray-700 dark:bg-gray-800;
  }

  /* =================================================================
     CARD SPACING UTILITIES
     ================================================================= */

  /* Card with bottom margin - standard spacing */
  .card-spaced {
    @apply mb-6;
  }

  /* =================================================================
     CARD INTERACTIVE - Clickable cards with hover effects
     ================================================================= */

  /* Interactive card - adds hover lift and shadow */
  .card-interactive {
    @apply cursor-pointer transition-all duration-200;
  }

  .card-interactive:hover {
    @apply -translate-y-0.5;
    box-shadow: var(--shadow-card-hover);
    border-color: var(--color-brand-blue);
  }

  .dark .card-interactive:hover {
    box-shadow: var(--shadow-card-hover-dark);
    @apply border-blue-400;
  }

  /* =================================================================
     CARD CONTENT UTILITIES
     ================================================================= */

  /* Card preview area - for images/icons at top of cards */
  .card-preview {
    @apply w-full overflow-hidden flex items-center justify-center bg-surface-secondary;
    @apply dark:bg-gray-800;
    aspect-ratio: 1 / 1;
  }

  /* Card preview image */
  .card-preview img {
    @apply w-full h-full object-cover;
  }

  /* Card preview placeholder icon */
  .card-preview-icon {
    @apply w-12 h-12 text-content-muted;
    @apply dark:text-gray-500;
  }

  /* Card preview with primary color icon */
  .card-preview-icon-primary {
    @apply text-brand-blue;
    @apply dark:text-blue-400;
  }

  /* Card content section */
  .card-content {
    @apply flex flex-col gap-2 p-4 flex-1;
  }

  /* Card header row */
  .card-header-row {
    @apply flex items-center gap-2 flex-wrap;
  }

  /* Card title */
  .card-title {
    @apply text-base font-semibold text-content-primary m-0 leading-snug;
    @apply overflow-hidden text-ellipsis whitespace-nowrap;
    @apply dark:text-white;
  }

  /* Card subtitle/creator */
  .card-subtitle {
    @apply text-sm text-content-secondary m-0;
    @apply dark:text-gray-400;
  }

  /* Card description - truncated multiline */
  .card-description {
    @apply text-sm text-content-secondary m-0 overflow-hidden;
    @apply dark:text-gray-400;
    display: -webkit-box;
    -webkit-line-clamp: 2;
    line-clamp: 2;
    -webkit-box-orient: vertical;
  }

  /* Fixed-height description variants for consistent card sizing */
  .card-description-md {
    min-height: 112px;
  }

  .card-description-lg {
    min-height: 120px;
  }

  /* Card footer */
  .card-footer {
    @apply flex items-center justify-between mt-auto pt-2 border-t border-edge-primary;
    @apply dark:border-gray-700;
  }

  /* Card footer stat with icon */
  .card-stat {
    @apply flex items-center gap-1 text-sm text-content-secondary;
    @apply dark:text-gray-400;
  }

  .card-stat-icon {
    @apply w-4 h-4;
  }

  /* Card title truncate - single line with ellipsis */
  .card-title-truncate {
    @apply overflow-hidden text-ellipsis whitespace-nowrap;
  }

  /* =================================================================
     CARD STATS GRID - For displaying multiple stats in cards
     ================================================================= */

  /* Stats container - 2x2 grid */
  .card-stats {
    @apply grid grid-cols-2 gap-3 p-3 bg-surface-secondary rounded-md;
    @apply dark:bg-gray-900;
  }

  /* Stat label - small, uppercase */
  .stat-label {
    @apply text-xs font-semibold uppercase tracking-wide text-content-muted;
    @apply dark:text-gray-500;
  }

  /* Stat value - larger, prominent */
  .stat-value {
    @apply text-base font-semibold text-content-primary;
    @apply dark:text-gray-100;
  }

  /* Inline stat for card footer */
  .card-stat-inline {
    @apply text-sm font-medium text-content-secondary;
    @apply dark:text-gray-400;
  }

  /* Card actions container */
  .card-actions {
    @apply flex gap-1;
  }

  /* Small action button for cards */
  .card-action-btn {
    @apply flex items-center justify-center w-8 h-8;
  }

  .card-action-btn svg {
    @apply w-4 h-4;
  }

  /* =================================================================
     MODAL / DIALOG STYLES
     ================================================================= */

  /* Modal overlay */
  .modal-overlay {
    @apply fixed inset-0 z-50 flex items-center justify-center p-4;
    @apply bg-black/50 backdrop-blur-sm;
  }

  /* Modal panel */
  .modal-panel {
    @apply w-full max-w-md p-6;
    @apply bg-surface-primary border border-edge-primary rounded-lg;
    @apply dark:bg-gray-800 dark:border-gray-700;
    box-shadow: var(--shadow-modal);
  }

  .dark .modal-panel {
    box-shadow: 0 20px 25px -5px rgba(0, 0, 0, 0.3);
  }

  .modal-panel h3 {
    @apply m-0 mb-2 text-lg font-semibold text-content-primary;
    @apply dark:text-gray-100;
  }

  .modal-panel p {
    @apply m-0 mb-6 text-sm text-content-secondary;
    @apply dark:text-gray-400;
  }

  /* Modal actions row */
  .modal-actions {
    @apply flex justify-end gap-2;
  }

  /* =================================================================
     IMAGE GRID
     ================================================================= */

  /* Grid for image examples */
  .image-grid {
    @apply grid gap-4;
    grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
  }

  @media (max-width: 640px) {
    .image-grid {
      @apply grid-cols-2;
    }
  }

  /* Image grid item */
  .image-grid-item {
    @apply relative overflow-hidden rounded-lg border border-edge-primary;
    @apply dark:border-gray-700;
    aspect-ratio: 1;
  }

  .image-grid-item-primary {
    @apply border-brand-blue border-2;
    @apply dark:border-blue-400;
  }

  .image-grid-item img {
    @apply w-full h-full object-cover;
  }

  /* Image badge overlay */
  .image-badge {
    @apply absolute top-2 left-2 px-2 py-0.5;
    @apply text-xs font-semibold uppercase tracking-wide text-white;
    @apply bg-brand-blue rounded-full;
    @apply dark:bg-blue-500;
  }
}
