/* =================================================================
   UTILITY STYLES
   
   Includes:
   - Icon sizing
   - Divider section
   - Loading skeleton
   - Spinners
   - State containers
   - Code blocks
   - Stack layouts
   - JSON syntax highlighting
   ================================================================= */

@layer utilities {
  /* Icon sizing */
  .icon-sm {
    @apply shrink-0 w-4 h-4 mt-0.5;
  }

  /* Dark mode fill utility */
  .dark .dark\:fill-white {
    fill: white;
  }

  /* Background color utility */
  .bg-gray-600 {
    @apply bg-gray-600;
  }
}

@layer components {
  /* Divider with padding */
  .divider-section {
    @apply mx-auto py-4 border-t;
    max-width: var(--max-width-container);
    padding-left: var(--spacing-container-padding-mobile);
    padding-right: var(--spacing-container-padding-mobile);

    @apply lg:px-6;
  }

  /* Loading skeleton */
  .skeleton-pulse {
    animation: pulse 2s cubic-bezier(0.4, 0, 0.6, 1) infinite;
  }

  /* =================================================================
     LOADING SPINNER
     ================================================================= */

  /* Spinner base */
  .spinner {
    @apply rounded-full;
    border: 3px solid var(--color-edge-primary);
    border-top-color: var(--color-brand-blue);
    animation: spin 1s linear infinite;
  }

  .dark .spinner {
    @apply border-gray-700;
    border-top-color: var(--color-blue-400);
  }

  .spinner-sm {
    @apply w-6 h-6;
  }

  .spinner-md {
    @apply w-10 h-10;
  }

  .spinner-lg {
    @apply w-12 h-12;
  }

  /* =================================================================
     STATE CONTAINERS - Loading, Error, Empty states
     ================================================================= */

  /* Centered state container */
  .state-container {
    @apply flex flex-col items-center justify-center gap-4 py-16 px-8 text-center;
  }

  .state-container-sm {
    @apply py-12 px-8;
  }

  /* Minimal empty state - for inline "no results" messages */
  .state-empty {
    @apply text-center py-8;
  }

  /* Muted text for empty states */
  .state-empty-text {
    @apply text-gray-500;
    @apply dark:text-gray-400;
  }

  /* State icon sizing */
  .state-icon {
    @apply w-12 h-12;
  }

  .state-icon-lg {
    @apply w-16 h-16;
  }

  /* Error state color */
  .state-error {
    @apply text-red-500;
    @apply dark:text-red-400;
  }

  /* Muted state color */
  .state-muted {
    @apply text-content-muted;
    @apply dark:text-gray-500;
  }

  /* Ensure theme toggle host provides positioning context for dropdown */
  theme-toggle {
    @apply relative block;
  }

  /* =================================================================
     CODE BLOCKS
     ================================================================= */

  /* Code block container */
  .code-block {
    @apply m-0 p-4 rounded-md overflow-x-auto;
    @apply font-mono text-sm leading-relaxed;
    @apply text-content-primary bg-surface-secondary;
    @apply whitespace-pre-wrap break-words;
    @apply dark:bg-gray-900 dark:text-gray-200;
  }

  /* Code block with border */
  .code-block-bordered {
    @apply border border-edge-primary;
    @apply dark:border-gray-700;
  }

  /* Smaller code block text */
  .code-block-sm {
    @apply text-xs;
  }

  /* Code block with max height and scroll */
  .code-block-scroll {
    @apply max-h-[500px] overflow-y-auto;
  }

  /* Relative container for copy button positioning */
  .code-wrapper {
    @apply relative;
  }

  /* Copy button positioned top-right */
  .code-copy-btn {
    @apply absolute top-2 right-2;
  }

  /* =================================================================
     PAGE LAYOUT UTILITIES
     ================================================================= */

  /* Vertical stack with gap */
  .stack-sm {
    @apply flex flex-col gap-3;
  }

  .stack-md {
    @apply flex flex-col gap-4;
  }

  .stack-lg {
    @apply flex flex-col gap-6;
  }

  .stack-xl {
    @apply flex flex-col gap-8;
  }

  /* Flex row with wrap */
  .flex-row-wrap {
    @apply flex flex-wrap items-center gap-2;
  }

  /* Action row - buttons side by side */
  .action-row {
    @apply flex flex-wrap gap-2 mt-2;
  }

  @media (max-width: 640px) {
    .action-row-responsive {
      @apply flex-col;
    }
  }

  /* =================================================================
     JSON SYNTAX HIGHLIGHTING
     ================================================================= */

  /* JSON key highlighting */
  .json-key {
    @apply text-blue-600 font-semibold;
    @apply dark:text-blue-300;
  }

  /* JSON string value highlighting */
  .json-string {
    @apply text-green-600;
    @apply dark:text-green-300;
  }

  /* JSON number value highlighting */
  .json-number {
    @apply text-yellow-700;
    @apply dark:text-yellow-400;
  }

  /* JSON boolean value highlighting */
  .json-boolean {
    @apply text-pink-700;
    @apply dark:text-pink-400;
  }

  /* JSON null value highlighting */
  .json-null {
    @apply text-content-secondary;
    @apply dark:text-slate-200;
  }
}

@keyframes spin {
  to {
    transform: rotate(360deg);
  }
}
