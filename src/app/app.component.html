<div class="wrapper" (click)="closeMobileMenu()">
  <!-- Main Navigation Header -->
  <header class="nav-shell">
    <nav
      class="nav-padding"
      role="navigation"
      aria-label="Main navigation"
    >
      <div class="nav-container">
        <!-- Logo and Site Title -->
        <div class="logo-container">
          <a
            routerLink="/"
            class="logo-link"
            [attr.aria-label]="'Navigate to homepage' | transloco"
          >
            <img
              ngSrc="./assets/img/logo.png"
              class="logo-image"
              alt="{{ 'logo.alt' | transloco }}"
              height="455"
              width="393"
              priority
            />
            <span class="logo-text">
              {{ "app_title" | transloco }}
            </span>
          </a>
        </div>

        <!-- Desktop Navigation Menu -->
        <div class="nav-menu-desktop" role="menubar">
          <a
            routerLink="/"
            class="nav-link"
            role="menuitem"
            routerLinkActive="nav-link-active"
            [routerLinkActiveOptions]="{ exact: true }"
          >
            {{ "home" | transloco }}
          </a>
          <a
            routerLink="/news/"
            class="nav-link"
            role="menuitem"
            routerLinkActive="nav-link-active"
          >
            {{ "news" | transloco }}
          </a>
          <a
            routerLink="/guis/"
            class="nav-link"
            role="menuitem"
            routerLinkActive="nav-link-active"
          >
            {{ "guis_and_tools" | transloco }}
          </a>

          <a
            routerLink="/faq/"
            class="nav-link"
            role="menuitem"
            routerLinkActive="nav-link-active"
          >
            {{ "faq" | transloco }}
          </a>
          <a href="/api/" class="nav-link" role="menuitem">
            {{ "api" | transloco }}
          </a>
          <!-- Active Details Dropdown -->
          <div class="nav-dropdown-container" data-dropdown="details">
            <button
              type="button"
              class="nav-link nav-dropdown-trigger"
              [class.nav-link-active]="showDetailsDropdown"
              (click)="toggleDetailsDropdown(); $event.stopPropagation()"
              aria-haspopup="true"
              [attr.aria-expanded]="showDetailsDropdown"
            >
              {{ "nav.active_details" | transloco }}
              <svg
                class="nav-dropdown-chevron"
                [class.nav-dropdown-chevron-open]="showDetailsDropdown"
                fill="none"
                stroke="currentColor"
                viewBox="0 0 24 24"
              >
                <path
                  stroke-linecap="round"
                  stroke-linejoin="round"
                  stroke-width="2"
                  d="M19 9l-7 7-7-7"
                />
              </svg>
            </button>
            @if (showDetailsDropdown) {
              <div class="nav-dropdown-menu" role="menu">
                <a
                  routerLink="/details/workers/"
                  class="nav-dropdown-item"
                  role="menuitem"
                  routerLinkActive="nav-dropdown-item-active"
                  (click)="closeDetailsDropdown()"
                >
                  {{ "nav.active_details.workers" | transloco }}
                </a>
                <a
                  routerLink="/details/models/"
                  class="nav-dropdown-item"
                  role="menuitem"
                  routerLinkActive="nav-dropdown-item-active"
                  (click)="closeDetailsDropdown()"
                >
                  {{ "nav.active_details.models" | transloco }}
                </a>
                <a
                  routerLink="/details/usage/"
                  class="nav-dropdown-item"
                  role="menuitem"
                  routerLinkActive="nav-dropdown-item-active"
                  (click)="closeDetailsDropdown()"
                >
                  {{ "nav.active_details.usage_stats" | transloco }}
                </a>
                <a
                  routerLink="/details/styles/"
                  class="nav-dropdown-item"
                  role="menuitem"
                  routerLinkActive="nav-dropdown-item-active"
                  (click)="closeDetailsDropdown()"
                >
                  {{ "nav.active_details.styles" | transloco }}
                </a>
                <a
                  routerLink="/details/leaderboard/"
                  class="nav-dropdown-item"
                  role="menuitem"
                  routerLinkActive="nav-dropdown-item-active"
                  (click)="closeDetailsDropdown()"
                >
                  {{ "nav.active_details.leaderboard" | transloco }}
                </a>
              </div>
            }
          </div>
          <!-- Account Dropdown -->
          <div class="nav-dropdown-container" data-dropdown="account">
            <button
              type="button"
              class="nav-link nav-dropdown-trigger"
              [class.nav-link-active]="showAccountDropdown"
              (click)="toggleAccountDropdown(); $event.stopPropagation()"
              aria-haspopup="true"
              [attr.aria-expanded]="showAccountDropdown"
            >
              {{ "nav.account" | transloco }}
              <svg
                class="nav-dropdown-chevron"
                [class.nav-dropdown-chevron-open]="showAccountDropdown"
                fill="none"
                stroke="currentColor"
                viewBox="0 0 24 24"
              >
                <path
                  stroke-linecap="round"
                  stroke-linejoin="round"
                  stroke-width="2"
                  d="M19 9l-7 7-7-7"
                />
              </svg>
            </button>
            @if (showAccountDropdown) {
              <div class="nav-dropdown-menu" role="menu">
                <a
                  routerLink="/profile/"
                  class="nav-dropdown-item"
                  role="menuitem"
                  routerLinkActive="nav-dropdown-item-active"
                  (click)="closeAccountDropdown()"
                >
                  @if (auth.isLoggedIn()) {
                    {{ "profile.nav_profile" | transloco }}
                  } @else {
                    {{ "profile.nav_login" | transloco }}
                  }
                </a>
                <a
                  href="https://aihorde.net/register"
                  class="nav-dropdown-item"
                  role="menuitem"
                  target="_blank"
                  rel="noopener noreferrer"
                  (click)="closeAccountDropdown()"
                >
                  {{ "register_account" | transloco }}
                </a>
                <a
                  routerLink="/v2-transfer/"
                  class="nav-dropdown-item"
                  role="menuitem"
                  routerLinkActive="nav-dropdown-item-active"
                  (click)="closeAccountDropdown()"
                >
                  {{ "transfer.title" | transloco }}
                </a>
              </div>
            }
          </div>
        </div>

        <!-- Right Side Actions -->
        <div class="nav-actions">
          <!-- Theme Toggle -->
          <theme-toggle />

          <!-- Mobile Menu Button -->
          <button
            type="button"
            class="mobile-menu-button"
            [attr.aria-expanded]="showMobileMenu"
            [attr.aria-label]="
              (showMobileMenu ? 'close_main_menu' : 'open_main_menu')
                | transloco
            "
            aria-controls="mobile-navigation"
            (click)="toggleMobileMenu(); $event.stopPropagation()"
            (keydown.escape)="closeMobileMenu()"
          >
            <span class="sr-only">{{
              (showMobileMenu ? "close_main_menu" : "open_main_menu")
                | transloco
            }}</span>
            <!-- Hamburger Icon -->
            @if (!showMobileMenu) {
              <svg
                class="menu-icon"
                fill="none"
                viewBox="0 0 24 24"
                stroke-width="1.5"
                stroke="currentColor"
                aria-hidden="true"
              >
                <path
                  stroke-linecap="round"
                  stroke-linejoin="round"
                  d="M3.75 6.75h16.5M3.75 12h16.5m-16.5 5.25h16.5"
                />
              </svg>
            }
            <!-- Close Icon -->
            @if (showMobileMenu) {
              <svg
                class="menu-icon"
                fill="none"
                viewBox="0 0 24 24"
                stroke-width="1.5"
                stroke="currentColor"
                aria-hidden="true"
              >
                <path
                  stroke-linecap="round"
                  stroke-linejoin="round"
                  d="M6 18L18 6M6 6l12 12"
                />
              </svg>
            }
          </button>
        </div>
      </div>

      <!-- Mobile Navigation Menu -->
      <div
        class="mobile-nav-wrapper"
        [class.hidden]="!showMobileMenu"
        [attr.aria-hidden]="!showMobileMenu"
        id="mobile-navigation"
        role="menu"
        (click)="$event.stopPropagation()"
      >
        <div class="mobile-menu-backdrop" [class.show]="showMobileMenu"></div>
        <div class="mobile-menu-panel" [class.open]="showMobileMenu">
          <div class="mobile-nav-list">
            <a
              routerLink="/"
              class="mobile-nav-link"
              role="menuitem"
              routerLinkActive="mobile-nav-link-active"
              [routerLinkActiveOptions]="{ exact: true }"
              (click)="closeMobileMenu()"
              (keydown.escape)="closeMobileMenu()"
            >
              {{ "home" | transloco }}
            </a>
            <a
              routerLink="/news/"
              class="mobile-nav-link"
              role="menuitem"
              routerLinkActive="mobile-nav-link-active"
              (click)="closeMobileMenu()"
            >
              {{ "news" | transloco }}
            </a>
            <a
              routerLink="/guis/"
              class="mobile-nav-link"
              role="menuitem"
              routerLinkActive="mobile-nav-link-active"
              (click)="closeMobileMenu()"
            >
              {{ "guis_and_tools" | transloco }}
            </a>
            <!-- Active Details Submenu -->
            <div class="mobile-nav-submenu">
              <button
                type="button"
                class="mobile-nav-link mobile-nav-submenu-trigger"
                (click)="toggleMobileDetailsSubmenu(); $event.stopPropagation()"
                aria-haspopup="true"
                [attr.aria-expanded]="showMobileDetailsSubmenu"
              >
                {{ "nav.active_details" | transloco }}
                <svg
                  class="mobile-nav-chevron"
                  [class.mobile-nav-chevron-open]="showMobileDetailsSubmenu"
                  fill="none"
                  stroke="currentColor"
                  viewBox="0 0 24 24"
                >
                  <path
                    stroke-linecap="round"
                    stroke-linejoin="round"
                    stroke-width="2"
                    d="M19 9l-7 7-7-7"
                  />
                </svg>
              </button>
              @if (showMobileDetailsSubmenu) {
                <div class="mobile-nav-submenu-items">
                  <a
                    routerLink="/details/workers/"
                    class="mobile-nav-link mobile-nav-submenu-item"
                    role="menuitem"
                    routerLinkActive="mobile-nav-link-active"
                    (click)="closeMobileMenu()"
                  >
                    {{ "nav.active_details.workers" | transloco }}
                  </a>
                  <a
                    routerLink="/details/models/"
                    class="mobile-nav-link mobile-nav-submenu-item"
                    role="menuitem"
                    routerLinkActive="mobile-nav-link-active"
                    (click)="closeMobileMenu()"
                  >
                    {{ "nav.active_details.models" | transloco }}
                  </a>
                  <a
                    routerLink="/details/usage/"
                    class="mobile-nav-link mobile-nav-submenu-item"
                    role="menuitem"
                    routerLinkActive="mobile-nav-link-active"
                    (click)="closeMobileMenu()"
                  >
                    {{ "nav.active_details.usage_stats" | transloco }}
                  </a>
                  <a
                    routerLink="/details/styles/"
                    class="mobile-nav-link mobile-nav-submenu-item"
                    role="menuitem"
                    routerLinkActive="mobile-nav-link-active"
                    (click)="closeMobileMenu()"
                  >
                    {{ "nav.active_details.styles" | transloco }}
                  </a>
                </div>
              }
            </div>
            <a
              routerLink="/faq/"
              class="mobile-nav-link"
              role="menuitem"
              routerLinkActive="mobile-nav-link-active"
              (click)="closeMobileMenu()"
            >
              {{ "faq" | transloco }}
            </a>
            <a
              href="/api/"
              class="mobile-nav-link"
              role="menuitem"
              (click)="closeMobileMenu()"
            >
              {{ "api" | transloco }}
            </a>
            <!-- Account Submenu -->
            <div class="mobile-nav-submenu">
              <button
                type="button"
                class="mobile-nav-link mobile-nav-submenu-trigger"
                (click)="toggleMobileAccountSubmenu(); $event.stopPropagation()"
                aria-haspopup="true"
                [attr.aria-expanded]="showMobileAccountSubmenu"
              >
                {{ "nav.account" | transloco }}
                <svg
                  class="mobile-nav-chevron"
                  [class.mobile-nav-chevron-open]="showMobileAccountSubmenu"
                  fill="none"
                  stroke="currentColor"
                  viewBox="0 0 24 24"
                >
                  <path
                    stroke-linecap="round"
                    stroke-linejoin="round"
                    stroke-width="2"
                    d="M19 9l-7 7-7-7"
                  />
                </svg>
              </button>
              @if (showMobileAccountSubmenu) {
                <div class="mobile-nav-submenu-items">
                  <a
                    routerLink="/profile/"
                    class="mobile-nav-link mobile-nav-submenu-item"
                    role="menuitem"
                    routerLinkActive="mobile-nav-link-active"
                    (click)="closeMobileMenu()"
                  >
                    @if (auth.isLoggedIn()) {
                      {{ "profile.nav_profile" | transloco }}
                    } @else {
                      {{ "profile.nav_login" | transloco }}
                    }
                  </a>
                  <a
                    href="https://aihorde.net/register"
                    class="mobile-nav-link mobile-nav-submenu-item"
                    role="menuitem"
                    target="_blank"
                    rel="noopener noreferrer"
                    (click)="closeMobileMenu()"
                  >
                    {{ "register_account" | transloco }}
                  </a>
                  <a
                    routerLink="/v2-transfer/"
                    class="mobile-nav-link mobile-nav-submenu-item"
                    role="menuitem"
                    routerLinkActive="mobile-nav-link-active"
                    (click)="closeMobileMenu()"
                  >
                    {{ "transfer.title" | transloco }}
                  </a>
                </div>
              }
            </div>
          </div>
        </div>
      </div>
    </nav>
  </header>

  <router-outlet></router-outlet>
  <footer class="footer-shell" [class.footer-dark]="darkFooter()">
    <div class="footer-container">
      <div class="footer-grid">
        <div>
          <h3 class="footer-heading">
            {{ "community" | transloco }}
          </h3>
          <ul class="footer-links">
            <li class="mb-3">
              <a
                href="https://discord.gg/3DxrhksKzn"
                class="hover:underline"
                target="_blank"
                >{{ "discord" | transloco }}</a
              >
            </li>
            <li class="mb-3">
              <a
                href="https://www.patreon.com/db0"
                class="hover:underline"
                target="_blank"
                >{{ "patreon" | transloco }}</a
              >
            </li>
            <li class="mb-3">
              <a
                href="https://github.com/Haidra-Org"
                class="hover:underline"
                target="_blank"
                >{{ "github" | transloco }}</a
              >
            </li>
            <li class="mb-3">
              <a
                href="https://sigmoid.social/@stablehorde"
                class="hover:underline"
                target="_blank"
                >{{ "mastodon" | transloco }}</a
              >
            </li>
            <li class="mb-3">
              <a
                href="https://lemmy.dbzer0.com/c/aihorde"
                class="hover:underline"
                target="_blank"
                >{{ "lemmy" | transloco }}</a
              >
            </li>
          </ul>
        </div>
        <div>
          <h3 class="footer-heading">
            {{ "credits" | transloco }}
          </h3>
          <ul class="footer-links">
            <li class="mb-3">
              <a
                href="https://dbzer0.com/"
                class="hover:underline"
                target="_blank"
                >db0</a
              >
            </li>
            <li class="mb-3">
              <a
                href="https://github.com/haidra-org"
                class="hover:underline"
                target="_blank"
                >Haidra</a
              >
            </li>
            <li class="mb-3">
              <a routerLink="/sponsors" class="hover:underline">{{
                "sponsors" | transloco
              }}</a>
            </li>
          </ul>
        </div>
        <div>
          <h3 class="footer-heading">
            {{ "legal" | transloco }}
          </h3>
          <ul class="footer-links">
            <li class="mb-3">
              <a routerLink="/privacy" class="hover:underline">{{
                "privacy_policy" | transloco
              }}</a>
            </li>
            <li class="mb-3">
              <a routerLink="/terms" class="hover:underline">{{
                "terms_of_service" | transloco
              }}</a>
            </li>
          </ul>
        </div>
        <div>
          <h3 class="footer-heading">
            {{ "documentation" | transloco }}
          </h3>
          <ul class="footer-links">
            <li class="mb-3">
              <a
                href="https://aihorde.net/api/"
                class="hover:underline"
                target="_blank"
                >{{ "rest_api" | transloco }}</a
              >
            </li>
            <li class="mb-3">
              <a
                href="https://github.com/Haidra-Org/AI-Horde/blob/main/README_StableHorde.md#joining-the-horde"
                class="hover:underline"
                target="_blank"
                >{{ "join_horde" | transloco }}</a
              >
            </li>
            <li class="mb-3">
              <a routerLink="/faq/" class="hover:underline">{{
                "frequently_asked_questions" | transloco
              }}</a>
            </li>
          </ul>
        </div>
        <div>
          <h3 class="footer-heading">
            {{ "other_links" | transloco }}
          </h3>
          <ul class="footer-links">
            <li class="mb-3">
              <a href="https://aihorde.net/register" class="hover:underline">{{
                "register_account" | transloco
              }}</a>
            </li>
            <li class="mb-3">
              <a routerLink="/profile/" class="hover:underline">{{
                "profile.title" | transloco
              }}</a>
            </li>
            <li class="mb-3">
              <a routerLink="/v2-transfer/" class="hover:underline">{{
                "transfer.title" | transloco
              }}</a>
            </li>
          </ul>
        </div>
      </div>
      <hr class="footer-divider" />
      <div class="footer-bottom">
        <a href="#" class="footer-logo-wrapper">
          <img
            ngSrc="./assets/img/logo.png"
            class="footer-logo-image"
            [alt]="'logo.alt' | transloco"
            height="455"
            width="393"
          />
          {{ "app_title" | transloco }}
        </a>
        <!-- <span class="block text-sm text-center text-gray-500 dark:text-gray-400 built-with">
            {{ 'built_with' | transloco: {flowbiteLink: 'https://flowbite.com', tailwindLink: 'https://tailwindcss.com', angularLink: 'https://angular.dev'} }}

          </span> -->
        <!-- Safe: Translated credits with framework links from trusted i18n files, sanitized by Angular -->
        <span
          class="footer-text"
          [innerHTML]="
            'built_with'
              | transloco
                : {
                    flowbiteLink:
                      '<a href=&quot;https://flowbite.com&quot; target=&quot;_blank&quot;>' +
                      ('built_with.flowbiteLink' | transloco) +
                      '</a>',
                    tailwindLink:
                      '<a href=&quot;https://tailwindcss.com&quot; target=&quot;_blank&quot;>' +
                      ('built_with.tailwindLink' | transloco) +
                      '</a>',
                    angularLink:
                      '<a href=&quot;https://angular.dev&quot; target=&quot;_blank&quot;>' +
                      ('built_with.angularLink' | transloco) +
                      '</a>',
                  }
          "
        ></span>
      </div>
    </div>
  </footer>
</div>
