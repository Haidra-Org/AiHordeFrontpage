import{a as z}from"./chunk-2KXHES2T.js";import{c as R}from"./chunk-YOLUTX5D.js";import{a as N}from"./chunk-3PZAYDWK.js";import{f as Z,k as G}from"./chunk-DWXO5IB4.js";import{k as V}from"./chunk-HKCT6KYV.js";import{$ as S,Ab as f,Bb as u,D as P,Ma as e,Mb as h,Pb as l,Qb as p,Rb as x,V as T,Xa as H,_ as M,aa as g,ba as I,bc as d,cc as m,dc as $,ea as j,ha as C,ic as L,mb as _,nb as v,pb as A,q,qb as Q,rb as B,sb as n,tb as o,ub as b,xb as F}from"./chunk-T5FNS33L.js";import"./chunk-4CLCTAJ7.js";var O=(i,c)=>c.name;function U(i,c){i&1&&b(0,"div",7)}function W(i,c){i&1&&(g(),n(0,"svg",3),b(1,"path",12),o())}function J(i,c){if(i&1&&(n(0,"div",8)(1,"div",13)(2,"span",14),l(3),d(4,"transloco"),o(),n(5,"span",15),l(6),o()(),n(7,"div",13)(8,"span",14),l(9),d(10,"transloco"),o(),n(11,"span",15),l(12),o()()()),i&2){let t=u();e(3),p(m(4,4,"details.models.total_models")),e(3),p(t.formatNumber(t.currentModels().length)),e(3),p(m(10,6,"details.models.total_queued")),e(3),p(t.formatNumber(t.totalQueued()))}}function K(i,c){if(i&1&&(n(0,"span",23),l(1),o()),i&2){let t=u(2);e(),p(t.sortDirection()==="asc"?"\u2191":"\u2193")}}function X(i,c){if(i&1&&(n(0,"span",23),l(1),o()),i&2){let t=u(2);e(),p(t.sortDirection()==="asc"?"\u2191":"\u2193")}}function Y(i,c){if(i&1&&(n(0,"span",23),l(1),o()),i&2){let t=u(2);e(),p(t.sortDirection()==="asc"?"\u2191":"\u2193")}}function ee(i,c){if(i&1&&(n(0,"span",23),l(1),o()),i&2){let t=u(2);e(),p(t.sortDirection()==="asc"?"\u2191":"\u2193")}}function te(i,c){if(i&1){let t=F();n(0,"div",9)(1,"div",16),g(),n(2,"svg",17),b(3,"path",18),o(),I(),n(4,"input",19),d(5,"transloco"),f("input",function(s){M(t);let r=u();return S(r.onSearchChange(s))}),o()(),n(6,"div",20)(7,"span",21),l(8),d(9,"transloco"),o(),n(10,"button",22),f("click",function(){M(t);let s=u();return S(s.setSortField("name"))}),l(11),d(12,"transloco"),_(13,K,2,1,"span",23),o(),n(14,"button",22),f("click",function(){M(t);let s=u();return S(s.setSortField("count"))}),l(15),d(16,"transloco"),_(17,X,2,1,"span",23),o(),n(18,"button",22),f("click",function(){M(t);let s=u();return S(s.setSortField("queued"))}),l(19),d(20,"transloco"),_(21,Y,2,1,"span",23),o(),n(22,"button",22),f("click",function(){M(t);let s=u();return S(s.setSortField("eta"))}),l(23),d(24,"transloco"),_(25,ee,2,1,"span",23),o()()()}if(i&2){let t=u();e(4),B("placeholder",m(5,19,"details.models.search_placeholder"))("value",t.searchQuery()),e(4),p(m(9,21,"details.models.sort_by")),e(2),h("sort-active",t.sortField()==="name"),e(),x(" ",m(12,23,"details.models.sort.name")," "),e(2),v(t.sortField()==="name"?13:-1),e(),h("sort-active",t.sortField()==="count"),e(),x(" ",m(16,25,"details.models.sort.workers")," "),e(2),v(t.sortField()==="count"?17:-1),e(),h("sort-active",t.sortField()==="queued"),e(),x(" ",m(20,27,"details.models.sort.queued")," "),e(2),v(t.sortField()==="queued"?21:-1),e(),h("sort-active",t.sortField()==="eta"),e(),x(" ",m(24,29,"details.models.sort.eta")," "),e(2),v(t.sortField()==="eta"?25:-1)}}function ie(i,c){if(i&1){let t=F();n(0,"div",10),g(),n(1,"svg",24),b(2,"path",25),o(),I(),n(3,"p"),l(4),o(),n(5,"button",26),f("click",function(){M(t);let s=u();return S(s.loadModels())}),l(6),d(7,"transloco"),o()()}if(i&2){let t=u();e(4),p(t.error()),e(2),x(" ",m(7,2,"details.models.retry")," ")}}function ne(i,c){i&1&&(n(0,"div",11),b(1,"div",27),n(2,"p"),l(3),d(4,"transloco"),o()()),i&2&&(e(3),p(m(4,1,"details.models.loading")))}function oe(i,c){i&1&&(n(0,"p"),l(1),d(2,"transloco"),o()),i&2&&(e(),p(m(2,1,"details.models.no_results")))}function ae(i,c){i&1&&(n(0,"p"),l(1),d(2,"transloco"),o()),i&2&&(e(),p(m(2,1,"details.models.no_models")))}function le(i,c){if(i&1&&(n(0,"div",28),g(),n(1,"svg",30),b(2,"path",31),o(),_(3,oe,3,3,"p")(4,ae,3,3,"p"),o()),i&2){let t=u(2);e(3),v(t.searchQuery()?3:4)}}function re(i,c){if(i&1&&(l(0),d(1,"number")),i&2){let t=u().$implicit;x(" ",$(1,1,t.performance,"1.2-2")," ")}}function se(i,c){i&1&&l(0," - ")}function de(i,c){if(i&1&&(n(0,"div",35)(1,"div",36)(2,"span",37),l(3),o()(),n(4,"div",38)(5,"span",39),l(6),d(7,"transloco"),o(),n(8,"span",40),l(9),o()(),n(10,"div",38)(11,"span",39),l(12),d(13,"transloco"),o(),n(14,"span",40),l(15),o()(),n(16,"div",38)(17,"span",39),l(18),d(19,"transloco"),o(),n(20,"span",40),l(21),o()(),n(22,"div",38)(23,"span",39),l(24),d(25,"transloco"),o(),n(26,"span",40),l(27),o()(),n(28,"div",38)(29,"span",39),l(30),d(31,"transloco"),o(),n(32,"span",40),_(33,re,2,4)(34,se,1,0),o()()()),i&2){let t=c.$implicit,a=u(3);e(2),B("title",t.name),e(),p(t.name),e(3),p(m(7,24,"details.models.workers")),e(2),h("models-table-value-highlight",t.count>10)("models-table-value-muted",t.count===0),e(),x(" ",a.formatNumber(t.count)," "),e(3),p(m(13,26,"details.models.queued")),e(2),h("models-table-value-muted",t.queued===0),e(),x(" ",a.formatNumber(t.queued)," "),e(3),p(m(19,28,"details.models.jobs")),e(2),h("models-table-value-muted",t.jobs===0),e(),x(" ",a.formatNumber(t.jobs)," "),e(3),p(m(25,30,"details.models.eta")),e(2),h("models-table-value-muted",!t.eta||t.eta<=0),e(),x(" ",a.formatEta(t.eta)," "),e(3),p(m(31,32,"details.models.performance")),e(2),h("models-table-value-muted",!t.performance||t.performance<=0),e(),v(t.performance!==void 0&&t.performance>0?33:34)}}function ce(i,c){if(i&1&&(n(0,"div",29)(1,"div",32)(2,"span",33),l(3),d(4,"transloco"),o(),n(5,"span",34),l(6),d(7,"transloco"),o(),n(8,"span",34),l(9),d(10,"transloco"),o(),n(11,"span",34),l(12),d(13,"transloco"),o(),n(14,"span",34),l(15),d(16,"transloco"),o(),n(17,"span",34),l(18),d(19,"transloco"),o()(),A(20,de,35,34,"div",35,O),o()),i&2){let t=u(2);e(3),p(m(4,6,"details.models.sort.name")),e(3),p(m(7,8,"details.models.workers")),e(3),p(m(10,10,"details.models.queued")),e(3),p(m(13,12,"details.models.jobs")),e(3),p(m(16,14,"details.models.eta")),e(3),p(m(19,16,"details.models.performance")),e(2),Q(t.filteredModels())}}function me(i,c){if(i&1&&_(0,le,5,1,"div",28)(1,ce,22,18,"div",29),i&2){let t=u();v(t.filteredModels().length===0?0:1)}}var Ee=(()=>{let c=class c{constructor(){this.title=T(G),this.translator=T(z),this.aiHorde=T(N),this.destroyRef=T(j),this.activeTab=C("image"),this.loading=C(!1),this.error=C(null),this.imageModels=C([]),this.textModels=C([]),this.searchQuery=C(""),this.sortField=C("count"),this.sortDirection=C("desc"),this.currentModels=L(()=>this.activeTab()==="image"?this.imageModels():this.textModels()),this.filteredModels=L(()=>{let a=this.currentModels(),s=this.searchQuery().toLowerCase().trim(),r=this.sortField(),w=this.sortDirection(),D=a;return s&&(D=a.filter(E=>E.name.toLowerCase().includes(s))),[...D].sort((E,y)=>{let k=0;return r==="name"?k=E.name.localeCompare(y.name):r==="count"?k=(E.count??0)-(y.count??0):r==="queued"?k=(E.queued??0)-(y.queued??0):r==="eta"&&(k=(E.eta??0)-(y.eta??0)),w==="asc"?k:-k})}),this.totalWorkers=L(()=>this.currentModels().reduce((a,s)=>a+(s.count??0),0)),this.totalQueued=L(()=>this.currentModels().reduce((a,s)=>a+(s.queued??0),0))}ngOnInit(){q([this.translator.get("details.models.title"),this.translator.get("app_title")]).pipe(V(this.destroyRef)).subscribe(([a,s])=>{this.title.setTitle(`${a} | ${s}`)}),this.loadModels()}setActiveTab(a){this.activeTab()!==a&&(this.activeTab.set(a),this.searchQuery.set(""),a==="image"&&this.imageModels().length===0?this.loadModels():a==="text"&&this.textModels().length===0&&this.loadModels())}loadModels(){let a=this.activeTab();this.loading.set(!0),this.error.set(null),(a==="image"?this.aiHorde.getImageModels():this.aiHorde.getTextModels()).pipe(V(this.destroyRef),P(()=>this.loading.set(!1))).subscribe({next:r=>{a==="image"?this.imageModels.set(r):this.textModels.set(r)},error:r=>{this.error.set(r.message||(a==="image"?"Failed to load image models":"Failed to load text models"))}})}onSearchChange(a){let s=a.target;this.searchQuery.set(s.value)}setSortField(a){this.sortField()===a?this.sortDirection.set(this.sortDirection()==="asc"?"desc":"asc"):(this.sortField.set(a),this.sortDirection.set("desc"))}formatEta(a){return!a||a<=0?"-":a<60?`${Math.round(a)}s`:a<3600?`${Math.round(a/60)}m`:`${Math.round(a/3600)}h`}formatNumber(a){return a==null?"-":a.toLocaleString()}};c.\u0275fac=function(s){return new(s||c)},c.\u0275cmp=H({type:c,selectors:[["app-models-list"]],decls:22,vars:20,consts:[[1,"stack-lg"],[1,"details-tabs"],["type","button",1,"details-tab",3,"click"],["fill","none","stroke","currentColor","viewBox","0 0 24 24","aria-hidden","true",1,"icon-sm"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","m2.25 15.75 5.159-5.159a2.25 2.25 0 0 1 3.182 0l5.159 5.159m-1.5-1.5 1.409-1.409a2.25 2.25 0 0 1 3.182 0l2.909 2.909m-18 3.75h16.5a1.5 1.5 0 0 0 1.5-1.5V6a1.5 1.5 0 0 0-1.5-1.5H3.75A1.5 1.5 0 0 0 2.25 6v12a1.5 1.5 0 0 0 1.5 1.5Zm10.5-11.25h.008v.008h-.008V8.25Zm.375 0a.375.375 0 1 1-.75 0 .375.375 0 0 1 .75 0Z"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M7.5 8.25h9m-9 3H12m-9.75 1.51c0 1.6 1.123 2.994 2.707 3.227 1.129.166 2.27.293 3.423.379.35.026.67.21.865.501L12 21l2.755-4.133a1.14 1.14 0 0 1 .865-.501 48.172 48.172 0 0 0 3.423-.379c1.584-.233 2.707-1.626 2.707-3.228V6.741c0-1.602-1.123-2.995-2.707-3.228A48.394 48.394 0 0 0 12 3c-2.392 0-4.744.175-7.043.513C3.373 3.746 2.25 5.14 2.25 6.741v6.018Z"],["type","button",1,"btn-source-control",3,"click","disabled"],["aria-hidden","true",1,"spinner","spinner-sm"],[1,"details-summary"],[1,"details-filters"],[1,"state-container","state-container-sm","state-error"],[1,"state-container","state-container-sm","text-secondary"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M16.023 9.348h4.992v-.001M2.985 19.644v-4.992m0 0h4.992m-4.993 0 3.181 3.183a8.25 8.25 0 0 0 13.803-3.7M4.031 9.865a8.25 8.25 0 0 1 13.803-3.7l3.181 3.182m0-4.991v4.99"],[1,"summary-stat"],[1,"summary-label"],[1,"summary-value"],[1,"filter-search"],["fill","none","stroke","currentColor","viewBox","0 0 24 24","aria-hidden","true",1,"icon-sm","filter-search-icon"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","m21 21-5.197-5.197m0 0A7.5 7.5 0 1 0 5.196 5.196a7.5 7.5 0 0 0 10.607 10.607Z"],["type","text",1,"filter-input",3,"input","placeholder","value"],[1,"filter-sort"],[1,"filter-label"],["type","button",1,"sort-button",3,"click"],[1,"sort-indicator"],["fill","none","stroke","currentColor","viewBox","0 0 24 24","aria-hidden","true",1,"state-icon"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M12 9v3.75m9-.75a9 9 0 1 1-18 0 9 9 0 0 1 18 0Zm-9 3.75h.008v.008H12v-.008Z"],["type","button",1,"btn-source-control",3,"click"],[1,"spinner","spinner-md"],[1,"state-container","state-container-sm","state-muted"],[1,"models-table"],["fill","none","stroke","currentColor","viewBox","0 0 24 24","aria-hidden","true",1,"state-icon-lg"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","1.5","d","M9.75 3.104v5.714a2.25 2.25 0 0 1-.659 1.591L5 14.5M9.75 3.104c-.251.023-.501.05-.75.082m.75-.082a24.301 24.301 0 0 1 4.5 0m0 0v5.714c0 .597.237 1.17.659 1.591L19.8 15.3M14.25 3.104c.251.023.501.05.75.082M19.8 15.3l-1.57.393A9.065 9.065 0 0 1 12 15a9.065 9.065 0 0 1-6.23.693L5 15.3m14.8 0 .002.004A4.5 4.5 0 0 1 17.25 21h-10.5a4.5 4.5 0 0 1-2.553-5.696l.002-.004"],[1,"models-table-header"],[1,"models-table-th"],[1,"models-table-th","models-table-th-right"],[1,"models-table-row"],[1,"models-table-cell-name"],[1,"models-table-name",3,"title"],[1,"models-table-cell"],[1,"models-table-label"],[1,"models-table-value"]],template:function(s,r){s&1&&(n(0,"div",0)(1,"div",1)(2,"button",2),f("click",function(){return r.setActiveTab("image")}),g(),n(3,"svg",3),b(4,"path",4),o(),l(5),d(6,"transloco"),o(),I(),n(7,"button",2),f("click",function(){return r.setActiveTab("text")}),g(),n(8,"svg",3),b(9,"path",5),o(),l(10),d(11,"transloco"),o(),I(),n(12,"button",6),f("click",function(){return r.loadModels()}),_(13,U,1,0,"div",7)(14,W,2,0,":svg:svg",3),l(15),d(16,"transloco"),o()(),_(17,J,13,8,"div",8),_(18,te,26,31,"div",9),_(19,ie,8,4,"div",10),_(20,ne,5,3,"div",11),_(21,me,2,1),o()),s&2&&(e(2),h("details-tab-active",r.activeTab()==="image"),e(3),x(" ",m(6,14,"details.models.tabs.image")," "),e(2),h("details-tab-active",r.activeTab()==="text"),e(3),x(" ",m(11,16,"details.models.tabs.text")," "),e(2),B("disabled",r.loading()),e(),v(r.loading()?13:14),e(2),x(" ",m(16,18,"details.models.refresh")," "),e(2),v(!r.loading()&&!r.error()&&r.currentModels().length>0?17:-1),e(),v(!r.loading()&&!r.error()&&r.currentModels().length>0?18:-1),e(),v(r.error()?19:-1),e(),v(r.loading()&&!r.error()?20:-1),e(),v(!r.loading()&&!r.error()?21:-1))},dependencies:[R,Z],encapsulation:2,changeDetection:0});let i=c;return i})();export{Ee as ModelsListComponent};
