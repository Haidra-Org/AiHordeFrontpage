import{a as u}from"./chunk-YL3TDIGQ.js";import{g as p}from"./chunk-BPDV6QKT.js";import{A as r,S as l,X as h,k as n,l as i}from"./chunk-4EEEF725.js";var A=(()=>{let s=class s{constructor(){this.httpClient=h(p),this.auth=h(u),this.baseUrl="https://aihorde.net/api/v2/teams",this.clientAgent="AiHordeFrontpage:teams",this.handleError=e=>{let t={status:e.status??0,message:e.error?.message??"Unexpected error while contacting the API.",rc:e.error?.rc};return i(()=>t)}}buildHeaders(e){let t={"Client-Agent":this.clientAgent};return e&&(t.apikey=e),t}ensureApiKey(){return this.auth.getStoredApiKey()}getTeams(){return this.httpClient.get(this.baseUrl,{headers:this.buildHeaders()}).pipe(r(()=>n([])))}getTeam(e){return this.httpClient.get(`${this.baseUrl}/${e}`,{headers:this.buildHeaders()}).pipe(r(()=>n(null)))}createTeam(e){let t=this.ensureApiKey();return t?this.httpClient.post(this.baseUrl,e,{headers:this.buildHeaders(t)}).pipe(r(this.handleError)):i(()=>({status:401,message:"Missing API key. Please log in again to manage teams."}))}updateTeam(e,t){let o=this.ensureApiKey();return o?this.httpClient.patch(`${this.baseUrl}/${e}`,t,{headers:this.buildHeaders(o)}).pipe(r(this.handleError)):i(()=>({status:401,message:"Missing API key. Please log in again to manage teams."}))}deleteTeam(e){let t=this.ensureApiKey();return t?this.httpClient.delete(`${this.baseUrl}/${e}`,{headers:this.buildHeaders(t)}).pipe(r(this.handleError)):i(()=>({status:401,message:"Missing API key. Please log in again to manage teams."}))}};s.\u0275fac=function(t){return new(t||s)},s.\u0275prov=l({token:s,factory:s.\u0275fac,providedIn:"root"});let a=s;return a})();export{A as a};
